function import_center_analysis_file(a){var b="admin-import-center_analysis",c="#"+b+"-body";$(c).attr("data-card","").html(OM.loading_circle),OM.get_data(OM.process+"index.php",{code:"admin",type:"import-center-analysis-status",file:a},function(a){$("#message-"+b).remove();for(var d="",e=0;e<a.data.length;e++){var f=a.data[e];d+="<tr>";for(var g=0;g<f.length;g++){var h=f[g],i="";OM.is_object(h)&&(i='data-background="'+h.status+'"',h=0==e?"Message":h.message),d+=0==e?"<th>"+h+"</th>":"<td "+i+">"+h+"</td>"}d+="</tr>"}$(c).html("<table>"+d+"</table>")})}function import_center_analysis16_file(a){var b="admin-import-center_analysis16",c="#"+b+"-body",d=$("#btn-save-"+b).html();$(c).attr("data-card","").html(OM.loading_circle),$("#btn-save-"+b).attr("disabled","disabled").html('<i class="fa fa-spin fa-refresh"></i> Importing...'),OM.get_data(OM.process+"index.php",{code:"admin",type:"center-analysis16-import",file:a},function(a){$("#message-"+b).remove(),$("#btn-save-"+b).removeAttr("disabled").html(d);for(var e="",f=0;f<a.data.length;f++){var g=a.data[f];e+="<tr>";for(var h=0;h<g.length;h++){var i=g[h],j="";OM.is_object(i)&&(j='data-background="'+i.status+'"',i=0==f?"Message":i.message),e+=0==f?"<th>"+i+"</th>":"<td "+j+">"+i+"</td>"}e+="</tr>"}$(c).html("<table>"+e+"</table>")})}function display_center_analysis_challenges_edit(a){function b(a,b){var d="",e="",f=OM.domain+"#center-analysis15";e+='<form id="'+c+'" data-card><table>',e+='<thead><tr><th width="25%">Challenges</th><th width="25%">What is the root cause of this challenge?</th><th width="50%"">What could have been done to prevent this in the first place?<div class="note">Which projects should we have done or done better, what mentoring should have taken place, what admin/infrastructure should have been in place, etc.</div></th></tr></thead><tbody>\n		';for(var g=0;g<a.length;g++)d=a[g],e+='<tr data-id="'+d.id+'"><td>'+d.challenge+'<input type="hidden" id="'+c+"-challenge-"+d.id+'" value="'+d.challenge+'" /></td><td><textarea id="'+c+"-root_cause-"+d.id+'" class="block">'+d.root_cause+'</textarea></td><td><textarea id="'+c+"-salutation-"+d.id+'" class="block">'+d.salutation+"</textarea></td></tr>";e+="</tbody></table></form>",e+='<div class="pull-left"><button type="button" data-href="'+f+"/challenges/?"+OM.array_to_string(OM.Url.param,"/")+'" data-button data-color="dark-orange"><i class="fa fa-arrow-circle-left"></i> Back</button> <button type="button" class="btn-save-'+c+'" data-link="'+f+"/?"+OM.array_to_string(OM.Url.param,"/",1)+'" data-button data-color="dark-red">Save &amp; Exit</button> </div><div class="pull-right"><button type="button" class="btn-save-'+c+'" data-button data-color="green"><i class="fa fa-save"></i> Save</button> <button type="button" class="btn-save-'+c+'" data-link="'+f+"/challenges/detail/?"+OM.array_to_string(OM.Url.param,"/")+'/0" data-button data-color="orange">Save &amp; Continue <i class="fa fa-arrow-circle-right"></i></button></div>',b?$("#"+b).html(e):""}a=void 0==a?new Object:a,a.center=void 0==a.center?null:a.center,a.year=void 0==a.year?null:a.year,a.mandal=void 0==a.mandal?null:a.mandal,a.id=void 0==a.id?null:a.id,a.challenges=void 0==a.challenges?null:a.challenges;var c=a.id;null==a.challenges?(OM.footer(!0,OM.talkingToServer("Loading challenges")),OM.get_data(OM.process+"index.php",{code:"center-analysis15",type:"get-challenges",center:a.center,year:a.year,mandal:a.mandal},function(c){OM.footer(!0,OM.doneTalkingToServer(),100),c.login&&b(c.challenges,a.id)})):b(a.challenges,a.id)}function display_center_analysis_challenges(a){function b(a,b){var d="",e="",f=OM.domain+"#center-analysis15";a.length<5&&(e='<form id="'+c+'-add" style="margin:5px;" data-card><div class="strong padding-bottom-10">What are the biggest challenges in the mandal? (Maximum of 5 allowed)</div><div class="inline-form"><input type="text" id="'+c+'-add-challenge" placeholder="enter new challenge then press Enter">'+OM.Button.save({id:c+"-add"})+'</div><input type="hidden" id="'+c+'-center" value="'+OM.Url.param[3]+'"><div class="note padding-top-10"><strong>For example:</strong> Samp, No/few K2 kishores come to mandir, Bad sabha quality, Lack of karyakars, Lack of quality karyakars, Lack of general satsang knowledge among karykars, Niyam dharma among karyakars, Kishores underachieving in their education, Relationship with vadil mandal, Negativity in the mandal, Parental support for KM activities in general, etc.</div></form>');for(var g=0;g<a.length;g++)d=a[g],e+=0==g?'<ul data-list="list" data-card>':"",e+='<li><div id="'+c+"-view-"+d.id+'"><div>'+d.challenge+'</div><div data-btn="right">'+OM.Button.edit({id:c,attr:'data-id="'+d.id+'"'})+OM.Button.remove({id:c,attr:'data-id="'+d.id+'" data-name="'+d.challenge+'"'})+'</div></div><form class="hidden '+c+'-edit" data-id="'+d.id+'"><div class="inline-form"><input type="text" id="'+c+"-edit-"+d.id+'" value="'+d.challenge+'">'+OM.Button.save({id:c+"-edit-"+d.id})+"</div></form></li>",e+=g==a.length-1?"</ul>":"";a.length&&(e+='<div class="text-right"><button data-href="'+f+"/challenges/edit/?"+OM.array_to_string(OM.Url.param,"/")+'" data-button data-color="orange">Next <i class="fa fa-arrow-circle-right"></i></button></div>'),b?$("#"+b).html(e):""}a=void 0==a?new Object:a,a.center=void 0==a.center?null:a.center,a.year=void 0==a.year?null:a.year,a.mandal=void 0==a.mandal?null:a.mandal,a.id=void 0==a.id?null:a.id,a.challenges=void 0==a.challenges?null:a.challenges;var c=a.id;null==a.challenges?OM.get_data(OM.process+"index.php",{code:"center-analysis15",type:"get-challenges",center:a.center,year:a.year,mandal:a.mandal},function(c){c.login&&b(c.challenges,a.id)}):b(a.challenges,a.id)}var OM=new Object;OM.Form=new Object,OM.Modal=new Object,OM.Database=new Object,OM.Page=new Object,OM.Button=new Object,OM.Validation=new Object,OM.Date=new Object,OM.Saved=new Object,OM.Removed=new Object,OM.Url=new Object,OM.Temp=new Object,OM.login=null,OM.name="rcvicharan",OM.db_prefix="rcv-",OM.domain=window.location.protocol+"//"+window.location.host+window.location.pathname,OM.process=OM.domain+"process/",OM.hash="",OM.setup=5,OM.sync_on=!1,OM.menu_btn='<button id="btn-nav" data-button><i class="fa fa-reorder"></i></button>',OM.loading_circle='<div class="loading-circle"><div><div><div></div></div></div></div>';var agent=navigator.userAgent.toLowerCase();switch(OM.ios=agent.indexOf("iphone")>=0||agent.indexOf("ipad")>=0||agent.indexOf("ipod")>=0?!0:!1,OM.android=agent.indexOf("android")>=0?!0:!1,OM.isMac=agent.indexOf("mac")>=0?!0:!1,OM.isMobile=agent.indexOf("blackberry")>=0||agent.indexOf("android")>=0||agent.indexOf("ipod")>=0||agent.indexOf("ipad")>=0||agent.indexOf("iphone")>=0||agent.indexOf("opera mini")>=0?!0:!1,window.location.pathname){case"/rcvicharan/dev/":OM.db_prefix+="dev-";break;case"/rc-vicharan/":OM.db_prefix+="local-"}OM.online=function(){return navigator.onLine},OM.log=function(a){},OM.print=function(a){win=window.open("print.htm","_blank"),win.document.write(a),win.document.close(),win.print()},OM.back_btn=function(a){return'<button data-href="'+a+'" id="back-btn" data-button type="button"><i class="fa fa-angle-left"></i></button>'},OM.trigger=function(a,b){$("#"+a).trigger(b)},OM.live_event=function(a,b,c){$(document).on(b,a,c)},OM.error_message_remove=function(a){$(a).slideUp("blind",function(){$(a).remove()})},OM.is_string=function(a){return"string"==typeof a},OM.is_empty=function(a){return!a||0===a.length},OM.is_blank=function(a){return!a||/^\s*$/.test(a)},OM.is_array=function(a){return"[object Array]"===Object.prototype.toString.call(a)?!0:!1},OM.is_object=function(a){return"[object Object]"===Object.prototype.toString.call(a)?!0:!1},OM.ucfirst=function(a){return a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase()},OM.add_zero=function(a){return 10>a&&(a="0"+a),a},OM.footer=function(a,b,c){1==a?($("#footer").html(b).addClass("show"),$("#page").addClass("footer")):($("#footer").html("").removeClass("show"),$("#page").removeClass("footer")),void 0!=c?setTimeout(function(){OM.footer()},c):""},OM.get_data=function(a,b,c,d){d&&void 0!=d||(d="post"),"post"==d?$.post(a,b,c):"get"==d?$.get(a,b,c):"json"==d&&$.getJSON(a,b,c)},OM.message=function(a){return'<div id="system-message">'+a+"</div>"},OM.error_message=function(a,b,c){var d=b.replace(/^#/,"");c&&(OM.Form.validation_effect(d,"error"),OM.message_contener({id:d,parent:a}),$("#message-"+d).html(c).attr("data-message","error"))},OM.message_contener=function(a){a=void 0==a?new Object:a,a.parent=void 0==a.parent?"":a.parent,a.id=void 0==a.id?"":a.id,a.type=void 0==a.type?"":a.type;var b='<div id="message-'+a.id+'" class="error-'+a.parent+'"></div>';0==$("#message-"+a.id).length&&("top"==a.type?$("#"+a.id).before(b):$("#"+a.id).after(b))},OM.reset_form=function(a){$("#"+a).find("[data-border]").removeAttr("data-border")},OM.array_to_string=function(a,b,c){var d="";if(c=void 0==c?a.length:a.length-c,c>0)for(var e=0;c>e;e++)d+=a[e],d+=c-1>e?b:"";return d},OM.replace_quotes=function(a){return a=a.replace(/"/g,"&#34;"),a=a.replace(/'/g,"&#39;")},OM.replace_space=function(a){return a=a.replace(/ /gi,"-")},OM.search_objects=function(a,b,c){var d=[];for(var e in a)a.hasOwnProperty(e)&&("object"==typeof a[e]?d=d.concat(OM.search_objects(a[e],b,c)):e==b&&a[b]==c&&d.push(a));return d},OM.talkingToServer=function(a){return'<div id="talkingToServer"><div class="loading"><div></div><div></div><div></div><div></div><div></div></div><div class="text">'+a+'</div><div class="server"></div><i class="fa fa-cog fa-spin"></i></div>'},OM.doneTalkingToServer=function(a){return'<div id="doneTalkingToServer">'+a+"</div>"},OM.nicEditor=function(a){0==OM.isMobile&&new nicEditor({maxHight:500,buttonList:[" "," ","bold","italic","underline","strikethrough","indent","outdent","ol","ul","removeformat"]}).panelInstance(a)},OM.nicEditor_textarea=function(){0==OM.isMobile&&new nicEditor({maxHight:500,buttonList:[" "," ","bold","italic","underline","strikethrough","indent","outdent","ol","ul","removeformat"]}).allTextareas()},OM.Button.create=function(a,b,c){return"<"+a+" "+b+">"+c+"</"+a+">"},OM.Button.save=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"green"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-save"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="submit" id="btn-save-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.add=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"dark-blue"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-plus"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" id="btn-add-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.edit=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"dark-teal"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-edit"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" class="btn-edit-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.close=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"red"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-times"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" data-id="'+a.id+'" class="close-dialog btn-close-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.remove=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"red"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-trash-o"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" class="btn-remove-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.confirm=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"yellow"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-thumbs-o-up"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" id="btn-confirm-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Button.download=function(a){return a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id,a.color="data-button data-color="+(void 0==a.color||1==a.color?'"yellow"':'"'+a.color+'"'),a.icon=void 0==a.icon||1==a.icon?'<i class="fa fa-cloud-download"></i>':a.icon,a.attr=void 0==a.attr?"":a.attr,a.text=void 0==a.text?"":a.text,OM.Button.create("button",'type="button" id="btn-download-'+a.id+'" '+a.color+" "+a.attr,a.icon+a.text)},OM.Database=function(){null==window.localStorage.getItem(OM.db_prefix+"assignedCenters")?window.localStorage.setItem(OM.db_prefix+"assignedCenters","null"):"",null==window.localStorage.getItem(OM.db_prefix+"centerAnalysis15")?window.localStorage.setItem(OM.db_prefix+"centerAnalysis15","null"):"",null==window.localStorage.getItem(OM.db_prefix+"centerAnalysis16")?window.localStorage.setItem(OM.db_prefix+"centerAnalysis16","null"):"",null==window.localStorage.getItem(OM.db_prefix+"checkedInCenters")?window.localStorage.setItem(OM.db_prefix+"checkedInCenters","null"):"",null==window.localStorage.getItem(OM.db_prefix+"checkedInDates")?window.localStorage.setItem(OM.db_prefix+"checkedInDates","null"):"",null==window.localStorage.getItem(OM.db_prefix+"checkedInUsers")?window.localStorage.setItem(OM.db_prefix+"checkedInUsers","null"):"",null==window.localStorage.getItem(OM.db_prefix+"link_last")?window.localStorage.setItem(OM.db_prefix+"link_last","null"):"",null==window.localStorage.getItem(OM.db_prefix+"link_current")?window.localStorage.setItem(OM.db_prefix+"link_current","null"):"",null==window.localStorage.getItem(OM.db_prefix+"myCheckIn")?window.localStorage.setItem(OM.db_prefix+"myCheckIn","null"):"",null==window.localStorage.getItem(OM.db_prefix+"myGoals")?window.localStorage.setItem(OM.db_prefix+"myGoals","null"):"",null==window.localStorage.getItem(OM.db_prefix+"myVicharanEvents")?window.localStorage.setItem(OM.db_prefix+"myVicharanEvents","null"):"",null==window.localStorage.getItem(OM.db_prefix+"nav")?window.localStorage.setItem(OM.db_prefix+"nav","null"):"",null==window.localStorage.getItem(OM.db_prefix+"plannedDates")?window.localStorage.setItem(OM.db_prefix+"plannedDates","null"):"",null==window.localStorage.getItem(OM.db_prefix+"plannedUsers")?window.localStorage.setItem(OM.db_prefix+"plannedUsers","null"):"",null==window.localStorage.getItem(OM.db_prefix+"profiles")?window.localStorage.setItem(OM.db_prefix+"profiles","null"):"",null==window.localStorage.getItem(OM.db_prefix+"projects")?window.localStorage.setItem(OM.db_prefix+"projects","null"):"",null==window.localStorage.getItem(OM.db_prefix+"projects16")?window.localStorage.setItem(OM.db_prefix+"projects16","null"):"",null==window.localStorage.getItem(OM.db_prefix+"regionCenter")?window.localStorage.setItem(OM.db_prefix+"regionCenter","null"):"",null==window.localStorage.getItem(OM.db_prefix+"select")?window.localStorage.setItem(OM.db_prefix+"select","null"):"",null==window.localStorage.getItem(OM.db_prefix+"session")?window.localStorage.setItem(OM.db_prefix+"session",'{"t":null,"u":null}'):"",null==window.localStorage.getItem(OM.db_prefix+"vicharanNotes")?window.localStorage.setItem(OM.db_prefix+"vicharanNotes","null"):"",OM.assignedCenters=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"assignedCenters")),OM.centerAnalysis15=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"centerAnalysis15")),OM.centerAnalysis16=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"centerAnalysis16")),OM.checkedInCenters=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"checkedInCenters")),OM.checkedInDates=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"checkedInDates")),OM.checkedInUsers=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"checkedInUsers")),OM.link_last=window.localStorage.getItem(OM.db_prefix+"link_last"),OM.link_current=window.localStorage.getItem(OM.db_prefix+"link_current"),OM.myCheckIn=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"myCheckIn")),OM.myGoals=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"myGoals")),OM.myVicharanEvents=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"myVicharanEvents")),OM.nav=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"nav")),OM.plannedDates=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"plannedDates")),OM.plannedUsers=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"plannedUsers")),OM.profiles=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"profiles")),OM.projects=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"projects")),OM.projects16=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"projects16")),OM.regionCenter=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"regionCenter")),OM.select=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"select")),OM.session=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"session")),OM.vicharanNotes=$.parseJSON(window.localStorage.getItem(OM.db_prefix+"vicharanNotes"))},OM.Database.empty=function(){window.localStorage.clear(),OM.Database()},OM.Database.update=function(a,b){var c=!1;"assignedCenters"==a?(c=!0,OM.assignedCenters=b):"centerAnalysis15"==a?(c=!0,OM.centerAnalysis15=b):"centerAnalysis16"==a?(c=!0,OM.centerAnalysis16=b):"checkedInCenters"==a?(c=!0,OM.checkedInCenters=b):"checkedInDates"==a?(c=!0,OM.checkedInDates=b):"checkedInUsers"==a?(c=!0,OM.checkedInUsers=b):"myCheckIn"==a?(c=!0,OM.myCheckIn=b):"myGoals"==a?(c=!0,OM.myGoals=b):"myVicharanEvents"==a?(c=!0,OM.myVicharanEvents=b):"nav"==a?(c=!0,OM.nav=b):"plannedUsers"==a?(c=!0,OM.plannedUsers=b):"plannedDates"==a?(c=!0,OM.plannedDates=b):"profiles"==a?(c=!0,OM.profiles=b):"projects"==a?(c=!0,OM.projects=b):"projects16"==a?(c=!0,OM.projects16=b):"regionCenter"==a?(c=!0,OM.regionCenter=b):"select"==a?(c=!0,OM.select=b):"session"==a?(c=!0,OM.session=b):"vicharanNotes"==a&&(c=!0,OM.vicharanNotes=b),c&&window.localStorage.setItem(OM.db_prefix+a,JSON.stringify(b))},OM.Database.check=function(a){var b=!0;return void 0==a?b=!1:"undefined"==a?b=!1:null==a?b=!1:"null"==a&&(b=!1),b},OM.Database.sync=function(a,b){a=void 0==a||""==a?new Object:a,a.type=void 0==a.type?"":a.type,a.refresh=void 0==a.refresh?!1:a.refresh,a.current=void 0==a.current?1:a.current,b=void 0==b?function(){}:b,OM.sync_on=!0,OM.get_data(OM.process+"index.php",{code:"sync",type:a.type,sid:OM.Database.check(OM.session)?OM.session.sid:null,uid:OM.Database.check(OM.session)?OM.session.uid:null,datetime_post:OM.Date.now(),current:a.current},function(c){1==c.login?(OM.login=!0,c.loop=parseInt(c.loop),c.current=parseInt(c.current),c.assignedCenters?OM.Database.update("assignedCenters",c.assignedCenters):"",c.centerAnalysis15?OM.Database.update("centerAnalysis15",c.centerAnalysis15):"",c.centerAnalysis16?OM.Database.update("centerAnalysis16",c.centerAnalysis16):"",c.checkedInCenters?OM.Database.update("checkedInCenters",c.checkedInCenters):"",c.checkedInDates?OM.Database.update("checkedInDates",c.checkedInDates):"",c.checkedInUsers?OM.Database.update("checkedInUsers",c.checkedInUsers):"",c.myCheckIn?OM.Database.update("myCheckIn",c.myCheckIn):"",c.myGoals?OM.Database.update("myGoals",c.myGoals):"",c.myVicharanEvents?OM.Database.update("myVicharanEvents",c.myVicharanEvents):"",c.plannedUsers?OM.Database.update("plannedUsers",c.plannedUsers):"",c.plannedDates?OM.Database.update("plannedDates",c.plannedDates):"",c.profiles?OM.Database.update("profiles",c.profiles):"",c.projects?OM.Database.update("projects",c.projects):"",c.projects16?OM.Database.update("projects16",c.projects16):"",c.regionCenter?OM.Database.update("regionCenter",c.regionCenter):"",c.select?OM.Database.update("select",c.select):"",c.session?OM.Database.update("session",c.session):"",c.vicharanNotes?OM.Database.update("vicharanNotes",c.vicharanNotes):"",OM.session.syncTime=c.datetime[1],b(c),a.refresh&&$(window).trigger("hashchange"),c.current<=c.loop?OM.Database.sync({current:c.current},function(){}):(OM.sync_on=!1,OM.Page.menu(!0))):(OM.login=!1,OM.Database.empty(),$(window).trigger("hashchange"))})},OM.Database.checkSync=function(a){OM.Page.error(404),a()},OM.Database(),OM.Date.year_full=function(){return(new Date).getFullYear()},OM.Date.month=function(){return(new Date).getMonth()+1},OM.Date.date=function(){return(new Date).getDate()},OM.Date.day=function(){return(new Date).getDay()},OM.Date.hour=function(){return(new Date).getHours()},OM.Date.minute=function(){return(new Date).getMinutes()},OM.Date.second=function(){return(new Date).getSeconds()},OM.Date.day=function(){return(new Date).getDay()},OM.Date.today=function(){return OM.Date.year_full()+"-"+OM.add_zero(OM.Date.month())+"-"+OM.add_zero(OM.Date.date())},OM.Date.time=function(){return OM.add_zero(OM.Date.hour())+":"+OM.add_zero(OM.Date.minute())},OM.Date.full_time=function(){return OM.add_zero(OM.Date.hour())+":"+OM.add_zero(OM.Date.minute())+":"+OM.add_zero(OM.Date.second())},OM.Date.now=function(){return OM.Date.today()+" "+OM.Date.full_time()},OM.Date.datetime_format=function(a,b){var c=a.split("/"),d="";return"yyyy-mm-dd"==b&&(d=c[2]+"-"+c[0]+"-"+c[1]),d?d:a},OM.Date.change=function(a){return a=a.split("-"),OM.Date.change_month(a[1],"word","")+" "+a[2]+", "+a[0]},OM.Date.change_month=function(a,b,c){var d=new Array("01","02","03","04","05","06","07","08","09","10","11","12"),e=new Array("1","2","3","4","5","6","7","8","9","10","11","12"),f=new Array("january","february","march","april","may","june","july","august","september","october","november","december");OM.is_string(a)&&(a=a.toLowerCase());for(var g=0;12>g;g++){if(array_i=0,parseFloat(a)){if(d[g]!=a){array_i=a-1;break}array_i=g}if(OM.is_string(a)&&(f[g]==a?array_i=g:f[g].substr(0,3)==a&&(array_i=g)),!OM.is_empty(array_i))break}return"num"==b?a="full"==c?d[array_i]:parseFloat(e[array_i]):"word"==b?(a="short"==c?f[array_i].substr(0,3):f[array_i],OM.ucfirst(a)):a},OM.Date.convert_time=function(a,b){a=a.split(" ");var c=OM.PHP.strtolower(a[1]);a=a[0].split(":");var d=a[0];return"24"==b?("am"==c?"12"==d&&(d="00"):"pm"==c&&("01"==d?d="13":"02"==d?d="14":"03"==d?d="15":"04"==d?d="16":"05"==d?d="17":"06"==d?d="18":"07"==d?d="19":"08"==d?d="20":"09"==d?d="21":"10"==d?d="22":"11"==d&&(d="23")),c=""):"12"==b&&(c="12">d?" AM":" PM","13"==d?d="01":"14"==d?d="02":"15"==d?d="03":"16"==d?d="04":"17"==d?d="05":"18"==d?d="06":"19"==d?d="07":"20"==d?d="08":"21"==d?d="09":"22"==d?d="10":"23"==d?d="11":"00"==d&&(d="12")),d+":"+a[1]+c},OM.Date.timestamp=function(a){a=a.split(" ");var b=a[0],c=a[1];if(b=b.split("-"),void 0==c)var d=new Date(b[0],b[1]-1,b[2]).getTime();else{c=c.split(":");var d=new Date(b[0],b[1]-1,b[2],c[0],c[1],c[2]).getTime()}return d/1e3},OM.Form.built_select_box=function(a){a=void 0==a?a=new Object:a,a.id=void 0==a.id?"":a.id,a.attr=void 0==a.attr?"":a.attr,a.selected=void 0==a.selected?"":a.selected,a.data=void 0==a.data?"":a.data,a.value=void 0==a.value?a.data:a.value,a.title=void 0==a.title?"Select your option":a.title,a.index=void 0==a.index||a.index<0?0:a.index;for(var b="",c="",d=!1,e=a.index;e<a.value.length;e++)d=a.selected==a.value[e]?!0:d,c=a.selected==a.value[e]?" selected":"",b+='<option value="'+a.value[e]+'"'+c+">"+a.data[e]+"</option>";return b='<option value="" disabled '+(d?"":"selected")+">"+a.title+"</option>"+b,'<select id="'+a.id+'" name="'+a.id+'" '+a.attr+">"+b+"</select>"},OM.Form.check_assign_center=function(a){for(var b=OM.session.assign_center,c=!1,d=0;d<b.length;d++)if(b[d]==a){c=!0;break}return c},OM.Form.select_assign_center=function(a){a=void 0==a?a=new Object:a,a.id=void 0==a.id?"":a.id,a.attr=void 0==a.attr?"":a.attr,a.selected=void 0==a.selected?"":a.selected,a.other=void 0==a.other?"":a.other,a.other_center=void 0==a.other_center?"":a.other_center;for(var b="",c=OM.session.assign_center,d="",e="",f=!1,g=0;g<c.length;g++)d=c[g],f=a.selected==d.name?!0:f,e=a.selected==d.name?" selected":"",b+='<option value="'+d.name+'" data-bm="'+d.bm+'" data-km="'+d.km+'" data-bst="'+d.bst+'" data-kst="'+d.kst+'" data-campus="'+d.campus+'" data-goshti="'+d.goshti+'" data-lam="'+d.lam+'"'+e+">"+d.name+"</option>";return b+=1==a.other&&OM.select.other_option.length>0?'<option value="other" '+("other"==a.selected?"selected":"")+">Other</option>":"",b+=1==a.other_center?'<option value="other-center" '+("other-center"==a.selected?"selected":"")+">Other Center</option>":"",b='<option value="" disabled '+(f?"selected":"")+">Select Center</option>"+b,'<select id="'+a.id+'" name="'+a.id+'" '+a.attr+">"+b+"</select>"},OM.Form.change_sabha_type=function(a,b){var c=$("#"+b+" option:selected").attr("data-bm"),d=$("#"+b+" option:selected").attr("data-km"),e=$("#"+b+" option:selected").attr("data-bst"),f=$("#"+b+" option:selected").attr("data-kst"),g=$("#"+b+" option:selected").attr("data-campus"),h=$("#"+b+" option:selected").attr("data-goshti"),i=$("#"+b+" option:selected").attr("data-lam"),j="",k=$("#"+a+"-sabha").attr("data-sabha"),l=!1,m=OM.select.sabha_type;return OM.is_empty(c)||"B"!=OM.session.mandal||(l=m[0]==k?!0:l,j+='<option value="'+m[0]+'" '+(m[0]==k?"selected":"")+">"+m[0]+"</option>"),OM.is_empty(e)||"B"!=OM.session.mandal||(l=m[1]==k?!0:l,j+='<option value="'+m[1]+'" '+(m[1]==k?"selected":"")+">"+m[1]+"</option>"),OM.is_empty(d)||"K"!=OM.session.mandal||(l=m[2]==k?!0:l,j+='<option value="'+m[2]+'" '+(m[2]==k?"selected":"")+">"+m[2]+"</option>"),OM.is_empty(f)||"K"!=OM.session.mandal||(l=m[3]==k?!0:l,j+='<option value="'+m[3]+'" '+(m[3]==k?"selected":"")+">"+m[3]+"</option>"),OM.is_empty(g)||"K"!=OM.session.mandal||(l=m[4]==k?!0:l,j+='<option value="'+m[4]+'" '+(m[4]==k?"selected":"")+">"+m[4]+"</option>"),OM.is_empty(h)||(l=m[5]==k?!0:l,j+='<option value="'+m[5]+'" '+(m[5]==k?"selected":"")+">"+m[5]+"</option>"),OM.is_empty(i)||(l=m[6]==k?!0:l,j+='<option value="'+m[6]+'" '+(m[6]==k?"selected":"")+">"+m[6]+"</option>"),OM.Form.validation_effect(a+"-sabha",l?"process":"error"),'<option value="" disabled '+(l?"selected":"")+">Select Sabha</option>"+j},OM.Form.change_mandal_on_off=function(a,b){var c=new Array($("#"+b+" option:selected").attr("data-bm"),$("#"+b+" option:selected").attr("data-bst"),$("#"+b+" option:selected").attr("data-km"),$("#"+b+" option:selected").attr("data-kst"),$("#"+b+" option:selected").attr("data-campus"),$("#"+b+" option:selected").attr("data-goshti"),$("#"+b+" option:selected").attr("data-lam")),d=new Array("BM","BST","Goshti","LAM","KM","KST","Campus"),e="",f="";if("B"==OM.session.mandal)for(var g=0;3>g;g++)f=OM.is_empty(c[g])?"":"checked",e+="<li><span>"+d[g]+'</span><span class="checkbox yes-no"><input type="checkbox" id="edit-'+a+"-"+d[g]+'" value="Y" class="mandal-'+a+'" placeholder="'+d[g]+'" '+f+'><label for="edit-'+a+"-"+d[g]+'"><div class="inner"></div><div class="btn-switch"></div></label></span></li>';else if("K"==OM.session.mandal)for(var g=2;7>g;g++)f=OM.is_empty(c[g])?"":"checked",e+="<li><span>"+d[g]+'</span><span class="checkbox yes-no"><input type="checkbox" id="edit-'+a+"-"+d[g]+'" value="Y" class="mandal-'+a+'" placeholder="'+d[g]+'" '+f+'><label for="edit-'+a+"-"+d[g]+'"><div class="inner"></div><div class="btn-switch"></div></label></span></li>';return'<ul class="li-icon">'+e+"</ul>"},OM.Form.year=function(a){a=void 0==a?a=new Object:a,a.id=void 0==a.id?"":a.id,a.attr=void 0==a.attr?"":a.attr,a.selected=void 0==a.selected?"":a.selected;var b=OM.Date.year_full(),c=OM.Date.month()>=9?b+1:b,d=c-b,e="",f="";a.selected=""==a.selected?c:a.selected;for(var g=0;d>=g;g++)f=b+g==a.selected?"selected":"",e+='<option value="'+(b+g)+'" '+f+">"+(b+g)+"</option>";return'<select id="'+a.id+'" '+a.attr+'><option value="" disabled>Select Year</option>'+e+"</select>"},OM.Form.month=function(a,b,c){var d,e,f="";b+=1;for(var g=1;13>g;g++)e=10>g?"0"+g:g,d=e==b?"selected":"",f+='<option value="'+e+'" '+d+">"+OM.change_month(g,"word","full")+"</option>";return'<select name="'+a+'" id="'+a+'" '+c+'><option value="">Select Month</option>'+f+"</select>"},OM.Form.day=function(a,b,c){for(var d,e,f="",g=1;32>g;g++)e=10>g?"0"+g:g,d=e==b?"selected":"",f+='<option value="'+e+'" '+d+">"+e+"</option>";return'<select name="'+a+'" id="'+a+'" '+c+'><option value="">Select Day</option>'+f+"</select>"},OM.Form.fields=function(a){for(var b=$("#"+a).find("input, select, textarea"),c=Array(),d=0;d<b.length;d++)if(void 0==b[d].attributes["data-not"]){var e=b[d],f=e.attributes.id.value,g=$("#"+f).get(0).tagName.toLowerCase(),h=$("#"+f).is(":checked"),i=e.attributes.type?e.attributes.type.value:null,j="checkbox"==i?h?e.value:null:e.value;c[d]={id:f,id_short:f.split(a+"-")[1],element:g,type:i,required:e.attributes.required?!0:!1,disabled:e.attributes.disabled?!0:!1,multiple:e.attributes.multiple?!0:!1,checked:h,hidden:$("#"+f).parent().parent().is(":hidden"),group:e.attributes["data-group"]?parseInt(e.attributes["data-group"].value):null,show:e.attributes["data-show"]?e.attributes["data-show"].value:null,field:"checkbox"==i?$("#"+f).parent().parent().parent().find(".field").text():$("#"+f).parent().parent().find(".field").text(),value:j,value_filtered:null==j?null:$("<p>"+j+"</p>").text(),text:"select"==g?$("#"+f+" option:selected").text():"input"==g&&"file"==i&&""!=e.value?e.value.split("\\")[2]:e.value,prefix:$("#"+f).parent().find(".prefix").text(),suffix:$("#"+f).parent().find(".suffix").text(),extensions:e.attributes["data-ext"]?e.attributes["data-ext"].value.split(","):null}}return c},OM.Form.validate=function(a){var b=OM.Form.fields(a),c=!1,d=new Array;$(".validation-icon span.fa").remove(),$(".error-"+a).remove(),$("#"+a+" [data-border]").removeAttr("data-border");for(var e=0;e<b.length;e++){var f=b[e];if(f.required&&!f.hidden)if(null==f.group)if("select"==f.element)""==f.value_filtered?(c=!0,OM.Form.validation_effect(f.id)):OM.Form.validation_effect(f.id,"success");else if("input"==f.element)if("checkbox"==f.type&&(f.checked?OM.Form.validation_effect(f.id,"success"):(c=!0,OM.Form.validation_effect(f.id))),"file"==f.type){var g=OM.Validation.file(f.text,f.extensions);1!=g?(c=!0,OM.Form.validation_effect(f.id)):OM.Form.validation_effect(f.id,"success")}else""==f.value_filtered?(c=!0,OM.Form.validation_effect(f.id)):OM.Form.validation_effect(f.id,"success");else"textarea"==f.element&&(""==f.value_filtered?(c=!0,OM.Form.validation_effect(f.id)):OM.Form.validation_effect(f.id,"success"));else{var h=f.group-1;d[h]=void 0==d[h]?new Array:d[h];var i=d[h].length;d[h][i]=void 0==d[h][i]?new Object:d[h][i],d[h][i]=f}}for(var e=0;e<d.length;e++){for(var j=d[e],k=!0,h=0;h<j.length;h++){var f=j[h];""!=f.value_filtered&&(k=!1)}if(k){c=!0;for(var h=0;h<j.length;h++){var f=j[h];OM.Form.validation_effect(f.id)}}}if(c){var l='<h4><i class="fa fa-warning"></i>OH SNAP! I found some error in this form.</h4><p>Change a few things up and try submitting again.</p>';return 0==$("#message-"+a).length&&$("#"+a).before('<div id="message-'+a+'" data-card="message"></div>'),$("#message-"+a).html(l).attr("data-background","error"),!1}return $("#message-"+a).remove(),!0},OM.Form.validation_effect=function(a,b){b=void 0==b?"error":b;var c="error"==b?"times-circle":"success"==b?"check-circle":"warning";0==$("#fa-"+a).length&&$("#"+a).after('<span id="fa-'+a+'"></span>'),$("#"+a).attr("data-border",b).parent().find(".nicEdit-main").attr("data-border",b),$("#fa-"+a).attr("data-color",b).removeAttr("class").addClass("validation-icon fa fa-"+c),setTimeout(function(){$("#"+a).parent().addClass("validation").attr("data-has","error")},50)},OM.Form.validation_effect_remove=function(a){$("#fa-"+a).remove(),$("#"+a).removeAttr("data-border").parent().removeClass("validation").removeAttr("data-has").find(".nicEdit-main").removeAttr("data-border")
},OM.Form.confirm=function(a,b){if(OM.Form.validate(a)){for(var c=OM.Form.fields(a),d="",e="",f=0;f<c.length;f++){var g=c[f];switch(g.prefix=""!=g.prefix?g.prefix+" ":"",g.suffix=""!=g.suffix?" "+g.suffix:"",e="confirm"==g.show||!g.hidden&&"hidden"!=g.type?"":"hidden",g.text="select"==g.element&&""==g.value_filtered?"None":g.text,g.type){case"date":g.text=OM.Date.change(g.text);break;case"checkbox":g.text=g.checked?"Yes":"No"}d+='<li class="'+e+'"><div class="field">'+g.field+'</div><div class="value">'+g.prefix+g.text+g.suffix+"</div></li>"}OM.Modal.confirm(a,b,'<ul data-list="form">'+d+"</ul>")}},OM.Form.field_json=function(a,b){b=void 0==b?"":b;for(var c=OM.Form.fields(a),d="{"+b,e=0;e<c.length;e++){var f=c[e];f.value=null==f.value_filtered||""==f.value_filtered?null:'"'+f.value.replace(/"/g,'\\"')+'"',d+=0==e&&""!=b?",":"",d+='"'+f.id_short+'":'+f.value,d+=e!=c.length-1?",":""}return d+="}"},OM.Modal["new"]=function(a,b,c,d){d&&void 0!=d||(d=""),c&&void 0!=c||(c="body"),0==$("#dialog-"+a).length&&(b||(b=OM.Modal.format("Error: Loading Data",OM.Button.close({id:a}),OM.message("<h3>There was some error loading data</h3>"))),$(c).append('<section id="dialog-'+a+'" class="dialog" style="opacity:0;"><div id="dialog-'+a+'-content" class="dialog-content" '+d+' data-id="'+a+'">'+b+"</div></section>"),OM.Modal.fix_postion(a),$("#dialog-"+a).animate({opacity:1},100))},OM.live_event(".close-dialog","click",function(){OM.Modal.close($(this).attr("data-id"))}),OM.Modal.close=function(a){$("#dialog-"+a).length>0&&$("#dialog-"+a).animate({opacity:0},100,function(){$("#dialog-"+a).remove()})},OM.Modal.format=function(a,b,c){var d="";return a&&(d="<header><span>"+a+"</span><span>"+b+"</span></header>"),c&&(d+="<section>"+c+"</section>"),d},OM.Modal.change_content=function(a,b){$("#dialog-"+a+"-content").html(b)},OM.Modal.hide=function(a){$("#dialog-"+a).css("display","none")},OM.Modal.show=function(a){$("#dialog-"+a).css("display","block")},OM.Modal.loading=function(a){OM.Modal["new"](a,OM.loading_circle)},OM.Modal.site_loading=function(){OM.Modal["new"]("site-loader",'<div id="site-loader"></div>')},OM.Modal.confirm=function(a,b,c,d){d=void 0==d?"":d,OM.Modal["new"]("confirm-"+a,OM.Modal.format("Confirm: "+b,OM.Button.close({id:"confirm-"+a,color:!0,icon:!0}),c+'<div class="btn">'+OM.Button.confirm({id:a,text:"Confirm",attr:d})+"</div>"))},OM.Modal.save=function(a,b,c,d){OM.footer(!0,OM.talkingToServer("Saving")),OM.get_data(b,c,function(b){1==b.login&&("success"==b.status?(d(b),OM.footer(!0,OM.doneTalkingToServer("Saved"),2e3)):"error"==b.status&&OM.Modal["new"]("saved-"+a,OM.Modal.format("Error: Saving",OM.Button.close({id:"saved-"+a}),OM.message("<h3>"+b.message+"</h3><p><u>Error message:</u> "+b.error+"</p>"))))})},OM.Modal.remove=function(a,b,c,d){OM.footer(!0,OM.talkingToServer("Removing")),OM.get_data(b,c,function(b){1==b.login&&("success"==b.status?(d(b),OM.footer(!0,OM.doneTalkingToServer("Removed"),2e3)):"error"==b.status&&OM.Modal["new"]("removed-"+a,OM.Modal.format("Error: Removing",OM.Button.close({id:"removed-"+a}),OM.message("<h3>"+b.message+"</h3><p><u>Error message:</u> "+b.error+"</p>"))))},"post")},OM.Modal.fix_postion=function(a){var b=function(a){var b=Math.abs(Math.round($("#dialog-"+a+"-content").height()/2)),c=Math.abs(Math.round($("#dialog-"+a+"-content").width()/2)),d=Math.abs(Math.round($(window).height())),e=Math.abs(Math.round(d-$("#dialog-"+a+"-content header").height()));$("#dialog-"+a+"-content").find("header").length>0,$("#dialog-"+a+"-content").css({"margin-top":"-"+b+"px","margin-left":"-"+c+"px","max-height":d+"px"}),$("#dialog-"+a+"-content section").css({"max-height":e+"px"})};if(a&&void 0!=a)b(a);else for(var c=0;c<$(".dialog-content").length;c++)a=$(".dialog-content").eq(c).attr("data-id"),b(a)},setInterval(function(){OM.Modal.fix_postion()},100),OM.Page.format=function(a,b,c,d,e){$("body").scrollTop(0),"setup"!==a&&$("#top-left").html(OM.menu_btn+a),OM.is_empty(b)||$("#top-center").html(b),$("#top-right").html(OM.is_empty(c)?"":c),OM.is_empty(d)||$("#page").html(d),$("footer").html(OM.is_empty(e)?"":e),document.title=OM.is_empty(b)?"RC Vicharan":b+" - RC Vicharan"},OM.Page.row=function(a,b){var c="",d="",e=0,f=0;for(e=0;e<a.length;e++){for(d="",f=1;f<=a[e].length-1;f++)d+="i"==a[e][f][0]?a[e][f][1]:"link"==a[e][f][0]?a[e][f][1]:'<div class="'+a[e][f][0]+'">'+a[e][f][1]+"</div>";c+="<li "+a[e][0].attr+">"+d+"</li>"}return"<ul "+b+">"+c+"</ul>"},OM.Page.tabNav=function(a){for(var b=0,c="";b<a.length;b++)void 0==a[b].active?a[b].active="":"",c+='<li class="'+a[b].active+'"><a href="'+a[b].link+'">'+a[b].name+"</a></li>";return'<ul data-tabNav="'+a.length+'">'+c+"</ul>"},OM.Page.loading=function(){var a="<h2>Loading page...</h2>".OM.loading_circle;OM.Page.format("","Loading page...","",a,"")},OM.Page.error=function(a,b){return 404==a?"dialog"==b?OM.Modal["new"]("error-page-404",OM.Modal.format("Page not found",OM.Button.close({id:"error-page-404"}),'<div id="error-page"><h1>404 - File not found</h1><p>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</p></div>')):OM.Page.format(OM.back_btn("javascript:window.history.back();"),"Page not found","",'<div id="error-page" data-card><h1>404 - File not found</h1><p>The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.</p></div>'):403==a?"dialog"==b?OM.Modal["new"]("error-page-403",OM.Modal.format("Access is denied",OM.Button.close({id:"error-page-403"}),'<div id="error-page"><h1>403 - Forbidden</h1><p>You do not have permission to view this page using the credentials that you supplied.</p></div>')):OM.Page.format(OM.back_btn("javascript:window.history.back();"),"Access is denied","",'<div id="error-page" data-card><h1>403 - Forbidden</h1><p>You do not have permission to view this page using the credentials that you supplied.</p></div>'):void 0},OM.Url.navigate=function(a){void 0!=a&&(window.location.href=a)},OM.Validation.firstName=function(a){return OM.is_empty(a)?"Please enter first name.":a.length<2?"Please enter first name.":/[a-zA-Z]*/.test(a)?!0:"Please enter validate first name."},OM.Validation.lastName=function(a){return OM.is_empty(a)?"Please enter last name.":a.length<2?"Please enter last name.":/[a-zA-z]+([ '-][a-zA-Z]+)*/.test(a)?!0:"Please enter validate last name."},OM.Validation.email=function(a){return OM.is_empty(a)?"Please enter email address.":/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?!0:"Please enter validate email address."},OM.Validation.password=function(a){return OM.is_empty(a)?"Please enter password.":a.length<6?"Please enter at least 6 characters.":a.match(/[A-Z]/)?a.match(/[A-z]/)?a.match(/\d/)?!0:"Please enter at least one number.":"Please enter at least one letter.":"Please enter at least one capital letter."},OM.Validation.confirm_match=function(a,b,c){return OM.is_empty(b)?"Please confirm "+c+".":a!=b?"Confirm "+c+" does not match.":!0},OM.Validation.file=function(a,b){for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(a.substr(a.length-e.length,e.length).toLowerCase()==e.toLowerCase()){c=!0;break}}return c?c:"Sorry, "+a+" is invalid, allowed extensions are: "+b.join(", ")},$(document).ready(function(){OM.Database.sync("",function(){$(window).trigger("hashchange")}),OM.body=$("#na"),OM.page_loaded=!1,$("#dialog-site-loader").length<1&&(OM.Modal.site_loading(),$("#dialog-site-loader").css({"background-color":"transparent"})),$(window).bind("hashchange",function(){OM.Page.loader()}),OM.before_loading=function(){OM.Modal["new"]("loading",OM.loading_circle,"radius-90")},OM.Page.loading=function(a){return a=void 0==a?new Object:a,"Loading..."},OM.live_event("input, textarea","keyup",function(){OM.login&&($(this).val().length>0?OM.Form.validation_effect_remove($(this).attr("id")):OM.Form.validation_effect($(this).attr("id"),"error"))}),OM.live_event('input[type="radio"],input[type="checkbox"]',"click",function(){var a=$(this).parent().attr("data-message-id");$(this).parent().removeClass("error-border"),OM.error_message_remove("#message-"+a)}),OM.live_event('select, input[type="date"]',"change",function(){""!=$(this).val()?OM.Form.validation_effect_remove($(this).attr("id")):OM.Form.validation_effect($(this).attr("id"),"error")}),OM.live_event("#btn-nav","click",function(){$("body").attr("data-move")?OM.hide_menu():($("body").attr("data-move","right"),$("#na").removeClass("nav-icon"))}),OM.live_event("aside a","click",function(){OM.hide_menu()}),OM.live_event("#menu-cover","click",function(){OM.hide_menu()}),OM.live_event("#menu-cover","touchstart",function(a){a.preventDefault(),OM.hide_menu()}),OM.hide_menu=function(){$("body").removeAttr("data-move")},OM.live_event(".get-center-by-region","change",function(){var a=$(this).val(),b=$(this).attr("data-page_name"),c=$("#"+b+"-region-center").attr("data-center"),d="",e="",f="",g=!1;if(""!=a){switch(a){case"Canada":d=OM.select.region_center[0].centers;break;case"Midwest":d=OM.select.region_center[1].centers;break;case"Northeast":d=OM.select.region_center[2].centers;break;case"Southeast":d=OM.select.region_center[3].centers;break;case"Southwest":d=OM.select.region_center[4].centers;break;case"West":d=OM.select.region_center[5].centers}for(var h=0;h<d.length;h++){var i=d[h];g=c==i.name?!0:g,f=c==i.name?" selected":"",e+='<option value="'+i.name+'" data-bm="'+i.bm+'" data-km="'+i.km+'" data-bst="'+i.bst+'" data-kst="'+i.kst+'" data-campus="'+i.campus+'" data-goshti="'+i.goshti+'" data-lam="'+i.lam+'"'+f+">"+i.name+"</option>"}e='<option value="" disabled '+(g?"selected":"")+">Select Center</option>"+e,$("#"+b+"-region-center").html(e).trigger("change"),$("#"+b+"-all-center").removeClass("hidden")}else $("#"+b+"-all-center").addClass("hidden"),$("#"+b+"-region-center").html("")}),OM.live_event(".get-sabha-by-center","change",function(){var a=$(this).attr("data-page_name"),b=$(this).attr("id"),c=$(this).val();"other-center"==c&&($("#"+a+"-assign-center").addClass("hidden"),$("#"+a+"-all-region").removeClass("hidden")),null==c||""==c||"other"==c||"other-center"==c?($("#"+a+"-sabha").html(""),$("#"+a+"-sabha_type").addClass("hidden")):($("#"+a+"-sabha").html(OM.Form.change_sabha_type(a,b)),$("#"+a+"-sabha_type").removeClass("hidden"))}),OM.live_event('[data-list="nest"]>li>[data-title]',"click",function(){var a=$(this).parent().parent().attr("data-colorName"),b=$(this).attr("data-title");(""==a||void 0==a)&&(a="inverse"),$(this).next('[data-content="'+b+'"]').is(":hidden")?($(this).parent().parent().find("li>div[data-content]").slideUp("faster"),$(this).parent().parent().find("li").removeClass("active"),$(this).parent().parent().find("li>[data-title]").removeAttr("data-color"),$(this).next('[data-content="'+b+'"]').slideDown(),$(this).parent().addClass("active"),$(this).attr("data-color",a)):($(this).next('[data-content="'+b+'"]').slideUp("faster"),$(this).parent().removeClass("active"),$(this).removeAttr("data-color"))}),OM.live_event("[data-tabNav]>li","click",function(){var a=$(this).attr("data-tabContent-id"),b="";b=$(this).parent().find(".active").attr("data-tabContent-id"),$(this).parent().find(".active").removeClass("active"),$('[data-tabContent="'+b+'"]').removeClass("show").addClass("hide"),$(this).addClass("active"),$('[data-tabContent="'+a+'"').removeClass("hide").addClass("show")}),OM.live_event("[data-href]","click",function(){var a=$(this).attr("data-href");OM.Url.navigate(a)}),OM.live_event("#btn-sync","click",function(){return"disable"!=$(this).attr("disable")&&($(this).attr({disable:"disable","data-color":"orange"}),$(this).children("i").addClass("fa-spin"),OM.Database.sync("",function(){$("#btn-sync").removeAttr("disable").attr({"data-color":"purple"}),$("#btn-sync i").removeClass("fa-spin"),$("#sync-time").html("Last updated: "+OM.session.syncTime)})),!1}),OM.live_event("#nav-header","click",function(){$("#na.nav-icon").length?($("#na").removeClass("nav-icon"),OM.Database.update("nav","")):0==$('body[data-move="right"]').length&&($("#na").addClass("nav-icon"),OM.Database.update("nav","nav-icon"))})}),OM.Page.admin_active_projects_add=function(){var a="admin-active-projects-add",b="";OM.session.ul<=OM.select.user_level.na_rc?(b='<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Project name"),Array("value",OM.Form.built_select_box({id:a+"-list_id",data:OM.select.projects_list,value:OM.select.projects_list_id,title:"Select a project",attr:"required"}))),Array({attr:""},Array("field","Project is part of the 10 goals?"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+a+'-part_of_10_goals" value="Y" class="'+a+'-change_fields" checked><label for="'+a+'-part_of_10_goals"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="part-of-10-goals"'},Array("field","What's being measured?"),Array("value",'<input type="text" id="'+a+'-measure" required>')),Array({attr:'class="part-of-10-goals"'},Array("field","Common goal"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+a+'-common" value="Y" class="'+a+'-change_fields" checked><label for="'+a+'-common"><div class="inner"></div><div class="btn-switch"></div></label></div><div class="note one-goal">Uncheck to add different goal for A,B,C Center.</div><div class="note different-goals hidden">Check to add common goal for A,B,C Center.</div>')),Array({attr:'class="one-goal part-of-10-goals"'},Array("field","Goal"),Array("value",'<input type="text" id="'+a+'-goal" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal A Center"),Array("value",'<input type="text" id="'+a+'-goal_a" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal B Center"),Array("value",'<input type="text" id="'+a+'-goal_b" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal C Center"),Array("value",'<input type="text" id="'+a+'-goal_c" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:""},Array("field","Year"),Array("value",OM.Form.year({id:a+"-year",selected:OM.Date.year_full()})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a})+"</div></form>",OM.Page.format(OM.back_btn(OM.domain+"#admin/projects"),"Add projects","",b)):OM.Page.error(403)},OM.live_event(".admin-active-projects-add-change_fields","change",function(){var a="admin-active-projects-add",b=$("#"+a+"-part_of_10_goals").is(":checked"),c=$("#"+a+"-common").is(":checked");b?($(".part-of-10-goals").removeClass("hidden"),c?($(".different-goals").addClass("hidden"),$(".one-goal").removeClass("hidden")):($(".one-goal").addClass("hidden"),$(".different-goals").removeClass("hidden"))):$(".part-of-10-goals").addClass("hidden")}),OM.live_event("#admin-active-projects-add","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-active-projects-add","Add project")}),OM.live_event("#btn-confirm-admin-active-projects-add","click",function(a){a.preventDefault();var b="admin-active-projects-add",c=$("#"+b+"-list_id option:selected").text();OM.Modal.close("confirm-"+b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"add-active-project", "project_name":"'+c+'"')),function(a){OM.Modal.close(b),OM.Database.update("projects",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.admin_active_projects_edit=function(){var a="admin-active-projects-edit",b=OM.domain+"#admin/projects/active";param=OM.Url.param,content="",id=param[2],project=OM.search_objects(OM.projects,"id",id)[0],OM.session.ul<=OM.select.user_level.na_rc?(content='<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:'class="hidden"'},Array("field","Project ID"),Array("value",'<input id="'+a+'-id" value="'+project.id+'" hidden>')),Array({attr:""},Array("field","Project name"),Array("value",OM.Form.built_select_box({id:a+"-list_id",data:OM.select.projects_list,value:OM.select.projects_list_id,selected:project.project_id,title:"Select a project",attr:"required"}))),Array({attr:""},Array("field","Project is part of the 10 goals?"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+a+'-part_of_10_goals" value="Y" class="'+a+'-change_fields" '+(""!=project.part_of_10_goals?"checked":"")+'><label for="'+a+'-part_of_10_goals"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="part-of-10-goals"'},Array("field","What's being measured?"),Array("value",'<input type="text" id="'+a+'-measure" value="'+project.measure+'" required>')),Array({attr:'class="part-of-10-goals"'},Array("field","Common goal"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+a+'-common" value="Y" class="'+a+'-change_fields" '+(""!=project.goal_common?"checked":"")+'><label for="'+a+'-common"><div class="inner"></div><div class="btn-switch"></div></label></div><div class="note one-goal">Uncheck to add different goal for A,B,C Center.</div><div class="note different-goals hidden">Check to add common goal for A,B,C Center.</div>')),Array({attr:'class="one-goal part-of-10-goals"'},Array("field","Goal"),Array("value",'<input type="text" id="'+a+'-goal" value="'+project.goal_a+'" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal A Center"),Array("value",'<input type="text" id="'+a+'-goal_a" value="'+project.goal_a+'" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal B Center"),Array("value",'<input type="text" id="'+a+'-goal_b" value="'+project.goal_b+'" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:'class="hidden different-goals part-of-10-goals"'},Array("field","Goal C Center"),Array("value",'<input type="text" id="'+a+'-goal_c" value="'+project.goal_c+'" required><div class="note">For plan numbers enter #, For percentage enter #%, For Yes/No enter Yes</div>')),Array({attr:""},Array("field","Year"),Array("value",OM.Form.year({id:a+"-year",selected:""!=project.year?project.year:OM.Date.year_full()})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a})+"</div></form>",OM.Page.format(OM.back_btn(b+"/?"+OM.array_to_string(param,"/",1)),"Edit project","",content),OM.trigger(a+"-part_of_10_goals","change")):OM.Page.error(403)},OM.live_event(".admin-active-projects-edit-change_fields","change",function(){var a="admin-active-projects-edit",b=$("#"+a+"-part_of_10_goals").is(":checked"),c=$("#"+a+"-common").is(":checked");b?($(".part-of-10-goals").removeClass("hidden"),c?($(".different-goals").addClass("hidden"),$(".one-goal").removeClass("hidden")):($(".one-goal").addClass("hidden"),$(".different-goals").removeClass("hidden"))):$(".part-of-10-goals").addClass("hidden")}),OM.live_event("#admin-active-projects-edit","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-active-projects-edit","Edit project")}),OM.live_event("#btn-confirm-admin-active-projects-edit","click",function(a){a.preventDefault();var b="admin-active-projects-edit",c=$("#"+b+"-list_id option:selected").text();OM.Modal.close("confirm-"+b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"edit-active-project", "project_name":"'+c+'"')),function(a){OM.Modal.close(b),OM.Database.update("projects",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.admin_active_project16_add=function(){var a="admin-active-projects16-add",b="";OM.session.ul<=OM.select.user_level.na_rc?(b='<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Goal name"),Array("value",OM.Form.built_select_box({id:a+"-list_id",data:OM.select.projects_list,value:OM.select.projects_list_id,title:"Select a goal",attr:"required"}))),Array({attr:""},Array("field","Category"),Array("value",'<input type="text" id="'+a+'-category" required>')),Array({attr:""},Array("field","Description"),Array("value",'<textarea id="'+a+'-description" required></textarea>')),Array({attr:""},Array("field","Metric"),Array("value",'<textarea id="'+a+'-metric" required></textarea>')),Array({attr:""},Array("field","Metric Max"),Array("value",'<input type="number" id="'+a+'-metric_max" min="0">')),Array({attr:""},Array("field","Year"),Array("value",OM.Form.year({id:a+"-year",selected:OM.Date.year_full()+1})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Save"})+"</div></form>",OM.Page.format(OM.back_btn(OM.domain+"#admin/projects/active16"),"Add active project","",b)):OM.Page.error(403)},OM.live_event("#admin-active-projects16-add","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-active-projects16-add","Add active project")}),OM.live_event("#btn-confirm-admin-active-projects16-add","click",function(a){a.preventDefault();var b="admin-active-projects16-add",c=$("#"+b+"-list_id option:selected").text();OM.Modal.close("confirm-"+b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"add-active-project16", "goal_name":"'+c+'"')),function(a){OM.Modal.close(b),OM.Database.update("projects16",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.admin_active_project16_edit=function(){var a="admin-active-projects16-edit",b=OM.domain+"#admin/projects/active16";param=OM.Url.param,content="",id=param[2],project=OM.search_objects(OM.projects16,"goal_id",id)[0],OM.session.ul<=OM.select.user_level.na_rc?(content='<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:'class="hidden"'},Array("field","Goal ID"),Array("value",'<input id="'+a+'-id" value="'+project.goal_id+'" hidden>')),Array({attr:""},Array("field","Goal name"),Array("value",OM.Form.built_select_box({id:a+"-list_id",data:OM.select.projects_list,value:OM.select.projects_list_id,selected:project.list_id,title:"Select a goal",attr:"required"}))),Array({attr:""},Array("field","Category"),Array("value",'<input type="text" id="'+a+'-category" value=\n          "'+project.goal_category+'" required>')),Array({attr:""},Array("field","Description"),Array("value",'<textarea id="'+a+'-description" required>'+project.goal_description+"</textarea>")),Array({attr:""},Array("field","Metric"),Array("value",'<textarea id="'+a+'-metric" required>'+project.goal_metric+"</textarea>")),Array({attr:""},Array("field","Metric Max"),Array("value",'<input type="number" id="'+a+'-metric_max" min="0" value="'+project.goal_metric_max+'">')),Array({attr:""},Array("field","Year"),Array("value",OM.Form.year({id:a+"-year",selected:project.year})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Update"})+"</div></form>",OM.Page.format(OM.back_btn(b+"/?"+OM.array_to_string(param,"/",1)),"Edit active project","",content)):OM.Page.error(403)},OM.live_event("#admin-active-projects16-edit","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-active-projects16-edit","Edit active project")}),OM.live_event("#btn-confirm-admin-active-projects16-edit","click",function(a){a.preventDefault();var b="admin-active-projects16-edit",c=$("#"+b+"-list_id option:selected").text();OM.Modal.close("confirm-"+b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"edit-active-project16", "goal_name":"'+c+'"')),function(a){OM.Modal.close(b),OM.Database.update("projects16",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.admin_active_projects=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param;var b,c,d,e,f,g,h="admin-active-projects",i=OM.domain+"#admin/projects/active",j=OM.Url.param,k="";if(OM.session.ul<=OM.select.user_level.na_rc){if("null"==OM.projects||void 0==OM.projects||OM.projects.length<1)k='<div class="relative"><div class="absolute top right text-right margin-top-10 margin-right-10"><div class="fa fa-reply fa-rotate-90 fa-5x"></div><div>Add new project</div></div></div>';else{b=OM.projects;for(var l=0;l<b.length;l++){if(b.length>1){if(0==l)for(var m=0;m<b.length;m++)c=b[m],k+=0==m?'<ul data-tabNav="'+b.length+'">':"",k+='<li data-tabContent-id="'+c.mandal+'" class="'+(j[0]==c.mandal?"active":"")+'"><div data-href="'+i+"/?"+c.mandal+"/"+c.years[0].year+'">'+c.mandal+"</div></li>",k+=m==b.length-1?'</ul><div data-tabContentParent="1">':"";k+='<div class="'+(j[0]==b[l].mandal?"show":"hide")+'" data-tabContent="'+b[l].mandal+'">'}c=b[l],d=c.years;for(var n=0;n<d.length;n++){if(d.length>1){if(0==n)for(var m=0;m<d.length;m++)e=d[m],k+=0==m?'<ul data-tabNav="'+d.length+'">':"",k+='<li data-tabContent-id="'+c.mandal+e.year+'" class="'+(j[1]==e.year?"active":"")+'"><div data-href="'+i+"/?"+c.mandal+"/"+e.year+'">'+e.year+"</div></li>",k+=m==d.length-1?'</ul><div data-tabContentParent="2">':"";k+='<div class="'+(j[1]==d[n].year?"show":"hide")+'" data-tabContent="'+c.mandal+d[n].year+'">'}e=d[n],k+="<div data-list data-card>",f=e.projects;for(var o=0;o<f.length-1;o++)g=f[o],k+=0==o?"<ul>":"",k+="<li><div>"+g.name+'</div><div data-btn="right">'+OM.Button.edit({id:h,attr:'data-value="'+g.name+'" data-href="'+i+"/edit/?"+OM.array_to_string(j,"/",0)+"/"+g.id+'"'})+OM.Button.remove({id:h,attr:'data-value="'+g.name+'" data-id="'+g.id+'"'})+"</div></li>",k+=o==f.length-1?"</ul>":"";k+="</div>",k+=d.length>1?"</div>":"",k+=n==d.length-1?"</div>":""}k+=c.length>1?"</div>":"",k+=l==c.length-1?"</div>":""}}OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Active Projects",OM.Button.add({id:"admin-"+h,color:!1,attr:'data-href="'+i+'/add"'}),k)}else OM.Page.error(403)},OM.live_event(".btn-remove-admin-active-projects","click",function(a){a.preventDefault();var b="admin-active-projects",c=$(this).attr("data-value"),d=$(this).attr("data-id");OM.Modal.remove(b,OM.process+"index.php",{code:"admin",type:"remove-active-project",id:d,name:c},function(a){OM.Database.update("projects",a.data),OM.Page.admin_active_projects({param:OM.Url.param})})}),OM.Page.admin_active_projects16=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param;var b,c,d,e,f="admin-active-projects16",g=OM.domain+"#admin/projects/active16",h=OM.Url.param,i="";if(OM.session.ul<=OM.select.user_level.na_rc){if("null"==OM.projects16||void 0==OM.projects16||OM.projects16.length<1)i='<div class="relative"><div class="absolute top right text-right margin-top-10 margin-right-10"><div class="fa fa-reply fa-rotate-90 fa-5x"></div><div>Add new project</div></div></div>';else{b=OM.projects16;for(var j=0;j<b.length;j++){if(b.length>1){if(0==j)for(var k=0;k<b.length;k++)c=b[k],i+=0==k?'<ul data-tabNav="'+b.length+'">':"",i+='<li data-tabContent-id="'+c.mandal+'" class="'+(h[0]==c.mandal?"active":"")+'"><div data-href="'+g+"/?"+c.mandal+"/"+c.years[0].year+'">'+c.mandal+"</div></li>",i+=k==b.length-1?'</ul><div data-tabContentParent="1">':"";i+='<div class="'+(h[0]==b[j].mandal?"show":"hide")+'" data-tabContent="'+b[j].mandal+'">'}c=b[j],d=c.years;for(var l=0;l<d.length;l++){if(d.length>1){if(0==l)for(var k=0;k<d.length;k++)e=d[k],i+=0==k?'<ul data-tabNav="'+d.length+'">':"",i+='<li data-tabContent-id="'+c.mandal+e.year+'" class="'+(h[1]==e.year?"active":"")+'"><div data-href="'+g+"/?"+c.mandal+"/"+e.year+'">'+e.year+"</div></li>",i+=k==d.length-1?'</ul><div data-tabContentParent="2">':"";i+='<div class="'+(h[1]==d[l].year?"show":"hide")+'" data-tabContent="'+c.mandal+d[l].year+'">'}e=d[l],i+="<div data-list data-card>",goals=e.goals;for(var m=0;m<goals.length;m++)goal=goals[m],i+=0==m?"<ul>":"",i+="<li><div>"+goal.goal_name+'</div><div data-btn="right">'+OM.Button.edit({id:f,attr:'data-value="'+goal.goal_name+'" data-href="'+g+"/edit/?"+OM.array_to_string(h,"/",0)+"/"+goal.goal_id+'"'})+OM.Button.remove({id:f,attr:'data-value="'+goal.goal_name+'" data-id="'+goal.goal_id+'"'})+"</div></li>",i+=m==goals.length-1?"</ul>":"";i+="</div>",i+=d.length>1?"</div>":"",i+=l==d.length-1?"</div>":""}i+=c.length>1?"</div>":"",i+=j==c.length-1?"</div>":""}}OM.Page.format(OM.back_btn(OM.domain+"#admin"),"2016 Active Projects",OM.Button.add({id:"admin-"+f,color:!1,attr:'data-href="'+g+'/add"'}),i)}else OM.Page.error(403)},OM.live_event(".btn-remove-admin-active-projects16","click",function(a){a.preventDefault();var b="admin-active-projects16",c=$(this).attr("data-value"),d=$(this).attr("data-id");OM.Modal.remove(b,OM.process+"index.php",{code:"admin",type:"remove-active-project16",id:d,name:c},function(a){OM.Database.update("projects16",a.data),OM.Page.admin_active_projects16({param:OM.Url.param})})}),OM.Page.admin_assign_center=function(){var a="admin-assign-center",b=(OM.assignedCenters,OM.Url.param),c=OM.domain+"#admin",d="",e="",f="",g=b[0],h=(b[1],""),i="",j="",k="",l=null,m="";if(OM.session.ul>OM.select.user_level.rcl&&OM.session.ul%2)OM.Page.error(403);else if(OM.Database.check(OM.assignedCenters)&&OM.search_objects(OM.assignedCenters,"mandal",g).length>0){e=OM.assignedCenters;for(var n=0;n<e.length;n++){if(e.length>1){if(0==n){j="show";for(var o=0;o<e.length;o++){var k="";d+=0==o?'<ul data-tabNav="'+e.length+'">':"",k=b[0]==e[o].mandal?"active":"",d+='<li data-tabContent-id="'+e[o].mandal+'" class="'+k+'"><div data-href="'+c+"/assign-center/?"+e[o].mandal+"/"+e[o].regions[0].region+'">'+e[o].mandal+"</div></li>",d+=o==e.length-1?"</ul><div data-tabContentParent>":""}}j=b[0]==e[n].mandal?"show":"hide",d+='<div data-tabContent="'+e[n].mandal+'" class="'+j+'">'}f=e[n].regions;for(var p=0;p<f.length;p++){if(f.length>1){if(0==p){j="show";for(var o=0;o<f.length;o++){var k="";d+=0==o?'<ul data-tabNav="'+f.length+'">':"",k=b[1]==f[o].region?"active":"",d+='<li data-tabContent-id="'+e[n].mandal+f[o].region+'" class="'+k+'"><div data-href="'+c+"/assign-center/?"+e[n].mandal+"/"+f[o].region+'">'+f[o].region+"</div></li>",d+=o==f.length-1?"</ul><div data-tabContentParent>":""}}j=b[1]==f[p].region?"show":"hide",d+='<div data-tabContent="'+e[n].mandal+f[p].region+'" class="'+j+'">'}d+="<div data-card>",h=f[p].users;for(var q=0;q<h.length;q++){if(h.length>1&&(d+=0==q?'<ul data-list="list">':""),parseInt(h[q].user_level)<=OM.select.user_level.rc){if(h.length>1&&(d+='<li data-color="gray"><div data-title><u class="fa fa-user"></u>'+h[q].name+"</div></li><li>"),i=h[q].centers,i.length>0)for(var r=0;r<i.length;r++){d+=0==r?"<ul data-list>":"",l=new Array,m="",""!==i[r].bm&&(l[l.length]="BM"),""!==i[r].bst&&(l[l.length]="BST"),""!==i[r].km&&(l[l.length]="KM"),""!==i[r].kst&&(l[l.length]="KST"),""!==i[r].campus&&(l[l.length]="Campus"),""!==i[r].goshti&&(l[l.length]="Goshti"),""!==i[r].lam&&(l[l.length]="LAM");for(var s=0;s<l.length;s++)m+=l[s],m+=s<l.length-1?", ":"";d+='<li><div class="detail"><div class="title">'+i[r].center+'</div><div class="note">'+m+'</div></div><div data-btn="right">'+OM.Button.edit({id:a,attr:'data-id="'+i[r].id+'" data-index="'+n+","+p+","+q+","+r+'"'})+"</div></li>",d+=r==i.length-1?"</ul>":""}else d+="<div>No center assigned.</div>";h.length>1&&(d+="</li>")}h.length>1&&(d+=q==h.length-1?"</ul>":"")}d+="</div>",d+=f.length>1?"</div>":"",d+=p==f.length-1?"</div>":""}d+=e.length>1?"</div>":"",d+=n==e.length-1?"</div>":""}OM.Page.format(OM.back_btn(c),"Assign Center",OM.Button.add({id:"admin-"+a,color:!1,attr:'onClick="javascript:OM.Page.admin_assign_center_add();"'}),d)}else OM.Page.error(404)},OM.Page.admin_assign_center_add=function(){var a="admin-assign-center-add",b="";
if(OM.session.ul<=OM.select.user_level.rcl&&OM.session.ul%2){for(var c=0;c<OM.profiles.length;c++){b+='<optgroup label="'+OM.profiles[c].mandal+'">';for(var d=0;d<OM.profiles[c].regions.length;d++){b+='<optgroup label="'+OM.profiles[c].regions[d].region+'">';for(var e=0;e<OM.profiles[c].regions[d].users.length;e++)row=OM.profiles[c].regions[d].users[e],b+='<option value="'+row.id+'">'+row.name+"</option>";b+="</optgroup>"}b+="</optgroup>"}OM.Modal["new"](a,OM.Modal.format("Assign Center",OM.Button.close({id:a}),'<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Name"),Array("value",'<select id="'+a+'-user" required><option value="" disabled>Select Name</option>'+b+"</select>")),Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select Region",attr:'class="get-center-by-region" data-page_name="'+a+'" required'}))),Array({attr:'id="'+a+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+a+'-region-center" data-page_name="'+a+'" data-center="" class="get-sabha-by-center" required></select>')),Array({attr:' id="'+a+'-sabha_type" class="hidden"'},Array("field","Mandal"),Array("value",'<select id="'+a+'-sabha" required multiple></select>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a})+"</div></form>"))}},OM.live_event("#admin-assign-center-add","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-assign-center-add")}),OM.live_event("#btn-confirm-admin-assign-center-add","click",function(){var a="admin-assign-center-add";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"admin", "type":"add-assign-center"')),function(b){OM.Modal.close(a),OM.Database.update("assignedCenters",b.data),OM.Page.admin_assign_center({param:OM.Url.param})})}),OM.live_event(".btn-edit-admin-assign-center","click",function(){var a="admin-assign-center",b=$(this).attr("data-id"),c=$(this).attr("data-index").split(","),d="",e="",f="",g=OM.assignedCenters[c[0]].mandal2,h=OM.assignedCenters[c[0]].regions[c[1]].users[c[2]].user,b=OM.assignedCenters[c[0]].regions[c[1]].users[c[2]].centers[c[3]].id,i=OM.assignedCenters[c[0]].regions[c[1]].users[c[2]].centers[c[3]].center,j=OM.assignedCenters[c[0]].regions[c[1]].users[c[2]].centers[c[3]],k=new Array(j.bm,j.bst),l=new Array("BM","BST"),m=new Array(j.km,j.kst,j.campus),n=new Array("KM","KST","Campus");if("B"==g||"C"==g)for(var o=0;2>o;o++)d="Y"==k[o]?"checked":"",e+='<li><div class="field">'+l[o]+'</div><div class="value checkbox yes-no"><input type="checkbox" id="edit-'+a+"-"+l[o]+'" value="Y" class="mandal-'+a+'" placeholder="'+l[o]+'" '+d+'><label for="edit-'+a+"-"+l[o]+'"><div class="inner"></div><div class="btn-switch"></div></label></div></li>';if("K"==g||"C"==g){d="";for(var o=0;3>o;o++)d="Y"==m[o]?"checked":"",e+='<li><div class="field">'+n[o]+'</div><div class="value checkbox yes-no"><input type="checkbox" id="edit-'+a+"-"+n[o]+'" value="Y" class="mandal-'+a+'" placeholder="'+n[o]+'" '+d+'><label for="edit-'+a+"-"+n[o]+'"><div class="inner"></div><div class="btn-switch"></div></label></div></li>'}e&&(e='<ul id="edit-'+a+'-li" data-list="form">'+e+'</ul><div class="btn"><button data-button data-color="red" id="btn-remove-'+a+'">Remove this center</button> '+OM.Button.save({id:a,text:"Save"})+'</div><input type="hidden" id="id-'+a+'" value="'+b+'">'),f='<h3 class="text-center">'+i+"</h3>"+e,OM.Modal["new"]("edit-"+a,OM.Modal.format("Edit: "+h+" Center",OM.Button.close({id:"edit-"+a}),f))}),OM.live_event("#btn-save-admin-assign-center","click",function(){for(var a="admin-assign-center",b=$("#id-"+a).val(),c=$("#edit-"+a+"-li").find(".mandal-"+a),d="",e=0;e<c.length;e++)d+=c[e].checked?c[e].placeholder.toLowerCase()+"='Y'":c[e].placeholder.toLowerCase()+"=NULL",e<c.length-1&&(d+=",");OM.Modal.save(a,OM.process+"index.php",{code:"admin",type:"edit-assign-center",id:b,value:d,token:OM.session.t,uid:OM.session.u},function(b){OM.Modal.close("edit-"+a),OM.Database.update("assignedCenters",b.data),OM.Page.admin_assign_center({param:OM.Url.param})})}),OM.live_event("#btn-remove-admin-assign-center","click",function(){var a="admin-assign-center",b=$("#id-"+a).val();OM.Modal.remove(a,OM.process+"index.php",{code:"admin",type:"remove-assign-center",id:b,token:OM.session.t,uid:OM.session.u},function(b){OM.Modal.close("edit-"+a),OM.Database.update("assignedCenters",b.data),OM.Page.admin_assign_center({param:OM.Url.param})})}),OM.Page.admin_centers=function(){var a="admin-centers",b=(OM.regionCenter,OM.Url.param),c="",d="",e=b[1],f="",g="",h="",i="",j=null,k="",l=OM.domain+"#admin";if(OM.session.ul>OM.select.user_level.rcl&&OM.session.ul%2)OM.Page.error(403);else if(OM.Database.check(OM.regionCenter)&&OM.search_objects(OM.regionCenter,"region",e).length>0){if(c=OM.regionCenter,d=OM.search_objects(c,"region",e)[0],c.length>1){for(var m=0;m<c.length;m++)i+=0==m?'<ul data-tabNav="'+c.length+'">':"",g=e==c[m].region?"active":"",i+='<li data-tabContent-id="'+c[m].region+'" class="'+g+'"><div data-href="'+l+"/centers/?"+b[0]+"/"+c[m].region+'">'+c[m].region+"</div></li>",i+=m==c.length-1?"</ul><div data-tabContentParent>":"";h=e==d.region?"show":"hide",i+='<div class="'+h+'" data-tabContent="'+d.region+'">'}f=d.centers;for(var n=0;n<f.length;n++){j=new Array,k="",i+=0==n?"<ul data-list data-card>":"",""!==f[n].bm&&(j[j.length]="BM"),""!==f[n].bst&&(j[j.length]="BST"),""!==f[n].km&&(j[j.length]="KM"),""!==f[n].kst&&(j[j.length]="KST"),""!==f[n].campus&&(j[j.length]="Campus"),""!==f[n].goshti&&(j[j.length]="Goshti"),""!==f[n].lam&&(j[j.length]="LAM");for(var o=0;o<j.length;o++)k+=j[o],k+=o<Math.abs(j.length-1)?", ":"";i+='<li><div class="detail"><div class="title">'+f[n].name+'</div><div class="note">'+k+'</div></div><div data-btn="right">'+OM.Button.edit({id:a,attr:"onClick=\"javascript:OM.Page.admin_center_edit({id:'"+f[n].id+"'});\""})+"</div></li>",i+=n==Math.abs(f.length-1)?"</ul>":""}i+=d.length>1?"</div></div>":"",OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Centers",OM.Button.add({id:"admin-"+a,color:!1,attr:'onClick="javascript:OM.Page.admin_center_add();"'}),i)}else OM.Page.error(404)},OM.Page.admin_center_add=function(){var a="admin-centers-add",b="",c=OM.session.mandal;OM.session.ul<=OM.select.user_level.rcl&&OM.session.ul%2?(b=Array(Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select a region",attr:"required"}))),Array({attr:""},Array("field","Center"),Array("value",'<input type="text" id="'+a+'-center" value="" placeholder="center name" required>')),Array({attr:'class="'+("K"==c?"hidden":"")+'"'},Array("field","BM status"),Array("value",OM.Form.built_select_box({id:a+"-bm",data:OM.select.status_name,value:OM.select.status_value,title:"Select a BM status"}))),Array({attr:'class="'+("B"==c?"hidden":"")+'"'},Array("field","KM status"),Array("value",OM.Form.built_select_box({id:a+"-km",data:OM.select.status_name,value:OM.select.status_value,title:"Select a KM status"}))),Array({attr:'class="'+("K"==c?"hidden":"")+'"'},Array("field","BST"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+a+'-bst" value="Y" class="sabha_type-'+a+'" placeholder="BST"><label for="edit-'+a+'-bst"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="'+("B"==c?"hidden":"")+'"'},Array("field","KST"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+a+'-kst" value="Y" class="sabha_type-'+a+'" placeholder="KST"><label for="edit-'+a+'-kst"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="'+("B"==c?"hidden":"")+'"'},Array("field","Campus"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+a+'-campus" value="Y" class="sabha_type-'+a+'" placeholder="Campus"><label for="edit-'+a+'-campus"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:""},Array("field","Goshti"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+a+'-goshti" value="Y" class="sabha_type-'+a+'" placeholder="Goshti"><label for="edit-'+a+'-goshti"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:""},Array("field","LAM"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+a+'-lam" value="Y" class="sabha_type-'+a+'" placeholder="LAM"><label for="edit-'+a+'-lam"><div class="inner"></div><div class="btn-switch"></div></label></div>'))),b='<form id="'+a+'" novalidate>'+OM.Page.row(b,'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Add new center"})+"</div></form>",OM.Modal["new"](a,OM.Modal.format("Add New Center",OM.Button.close({id:a}),b))):OM.Page.error(403,"dialog")},OM.live_event("#admin-centers-add","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-centers-add","Add new center")}),OM.live_event("#btn-confirm-admin-centers-add","click",function(a){a.preventDefault();var b="admin-centers-add";OM.Modal.close("confirm-"+b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"add-centers"')),function(a){OM.Modal.close(b),OM.Database.update("regionCenter",a.data),OM.Page.admin_centers({param:OM.Url.param})})}),OM.Page.admin_center_edit=function(a){a=void 0==a?new Object:a,a.id=void 0==a.id?"":a.id;var b="admin-centers-edit",c=OM.search_objects(OM.regionCenter,"id",a.id)[0],d=OM.session.mandal,e="";OM.session.ul>OM.select.user_level.rcl&&OM.session.ul%2?OM.Page.error(403):(e=Array(Array({attr:'class="'+("K"==d?"hidden":"")+'"'},Array("field","BM status"),Array("value",OM.Form.built_select_box({id:b+"-bm",data:OM.select.status_name,value:OM.select.status_value,selected:c.bm,title:"Select a BM status"}))),Array({attr:'class="'+("B"==d?"hidden":"")+'"'},Array("field","KM status"),Array("value",OM.Form.built_select_box({id:b+"-km",data:OM.select.status_name,value:OM.select.status_value,selected:c.km,title:"Select a KM status"}))),Array({attr:'class="'+("K"==d?"hidden":"")+'"'},Array("field","BST"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+b+'-bst" value="Y" class="sabha_type-'+b+'" placeholder="BST" '+("Y"==c.bst?"checked":"")+'><label for="edit-'+b+'-bst"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="'+("B"==d?"hidden":"")+'"'},Array("field","KST"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+b+'-kst" value="Y" class="sabha_type-'+b+'" placeholder="KST" '+("Y"==c.kst?"checked":"")+'><label for="edit-'+b+'-kst"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:'class="'+("B"==d?"hidden":"")+'"'},Array("field","Campus"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+b+'-campus" value="Y" class="sabha_type-'+b+'" placeholder="Campus" '+("Y"==c.campus?"checked":"")+'><label for="edit-'+b+'-campus"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:""},Array("field","Goshti"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+b+'-goshti" value="Y" class="sabha_type-'+b+'" placeholder="Goshti" '+("Y"==c.goshti?"checked":"")+'><label for="edit-'+b+'-goshti"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:""},Array("field","LAM"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="edit-'+b+'-lam" value="Y" class="sabha_type-'+b+'" placeholder="LAM" '+("Y"==c.lam?"checked":"")+'><label for="edit-'+b+'-lam"><div class="inner"></div><div class="btn-switch"></div></label></div>')),Array({attr:""},Array("field","Remove this center"),Array("value",'<button type="button" data-button data-color="red" id="btn-remove-'+b+'">Remove this center</button><div class="note">This center will only be removed from this list. Other data (assign center, checked-in and my goals) will not remove. You have to remove them menually.</div>')),Array({attr:'class="hidden"'},Array("field","Center ID"),Array("value",'<input type="hidden" id="'+b+'-id" value="'+c.id+'" data-name="'+c.name+'">'))),e='<form id="'+b+'" novalidate>'+OM.Page.row(e,'data-list="form"')+'<div class="btn">'+OM.Button.save({id:b})+"</div></form>",OM.Modal["new"](b,OM.Modal.format("Edit: "+c.name+" Mandal",OM.Button.close({id:b}),e)))},OM.live_event("#admin-centers-edit","submit",function(a){a.preventDefault();var b="admin-centers-edit";OM.Modal.close(b),OM.Modal.save(b,OM.process+"index.php",$.parseJSON(OM.Form.field_json(b,'"code":"admin", "type":"edit-centers"')),function(a){OM.Database.update("regionCenter",a.data),OM.Page.admin_centers({param:OM.Url.param})})}),OM.live_event("#btn-remove-admin-centers-edit","click",function(a){a.preventDefault();var b="admin-centers-edit",c=$("#"+b+"-id").val(),d=$("#"+b+"-id").attr("data-name");OM.Modal.close(b),OM.Modal.remove(b,OM.process+"index.php",{code:"admin",type:"remove-centers",center:d,id:c},function(a){OM.Database.update("regionCenter",a.data),OM.Page.admin_centers({param:OM.Url.param})})}),OM.files,OM.Page.admin_import_center_analysis15=function(a){a=void 0==a?new Object:a;var b=OM.domain+"#admin",c="admin-import-center_analysis",d="";d='<form id="'+c+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Download file"),Array("value",'<a target="_blank" data-button data-color="dark-purple" href="'+OM.process+'export-center-analysis-import.php"><i class="fa fa-cloud-download"></i> Download</a> <a target="_blank" data-button data-color="dark-yellow" href="'+OM.process+'RcVicharan-Center_Analysis_Import-Sample.xls">Sample file</a>')),Array({attr:""},Array("field","Note"),Array("value",'After editing download file please "Save as" from file menu and change the format type to .xls. (You can overwrite the download file) then upload it.')),Array({attr:""},Array("field","Import file"),Array("value",'<input type="file" id="'+c+'-file" data-ext="xls" required><div class="note">Please upload the excel file only.</div>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:c,text:"Import"})+'</div></form><div id="'+c+'-body"></div>',OM.Page.format(OM.back_btn(b),"Center Analysis - Import","",d)},OM.live_event("#admin-import-center_analysis-file","change",function(a){OM.file=a.target.files}),OM.live_event("#admin-import-center_analysis","submit",function(a){a.stopPropagation(),a.preventDefault();var b="admin-import-center_analysis",c=$("#btn-save-"+b).html();if(1==OM.Form.validate(b)){$("#"+b+"-file").attr("disabled","disabled"),$("#btn-save-"+b).attr("disabled","disabled").html('<i class="fa fa-spin fa-refresh"></i> Importing...');var d=new FormData;$.each(OM.file,function(a,b){d.append(a,b)}),$.ajax({url:OM.process+"index.php?code=admin&type=upload-center-analysis-import-file",type:"POST",data:d,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a){$("#"+b+"-file").removeAttr("disabled"),$("#btn-save-"+b).removeAttr("disabled").html(c),0==$("#message-"+b).length&&$("form#"+b).before('<div id="message-'+b+'" data-card="message"></div>'),"success"==a.status?($("#message-"+b).html("File is successfuly upload. Please wait while we import the data.").attr("data-background","success"),import_center_analysis_file(a.file)):$("#message-"+b).html("There was an error uploading your files.").attr("data-background","error")},error:function(a,d){$("#"+b+"-file").removeAttr("disabled"),$("#btn-save-"+b).removeAttr("disabled").html(c),0==$("#message-"+b).length&&$("form#"+b).before('<div id="message-'+b+'" data-card="message"></div>'),$("#message-"+b).html("There was an error from server.<br>"+d).attr("data-background","error")}})}}),OM.Page.admin_import_center_analysis16=function(a){a=void 0==a?{}:a;var b=OM.domain+"#admin",c="admin-import-center_analysis16",d="";d='<form id="'+c+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Download export file"),Array("value",'<a target="_blank" data-button data-color="dark-purple" href="'+OM.process+'export-center-analysis16-import.php?by_who=rc"><i class="fa fa-cloud-download"></i> RC</a> <a target="_blank" data-button data-color="dark-purple" href="'+OM.process+'export-center-analysis16-import.php?by_who=sanchalak"><i class="fa fa-cloud-download"></i> Sanchalak</a>')),Array({attr:""},Array("field","Note"),Array("value",'After editing download file please "Save as" from file menu and change the format type to .xls. (You can overwrite the download file) then upload it.')),Array({attr:""},Array("field","Import file"),Array("value",'<input type="file" id="'+c+'-file" data-ext="xls" required><div class="note">Please upload the excel file only.</div>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:c,text:"Import"})+'</div></form><div id="'+c+'-body"></div>',OM.Page.format(OM.back_btn(b),"Center Analysis 2016 - Import","",d)},OM.live_event("#admin-import-center_analysis16-file","change",function(a){OM.file=a.target.files}),OM.live_event("#admin-import-center_analysis16","submit",function(a){a.stopPropagation(),a.preventDefault();var b="admin-import-center_analysis",c=$("#btn-save-"+b).html();if(1==OM.Form.validate(b)){$("#"+b+"-file").attr("disabled","disabled"),$("#btn-save-"+b).attr("disabled","disabled").html('<i class="fa fa-spin fa-refresh"></i> Importing...');var d=new FormData;$.each(OM.file,function(a,b){d.append(a,b)}),$.ajax({url:OM.process+"index.php?code=admin&type=center-analysis16-upload",type:"POST",data:d,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a){$("#"+b+"-file").removeAttr("disabled"),$("#btn-save-"+b).removeAttr("disabled").html(c),0==$("#message-"+b).length&&$("form#"+b).before('<div id="message-'+b+'" data-card="message"></div>'),"success"==a.status?($("#message-"+b).html("File is successfuly upload. Please wait while we import the data.").attr("data-background","success"),import_center_analysis16_file(a.file)):$("#message-"+b).html("There was an error uploading your files.").attr("data-background","error")},error:function(a,d){$("#"+b+"-file").removeAttr("disabled"),$("#btn-save-"+b).removeAttr("disabled").html(c),0==$("#message-"+b).length&&$("form#"+b).before('<div id="message-'+b+'" data-card="message"></div>'),$("#message-"+b).html("There was an error from server.<br>"+d).attr("data-background","error")}})}}),OM.Page.admin_other_option=function(){var a="admin-other-option",b="";if(OM.session.ul<=OM.select.user_level.na_rc){if("null"==OM.select.other_option||void 0==OM.select.other_option||OM.select.other_option.length<1)b+='<li class="null">No option</li>';else for(var c="",d=0;d<OM.select.other_option.length;d++)c=OM.select.other_option[d],id=OM.select.other_option_id[d],b+="<li><div>"+c+'</div><div data-btn="right">'+OM.Button.remove({id:a,attr:'data-value="'+c+'" data-id="'+id+'"'})+"</div></li>";b='<form id="form-'+a+'" style="margin:5px;" data-card><div><input type="text" style="width:100%;" id="'+a+'-new" placeholder="enter new option then press Enter"></div></form><ul data-list data-card>'+b+"</ul>",OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Other Option List",OM.Button.save({id:a,color:!1}),b)}else OM.Page.error(403)},OM.live_event("#btn-save-admin-other-option","click",function(a){a.preventDefault(),$("#form-admin-other-option").trigger("submit")}),OM.live_event("#form-admin-other-option","submit",function(a){a.preventDefault();var b="admin-other-option",c=$("#"+b+"-new").val();OM.Modal.save(b,OM.process+"index.php",{code:"admin",type:"add-other-option",name:c},function(a){OM.Modal.close("confirm-"+b),OM.Database.update("select",a.data),OM.Page.admin_other_option()})}),OM.live_event(".btn-remove-admin-other-option","click",function(a){a.preventDefault();var b="admin-other-option",c=$(this).attr("data-value"),d=$(this).attr("data-id");OM.Modal.remove(b,OM.process+"index.php",{code:"admin",type:"remove-other-option",name:c,id:d},function(a){OM.Database.update("select",a.data),OM.Page.admin_other_option()})}),OM.Page.admin_profile_add=function(){var a="admin-profile-add";OM.session.ul<=OM.select.user_level.rcl&&OM.session.ul%2?OM.Page.format(OM.back_btn(OM.domain+"#admin/profiles/?"+OM.session.mandal_full),"New Profile","",'<form id="'+a+'" novalidate data-card>'+OM.Page.row(Array(Array({attr:""},Array("field","First Name"),Array("value",'<input id="'+a+'-first_name" placeholder="First Name" value="" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Last Name"),Array("value",'<input id="'+a+'-last_name" placeholder="Last Name" value="" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Email Address"),Array("value",'<input id="'+a+'-email" placeholder="Email Address" value="" type="email" spellcheck="false" required/><div class="note">This will be the username</div>')),Array({attr:""},Array("field","Gender"),Array("value",OM.Form.built_select_box({id:a+"-gender",data:OM.select.gender_name,value:OM.select.gender_value,attr:"required",title:"Select a gender",selected:OM.session.gender}))),Array({attr:""},Array("field","Mandal"),Array("value",OM.Form.built_select_box({id:a+"-mandal",data:OM.select.mandal_name,value:OM.select.mandal_value,attr:"required",title:"select a mandal",selected:OM.session.mandal}))),Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select Region",attr:'class="get-center-by-region" data-page_name="'+a+'" required'}))),Array({attr:'id="'+a+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+a+'-region-center" required></select>')),Array({attr:""},Array("field","User Level"),Array("value",OM.Form.built_select_box({id:a+"-user_level",data:OM.select.user_level_name,value:OM.select.user_level_value,title:"Select User Level",selected:OM.select.user_level_value[6],index:OM.select.user_level_value.indexOf(""+OM.session.ul),attr:"required"})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Submit"})+"</div></form>",""):OM.Page.error(403)},OM.live_event("form#admin-profile-add","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-profile-add","New Profile")}),OM.live_event("#btn-confirm-admin-profile-add","click",function(){var a="admin-profile-add";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"admin", "type":"add-profile"')),function(a){OM.Database.update("profiles",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.admin_profile_edit=function(){{var a="admin-profile-edit",b=OM.Url.param;OM.domain+"#admin/profiles"}row="",active="",id=b[1],OM.session.ul<=OM.select.user_level.rcl&&OM.session.ul%2?(OM.Modal.loading("loading-"+a),OM.get_data(OM.process+"index.php",{code:"admin",type:"get-profile",id:id},function(c){OM.Modal.close("loading-"+a),row=c.info,active="Y"==row.active?'<button type="button" data-button data-color="dark-red" id="btn-active-'+a+'" data-value="" data-id="'+id+'">Deactivate</button>':'<button type="button" data-button data-color="dark-green" id="btn-active-'+a+'" data-value="Y" data-id="'+id+'">Activate</button>',OM.Page.format(OM.back_btn(OM.domain+"#admin/profiles/?"+b[0]),"Edit Profile","",'<form id="'+a+'" novalidate data-card>'+OM.Page.row(Array(Array({attr:""},Array("field","First Name"),Array("value",'<input id="'+a+'-first_name" placeholder="First Name" value="'+row.first_name+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Last Name"),Array("value",'<input id="'+a+'-last_name" placeholder="First Name" value="'+row.last_name+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Email Address"),Array("value",'<input id="'+a+'-email" placeholder="Email Address" value="'+row.email+'" type="email" spellcheck="false" required/><div class="note">This will be the username</div>')),Array({attr:""},Array("field","Gender"),Array("value",OM.Form.built_select_box({id:a+"-gender",data:OM.select.gender_name,value:OM.select.gender_value,attr:"required",title:"Select a gender",selected:row.gender}))),Array({attr:""},Array("field","Mandal"),Array("value",OM.Form.built_select_box({id:a+"-mandal",data:OM.select.mandal_name,value:OM.select.mandal_value,attr:"required",title:"select a mandal",selected:row.mandal}))),Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select Region",selected:row.region,attr:'class="get-center-by-region" data-page_name="'+a+'" required'}))),Array({attr:'id="'+a+'-all-center"'},Array("field","Center"),Array("value",'<select id="'+a+'-region-center" data-page_name="'+a+'" data-center="'+row.center+'" required></select>')),Array({attr:""},Array("field","User Level"),Array("value",OM.Form.built_select_box({id:a+"-user_level",data:OM.select.user_level_name,value:OM.select.user_level_value,attr:"required",title:"Select User Level",selected:row.user_level,index:OM.select.user_level_value.indexOf(""+OM.session.ul)}))),Array({attr:'class="hidden"'},Array("field","Profile ID"),Array("value",'<input type="hidden" id="'+a+'-id" value="'+id+'" />')),Array({attr:""},Array("btn",active+'&nbsp;<button type="button" data-button data-color="orange" id="btn-reset-password-'+a+'" data-id="'+id+'">Reset Password</button>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:a,color:!0,icon:!0,text:"Submit"})+"</div></form>",""),$("#"+a+"-region").trigger("change")})):OM.Page.error(403)},OM.live_event("#admin-profile-edit","submit",function(a){a.preventDefault(),OM.Form.confirm("admin-profile-edit","Edit Profile")}),OM.live_event("#btn-confirm-admin-profile-edit","click",function(){var a="admin-profile-edit";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"admin", "type":"edit-profile"')),function(a){OM.Database.update("profiles",a.data),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.live_event("#btn-reset-password-admin-profile-edit","click",function(){var a="reset-password-admin-profile-edit",b=$(this).attr("data-id");OM.footer(!0,OM.talkingToServer("Reseting password...")),OM.get_data(OM.process+"index.php",{code:"admin",type:"reset-password",id:b,token:OM.session.t,uid:OM.session.u},function(b){OM.footer(),1==b.login&&("success"==b.status?OM.Modal["new"](a,OM.Modal.format("Success reseting password",OM.Button.close({id:a}),OM.message("<h3>The new password is lastname and firstname <strong>All lowercase</strong></h3>"))):"error"==b.status&&OM.Modal["new"](a,OM.Modal.format("Error reseting passowrd",OM.Button.close({id:a}),OM.message("<h3>"+b.message+"</h3><p><u>Error message:</u> "+b.error+"</p>"))))})}),OM.live_event("#btn-active-admin-profile-edit","click",function(){var a="admin-profile-edit",b=$(this).attr("data-id"),c=$(this).attr("data-value"),d="";d="Y"==c?"Activating profile...":"Deactivating profile...",OM.footer(!0,OM.talkingToServer(d)),OM.get_data(OM.process+"index.php",{code:"admin",type:"active-profile",id:b,value:c,token:OM.session.t,uid:OM.session.u},function(b){OM.footer(),1==b.login&&("success"==b.status&&("Y"==c?$("#btn-active-"+a).attr({"data-color":"dark-red","data-value":""}).html("Deactivate"):$("#btn-active-"+a).attr({"data-color":"dark-green","data-value":"Y"}).html("Activate")),OM.Modal["new"](a,OM.Modal.format(b.title,OM.Button.close({id:a}),OM.message(b.message+b.error))))})}),OM.Page.admin_profiles=function(){var a=(OM.profiles,OM.Url.param),b=OM.domain+"#admin";if(content="",active="",show="",OM.session.ul>OM.select.user_level.rcl&&OM.session.ul%2)OM.Page.error(403);else if(OM.Database.check(OM.profiles)&&OM.profiles.length>0){for(var c=OM.profiles,d=0;d<c.length;d++){if(c.length>1||OM.session.ul<=parseInt(OM.select.user_level_value[1])){if(0==d)for(var e=0;e<c.length;e++)content+=0==e?'<ul data-tabNav="'+c.length+'">':"",active=a[0]==c[e].mandal?"active":"",content+='<li data-tabContent-id="'+c[e].mandal+'" class="'+active+'"><div data-href="'+b+"/profiles/?"+c[e].mandal+'">'+c[e].mandal+"</div></li>",content+=e==c.length-1?"</ul><div data-tabContentParent>":"";show=a[0]==c[d].mandal?"show":"hide",content+='<div class="'+show+'" data-tabContent="'+c[d].mandal+'">'}content+="<div data-card>";for(var f=c[d].regions,g=0;g<f.length;g++){(f.length>1||OM.session.ul<=parseInt(OM.select.user_level_value[2]))&&(content+=0==g?'<ul data-list="nest" data-colorName="inverse">':"",content+='<li><div data-title="region-'+g+'"><u class="fa fa-globe"></u>'+f[g].region+'<i class="fa fa-caret-up"></i></div><div data-content="region-'+g+'">');for(var h=f[g].users,i="",j=0;j<h.length;j++)content+=0==j?'<ul data-list="link">':"",i=h[j].user_level<106?"<strong>"+h[j].name+"</strong>":h[j].name,content+='<li><a href="'+b+"/profiles/edit/?"+a[0]+"/"+h[j].id+'">'+i+'</a><i class="float-right fa fa-chevron-right"></i></li>',content+=j==h.length-1?"</ul>":"";(f.length>1||OM.session.ul<=parseInt(OM.select.user_level_value[2]))&&(content+="</div></li>",content+=g==f.length-1?"</ul>":"")}content+="</div>",content+=c.length>1||OM.session.ul<=parseInt(OM.select.user_level_value[1])?"</div>":"",content+=d==c.length-1?"</div>":""}OM.Page.format(OM.back_btn(b),"Profiles",OM.Button.add({id:"admin-profiles",color:!1,attr:'data-href="'+b+'/profiles/add"'}),content)}else OM.Page.error(404)},OM.Page.admin_projects_list=function(){var a="admin-projects-list",b="";if(OM.session.ul<=OM.select.user_level.na_rc){if("null"==OM.select.projects_list||void 0==OM.select.projects_list||OM.select.projects_list.length<1)b+='<li class="null">No project found</li>';else for(var c="",d=0;d<OM.select.projects_list.length;d++)c=OM.select.projects_list[d],id=OM.select.projects_list_id[d],b+="<li><div>"+c+'</div><div data-btn="right">'+OM.Button.edit({id:a,attr:'data-value="'+c+'" data-id="'+id+'"'})+OM.Button.remove({id:a,attr:'data-value="'+c+'" data-id="'+id+'"'})+"</div></li>";b='<form id="'+a+'" style="margin:5px;" data-card><div><input type="text" style="width:100%;" id="'+a+'-new" placeholder="enter new project then press Enter"></div></form><ul data-list data-card>'+b+"</ul>",OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Project List",OM.Button.save({id:a,color:!1}),b)}else OM.Page.error(403)},OM.live_event("#btn-save-admin-projects-list","click",function(a){a.preventDefault(),$("form#admin-projects-list").trigger("submit")}),OM.live_event("form#admin-projects-list","submit",function(a){a.preventDefault();var b="admin-projects-list",c="#"+b+"-new",d=$(c).val();$(".error-"+b).remove(),d?OM.Modal.save(b,OM.process+"index.php",{code:"admin",type:"add-projects-list",name:d},function(a){OM.Modal.close("confirm-"+b),OM.Database.update("select",a.data),OM.Page.admin_projects_list()}):OM.error_message(b,c,"Please enter new project")}),OM.live_event(".btn-edit-admin-projects-list","click",function(a){a.preventDefault();var b="admin-projects-list-edit",c=OM.replace_quotes($(this).attr("data-value")),d=$(this).attr("data-id"),e="";e=Array(Array({attr:""},Array("field","Project name"),Array("value",'<input type="text" id="'+b+'-name" value="'+c+'" data-id="'+d+'" required><div class="note">This will also update the active project name in all wings.</div>'))),e='<form id="'+b+'" novalidate>'+OM.Page.row(e,'data-list="form"')+'<div class="btn">'+OM.Button.save({id:b,text:"Save"})+"</div></form>",OM.Modal["new"](b,OM.Modal.format("Edit Project",OM.Button.close({id:b}),e))}),OM.live_event("#btn-save-admin-projects-list-edit","click",function(a){a.preventDefault(),$("form#admin-projects-list-edit").trigger("submit")}),OM.live_event("form#admin-projects-list-edit","submit",function(a){a.preventDefault();var b="admin-projects-list-edit",c=$("#"+b+"-name").val(),d=$("#"+b+"-name").attr("data-id");OM.Form.validate(b)&&(OM.Modal.close(b),OM.Modal.save(b,OM.process+"index.php",{code:"admin",type:"edit-projects-list",id:d,name:c},function(a){OM.Database.update("select",a.select),OM.Database.update("projects",a.projects),OM.Page.admin_projects_list()
}))}),OM.live_event(".btn-remove-admin-projects-list","click",function(a){a.preventDefault();var b="admin-projects-list",c=$(this).attr("data-value"),d=$(this).attr("data-id");OM.Modal.remove(b,OM.process+"index.php",{code:"admin",type:"remove-projects-list",id:d,name:c},function(a){OM.Database.update("select",a.data),OM.Page.admin_projects_list()})}),OM.Page.admin=function(){var a=new Array;OM.session.ul<=OM.select.user_level.ra?(OM.session.ul!=OM.select.user_level.ra&&(a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+"#admin/profiles/?"+OM.session.mandal_full+"/"+OM.session.region+'">Profiles</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+"#admin/assign-center/?"+OM.session.mandal_full+"/"+OM.session.region+'">Assign Center</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+"#admin/centers/?"+OM.session.mandal_full+"/"+OM.session.region+'">Centers</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>'))),OM.session.ul<=OM.select.user_level.na_rc&&(a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#admin/other-option">Other Option List</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:"data-title"},Array("","Projects")),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+"#admin/projects/active16/?"+OM.session.mandal_full+'/2016">Active Projects 16</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+"#admin/projects/active/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+'">Active Projects 15</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#admin/projects/list">Projects List</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>'))),(OM.session.ul==OM.select.user_level.admin||OM.session.ul==OM.select.user_level.na_rc||OM.session.ul==OM.select.user_level.rcl||OM.session.ul==OM.select.user_level.ra)&&(a[a.length]=Array({attr:"data-title"},Array("","Import")),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#admin/import/center-analysis16">Center Analysis 2016</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#admin/import/center-analysis15">Center Analysis 2015 status</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>'))),OM.Page.format("","Admin","",OM.Page.row(a,'data-list="link" data-card'),"")):OM.Page.error(403)},OM.Page.analysis=function(a){var b="analysis",c="";OM.session.ul<=OM.select.user_level_value[2]&&(OM.Modal.loading("loading-"+b),OM.get_data(OM.process+"analysis.php",{type:a,token:OM.session.t,uid:OM.session.u},function(a){c=a,OM.Modal.close("loading-"+b),OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Analysis","",c)}))},OM.Page.admin_top_links=function(){var a="admin-top-links",b="";OM.session.ul<=OM.select.user_level_value[2]?(OM.Modal.loading("loading-"+a),OM.get_data(OM.process+"index.php",{code:"admin",type:"top-links",token:OM.session.t,uid:OM.session.u},function(c){if(OM.Modal.close("loading-"+a),"error"==c.status)b=c.message;else for(var d=0;d<c.top_links.length;d++)0==d&&(b+="<ul data-list data-card>"),b+='<li><div><a href="'+OM.domain+"#"+c.top_links[d].hash+'">'+c.top_links[d].hash+'</a></div><div data-btn="right"><button data-button data-color="purple">'+c.top_links[d].clicks+"</button></div></li>",d==c.top_links.length-1&&(b+="</ul>");OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Top Links","",b)})):OM.Page.error(403)},OM.Page.admin_charts=function(){OM.Page.format(OM.back_btn(OM.domain+"#admin"),"Charts","",'<div id="pie-chart"><div class="pie-bg"></div><div id="pie-slice-1" class="pie-hold"><div class="pie"></div></div><div id="pie-slice-2" class="pie-hold"><div class="pie"></div></div><div id="pie-slice-3" class="pie-hold"><div class="pie"></div></div></div>')},OM.Page.auto_pass=function(){var a="auto-pass";OM.Page.format("setup","Auto Password","",'<div data-card><h3>You are using auto password to login to website.</h3><br><p>Please update your password for security purpose.</p><form id="form-'+a+'">'+OM.Page.row(Array(Array({attr:""},Array("field","New Password"),Array("value",'<input type="password" id="'+a+'-new" value="">')),Array({attr:""},Array("field","Confirm New Password"),Array("value",'<input type="password" id="'+a+'-confirm" value="">'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:a,color:!0,icon:!0,text:"Submit"})+"</div></form></div>")},OM.live_event("#form-auto-pass","submit",function(){var a="auto-pass",b="#"+a+"-new",c="#"+a+"-confirm",d=$.trim($(b).val()),e=$.trim($(c).val()),f=OM.Validation.password(d),g=!1;return $(".error-"+a).remove(),d?e?f!==!0?(g=!0,OM.error_message(a,b,f)):d!==e&&(g=!0,OM.error_message(a,c,"Confirm password does not match")):(g=!0,OM.error_message(a,c,"Please enter confirm password")):(g=!0,OM.error_message(a,b,"please enter new password")),0==g&&(OM.Modal.save(a,OM.process+"index.php",{code:"settings",type:"save-password",password:php_md5(e),token:OM.session.t,uid:OM.session.u}),setTimeout(function(){var a=$("#data-save").val();"success"==a&&(OM.session.auto_pass="N",$(window).trigger("hashchange"))},2500)),!1}),OM.Page.center_analysis_challenges_detail=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;var b=OM.Url.param;if((void 0!=b[0]||""!=b[0])&&OM.Database.check(OM.centerAnalysis15)&&OM.centerAnalysis15.length>0){var c=OM.search_objects(OM.centerAnalysis15,"mandal",b[0]),d=OM.search_objects(c,"year",b[1]),e=OM.search_objects(d,"region",b[2]),f=OM.search_objects(e,"center",b[3]),g=f.length>0?f[0].challenges:new Array,h=g[b[4]],i=OM.domain+"#center-analysis15";OM.Database.check(g)?(OM.footer(!0,OM.talkingToServer("Loading details")),OM.get_data(OM.process+"index.php",{code:"center-analysis15",type:"get-challenge-details",id:h.id},function(b){OM.footer(!0,OM.doneTalkingToServer(),100),a.details=b.details,OM.Page.display_cac_detail(a)})):OM.Url.navigate(i+"/challenges/edit/?"+OM.array_to_string(b,"/",1))}else OM.Page.error(404)},OM.Page.display_cac_detail=function(a){if(a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.details=void 0==a.details?new Array:a.details,void 0==a.param[0]||""==a.param[0])OM.Page.error(404);else{var b="cac-deatil",c=OM.search_objects(OM.centerAnalysis15,"mandal",a.param[0]),d=OM.search_objects(c,"year",a.param[1]),e=OM.search_objects(d,"region",a.param[2]),f=OM.search_objects(e,"center",a.param[3]),g=f.length>0?f[0].challenges:new Array,h=g[a.param[4]],c=OM.search_objects(OM.projects,"mandal",a.param[0]),d=OM.search_objects(c,"year",a.param[1]),i=d.length>0?d[0].projects:new Array,j="",k=a.details,l=OM.domain+"#center-analysis15";if(OM.Database.check(i))if(OM.Database.check(h)){if(j+='<div data-card><table><tbody><tr><th width="30%">Challenges</th><td width="70%">'+h.challenge+"</td></tr><tr><th>What is the root cause of this challenge?</th><td>"+h.root_cause+"</td></tr><tr><th>What could have been done to prevent this in the first place?</th><td>"+h.salutation+"</td></tr></tbody></table></div>",j+='<form id="'+b+'" data-card class="center-analysis"><table><thead><tr><th width="10%">What <strong>projects</strong> can we use to alleviate each problem? & Projects <strong>Stat</strong></th><th width="23%">What <strong>people</strong> do we need to focus on?</th><th width="23%">What\'s my <strong>plan</strong> to help move this forward?<div class="note text-center">(How am I going to use this project to address the challenge?  What\'s my mentoring plan for the people I listed?  How often will I be working on this?)</div></th><th width="23%"><strong>P. Santo/Senior Karyakars</strong> - How do we need their help?</th><th width="16%">Select <strong>month(s)</strong> in which you will work on this.</th><th width="5%">Remove</th></tr></thead><tfoot><tr><th colspan="7" class="text-center"><button type="button" id="btn-add-'+b+'-row" data-button data-color="yellow"><i class="fa fa-plus"></i> Add a new project</button></th></tr></tfoot><tbody id="'+b+'-rows">',k.length)for(var m=0;m<k.length;m++)j+=OM.Page.form_cac_detail({data:k[m],param:OM.Url.param});else j+=OM.Page.form_cac_detail({param:OM.Url.param});j+="</tbody></table></form>",back_link=a.param[4]>0?"detail/?"+OM.array_to_string(a.param,"/",1)+"/"+(parseInt(a.param[4])-1):"edit/?"+OM.array_to_string(a.param,"/",1),save_continue_link=a.param[4]<g.length-1?"/challenges/detail/?"+OM.array_to_string(a.param,"/",1)+"/"+(parseInt(a.param[4])+1):"/projects/?"+OM.array_to_string(a.param,"/",1),j+='<div class="clearfix"><div class="pull-left"><button type="button" data-href="'+l+"/challenges/"+back_link+'" data-button data-color="dark-orange"><i class="fa fa-arrow-circle-left"></i> Back</button> <button type="button" class="btn-save-'+b+'" data-link="'+l+"/?"+OM.array_to_string(OM.Url.param,"/",2)+'" data-button data-color="dark-red">Save &amp; Exit</button> </div><div class="pull-right"><button type="button" class="btn-save-'+b+'" data-button data-color="green"><i class="fa fa-save"></i> Save</button> <button type="button" class="btn-save-'+b+'" data-link="'+l+save_continue_link+'" data-button data-color="orange">Save &amp; Continue <i class="fa fa-arrow-circle-right"></i></button></div></div>',OM.Page.format(OM.back_btn(l+"/challenges/edit/?"+OM.array_to_string(a.param,"/",1)),"Center Analysis - "+a.param[3]+", "+a.param[1],"",j),$("."+b+"-projects").trigger("change")}else OM.Page.error(403);else OM.Page.format(OM.back_btn(l+"/challenges/edit/?"+OM.array_to_string(a.param,"/",1)),"Center Analysis - "+a.param[3]+", "+a.param[1],"","<div data-card><h2>There are no active projects. Please add projects from admin page.</h2></div>")}},OM.live_event("#btn-add-cac-deatil-row","click",function(a){a.preventDefault(),$("#cac-deatil-rows").append(OM.Page.form_cac_detail({param:OM.Url.param}))}),OM.Page.form_cac_detail=function(a){function b(a){a=void 0==a?new Object:a,a.page_name=void 0==a.page_name?"":a.page_name,a.id=void 0==a.id?"":a.id,a.selected=void 0==a.selected?new Array:a.selected;var b=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),c="",d="";c+='<table class="border-none">';for(var e=0;e<b.length;e++)c+=e%4==0?"<tr>":"",d="Y"==a.selected[e]?"checked":"",c+='<td><input type="checkbox" id="'+a.page_name+"-"+b[e].toLowerCase()+"-"+a.id+'" value="Y" '+d+' /> <label for="'+a.page_name+"-"+b[e].toLowerCase()+"-"+a.id+'">'+b[e]+"</label></td>",c+=e%4==3?"</tr>":"";return c+="</table>"}a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.data=void 0==a.data?new Object:a.data,a.data.project_id=void 0==a.data.project_id?"":a.data.project_id,a.data.people_to_focus=void 0==a.data.people_to_focus?"":a.data.people_to_focus,a.data.plan_to_help=void 0==a.data.plan_to_help?"":a.data.plan_to_help,a.data.santo_help=void 0==a.data.santo_help?"":a.data.santo_help,a.data.months=void 0==a.data.months?new Array:a.data.months,a.data.id=void 0==a.data.id?"":a.data.id;var c="cac-deatil",d=OM.search_objects(OM.centerAnalysis15,"mandal",a.param[0]),e=OM.search_objects(d,"year",a.param[1]),f=OM.search_objects(e,"region",a.param[2]),g=OM.search_objects(f,"center",a.param[3]),h=g.length>0?g[0].challenges:new Array,i=h[a.param[4]],j="",d=OM.search_objects(OM.projects,"mandal",a.param[0]),e=OM.search_objects(d,"year",a.param[1]),k=e.length>0?e[0].projects:new Array,l=new Array,m=new Array;return OM.Database.check(k)&&(l=k[k.length-1].name,m=k[k.length-1].value,a.data.id=""==a.data.id?"id_"+parseInt(1e3*Math.random()):a.data.id,j='<tr data-id="'+a.data.id+'"><td><div>'+OM.Form.built_select_box({id:c+"-project-"+a.data.id,data:l,value:m,title:"Select a project",selected:a.data.project_id,attr:'required class="'+c+'-projects" data-id="'+a.data.id+'" data-center="'+a.param[3]+'"'})+'</div><div id="'+c+"-stat-"+a.data.id+'"></div><input type="hidden" id="'+c+"-year-"+a.data.id+'" value="'+a.param[1]+'"><input type="hidden" id="'+c+"-center_analysis_id-"+a.data.id+'" value="'+i.id+'"></td><td><div><textarea id="'+c+"-people_to_focus-"+a.data.id+'" class="block">'+a.data.people_to_focus+'</textarea></div></td><td><div><textarea id="'+c+"-plan_to_help-"+a.data.id+'" class="block">'+a.data.plan_to_help+'</textarea></div></td><td><div><textarea id="'+c+"-santo_help-"+a.data.id+'" class="block">'+a.data.santo_help+'</textarea></div></td><td class="padding-none">'+b({page_name:c,id:a.data.id,selected:a.data.months})+"</td><td><div>"+OM.Button.remove({id:c,attr:'data-id="'+a.data.id+'"'})+"</div></td></tr>"),j},OM.live_event(".cac-deatil-projects","change",function(){var a="cac-deatil",b=$(this).attr("data-id"),c=$(this).attr("data-center"),d=$(this).val(),e=OM.search_objects(OM.projects,"id",d),f="",g=OM.search_objects(OM.regionCenter,"name",OM.Url.param[3])[0],h=OM.Url.param[0].substr(0,1);e.length&&(e=e[0],e.actual="N/A",f=OM.search_objects(e.details,"center",c),f.length&&(f=f[0],e.actual=f.actual),e.goal="A"==g.bm&&"B"==h||"A"==g.km&&"K"==h?e.goal_a:"B"==g.bm&&"B"==h||"B"==g.km&&"K"==h?e.goal_b:e.goal_c,$("#"+a+"-stat-"+b).html("<strong>"+e.measure+"</strong><br>Goal: "+e.goal+"<br>Actual: "+e.actual).attr({"data-message":"success"}))}),OM.live_event(".btn-save-cac-deatil","click",function(a){a.preventDefault();for(var b=$(this).attr("data-link"),c="cac-deatil",d=$("#"+c+"-rows").children(),e=new Array,f="",g="",h="",i="",j="",k="",l="",m="",n="",o="",p="",q="",r="",s="",t="",u="",v="",w="",x="",y=!1,z=0;z<d.length;z++)f=d[z],g=f.attributes["data-id"].value,h=$("#"+c+"-center_analysis_id-"+g).val(),i=$("#"+c+"-project-"+g).val(),project_name=$("#"+c+"-project-"+g+" option:selected").text(),j=$("#"+c+"-people_to_focus-"+g).val(),k=$("#"+c+"-plan_to_help-"+g).val(),l=$("#"+c+"-santo_help-"+g).val(),m=$("#"+c+"-jan-"+g+":checked").val(),n=$("#"+c+"-feb-"+g+":checked").val(),o=$("#"+c+"-mar-"+g+":checked").val(),p=$("#"+c+"-apr-"+g+":checked").val(),q=$("#"+c+"-may-"+g+":checked").val(),r=$("#"+c+"-jun-"+g+":checked").val(),s=$("#"+c+"-jul-"+g+":checked").val(),t=$("#"+c+"-aug-"+g+":checked").val(),u=$("#"+c+"-sep-"+g+":checked").val(),v=$("#"+c+"-oct-"+g+":checked").val(),w=$("#"+c+"-nov-"+g+":checked").val(),x=$("#"+c+"-dec-"+g+":checked").val(),i||(y=!0,OM.Form.validation_effect(c+"-project-"+g,"error")),e[z]={id:g,center_analysis_id:h,project_id:i,project_name:project_name,people_to_focus:j,plan_to_help:k,santo_help:l,jan:m,feb:n,mar:o,apr:p,may:q,jun:r,jul:s,aug:t,sep:u,oct:v,nov:w,dec:x};0==y&&OM.Modal.save(c,OM.process+"index.php",{code:"center-analysis15",type:"edit-challenge-details",mandal:OM.Url.param[0],link:b,data:JSON.stringify(e)},function(a){b?OM.Url.navigate(b):OM.Page.display_cac_detail({param:OM.Url.param,details:a.data})})}),OM.live_event(".btn-remove-cac-deatil","click",function(a){a.preventDefault();var b="cac-deatil",c=$(this).attr("data-id"),d=$("#"+b+"-center_analysis_id-"+c).val();"id"==c.split("_")[0]?$('tr[data-id="'+c+'"]').remove():OM.Modal.remove(b,OM.process+"index.php",{code:"center-analysis15",type:"remove-challenge-detail",id:c,parent:d},function(a){OM.Page.display_cac_detail({param:OM.Url.param,details:a.data})})}),OM.Page.center_analysis_challenges_edit=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;var b=OM.Url.param;if((void 0!=b[0]||""!=b[0])&&OM.Database.check(OM.centerAnalysis15)&&OM.centerAnalysis15.length>0){var c="center-analysis-challenges-edit",d=OM.domain+"#center-analysis15";OM.Page.format(OM.back_btn(d+"/challenges/?"+OM.array_to_string(b,"/")),"Center Analysis - "+b[3]+", "+b[1],"",'<div id="'+c+'"></div>'),display_center_analysis_challenges_edit({id:c,center:b[3],year:b[1],mandal:b[0]})}else OM.Page.error(404)},OM.live_event(".btn-save-center-analysis-challenges-edit","click",function(a){a.preventDefault();for(var b=$(this).attr("data-link"),c="center-analysis-challenges-edit",d=$("#"+c+" tbody").find("tr"),e=new Array,f="",g="",h="",i="",j=0;j<d.length;j++)f=d[j],g=f.attributes["data-id"].value,challenge=$("#"+c+"-challenge-"+g).val(),h=$("#"+c+"-root_cause-"+g).val(),i=$("#"+c+"-salutation-"+g).val(),e[j]={id:g,challenge:challenge,root_cause:h,salutation:i};OM.Modal.save(c,OM.process+"index.php",{code:"center-analysis15",type:"edit-challenge-info",center:OM.Url.param[3],year:OM.Url.param[1],mandal:OM.Url.param[0],data:JSON.stringify(e)},function(a){var c=OM.search_objects(OM.centerAnalysis15,"mandal",OM.Url.param[0]),d=OM.search_objects(c,"year",OM.Url.param[1]),e=OM.search_objects(d,"region",OM.Url.param[2]),f=OM.search_objects(e,"center",OM.Url.param[3]),g=(f.length>0?f[0].challenges:new Array,c[0].index),h=d[0].index,i=e[0].index,j=f[0].index;OM.centerAnalysis15[g].years[h].regions[i].centers[j].challenges=a.challenges,OM.Url.navigate(b)})}),OM.Page.center_analysis_challenges=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;var b=OM.Url.param;if((void 0!=b[0]||""!=b[0])&&OM.Database.check(OM.centerAnalysis15)&&OM.centerAnalysis15.length>0){var c="center-analysis-challenges",d=OM.search_objects(OM.centerAnalysis15,"mandal",b[0]),e=OM.search_objects(d,"year",b[1]),f=OM.search_objects(e,"region",b[2]),g=OM.search_objects(f,"center",b[3]),h=g.length>0?g[0].challenges:new Array,i=OM.domain+"#center-analysis15";OM.Page.format(OM.back_btn(i+"/?"+OM.array_to_string(b,"/",1)),"Center Analysis - "+b[3]+", "+b[1],"",'<div id="'+c+'">'+OM.Page.loading()+"</div>"),display_center_analysis_challenges({id:c,center:b[3],year:b[1],mandal:b[0],challenges:h})}else OM.Page.error(404)},OM.live_event("form#center-analysis-challenges-add","submit",function(a){a.preventDefault();var b="center-analysis-challenges",c=$("#"+b+"-center").val(),d=b+"-add",e="#"+d+"-challenge",f=$(e).val();error=!1,$(".error-"+d).remove(),f?OM.Form.validation_effect(d+"-challenge","success"):(error=!0,OM.error_message(d,e,"Please enter new challenge")),0==error&&OM.Modal.save(d,OM.process+"index.php",{code:"center-analysis15",type:"add-challenge",value:f,center:c},function(a){a.login&&display_center_analysis_challenges({id:b,challenges:a.challenges})})}),OM.live_event(".btn-edit-center-analysis-challenges","click",function(a){a.preventDefault();var b="center-analysis-challenges",c=$(this).attr("data-id");$("#"+b+"-view-"+c).addClass("hidden"),$('form[data-id="'+c+'"]').removeClass("hidden")}),OM.live_event("form.center-analysis-challenges-edit","submit",function(a){a.preventDefault();var b="center-analysis-challenges",c=b+"-edit",d=$(this).attr("data-id"),e="#"+c+"-"+d,f=$(e).val();error=!1,$(".error-"+c).remove(),f?OM.Form.validation_effect(c+"-"+d,"success"):(error=!0,OM.error_message(c,e,"Please enter challenge")),error||OM.Modal.save(c,OM.process+"index.php",{code:"center-analysis15",type:"edit-challenge",id:d,value:f,mandal:OM.Url.param[0],year:OM.Url.param[1],center:OM.Url.param[3]},function(a){a.login&&display_center_analysis_challenges({id:b,challenges:a.challenges})})}),OM.live_event(".btn-remove-center-analysis-challenges","click",function(a){a.preventDefault();var b="center-analysis-challenges",c=$(this).attr("data-id"),d=$(this).attr("data-name");OM.Modal.remove(b,OM.process+"index.php",{code:"center-analysis15",type:"remove-challenge",id:c,name:d,mandal:OM.Url.param[0],year:OM.Url.param[1],center:OM.Url.param[3]},function(a){a.login&&display_center_analysis_challenges({id:b,challenges:a.challenges})})}),OM.Page.center_analysis_projects_detail=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;var b=OM.Url.param;void 0!=b[0]||""!=b[0]?(OM.footer(!0,OM.talkingToServer("Loading project details")),OM.get_data(OM.process+"index.php",{code:"center-analysis15",type:"get-projects-details",mandal:b[0],year:b[1],region:b[2],center:b[3]},function(b){OM.footer(!0,OM.doneTalkingToServer(),100),a.details=b.details,OM.Page.center_analysis_projects_detail_body(a)})):OM.Page.error(404)},OM.Page.center_analysis_projects_detail_body=function(a){if(a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.details=void 0==a.details?new Array:a.details,void 0!=a.param[0]||""!=a.param[0]){var b="center-analysis-projects-deatil",c=OM.search_objects(OM.projects,"mandal",a.param[0]),d=OM.search_objects(c,"year",a.param[1]),c=(d.length>0?d[0].projects:new Array,OM.search_objects(OM.centerAnalysis15,"mandal",a.param[0])),d=OM.search_objects(c,"year",a.param[1]),e=OM.search_objects(d,"region",a.param[2]),f=OM.search_objects(e,"center",a.param[3]),g=f.length>0?f[0].challenges:new Array,h="",i=a.details,j=OM.domain+"#center-analysis15";h+='<form id="'+b+'" data-card class="center-analysis"><table><thead><tr><td colspan="8"><div class="text-center">10 in '+a.param[1]+' Projects</div></td></tr><tr><th width="10%"><div><strong>Projects</strong></div><div><i>What\'s being measured</i></div><div>Goal/Actual</div></th><th width="10%">Addressing which mandal challenges</th><th width="20%">What <strong>people</strong> do we need to focus on?</th><th width="20%">What\'s my <strong>plan</strong> to help this move forward?<div class="note text-center">What am I going to do?  What\'s my mentoring plan for the people I listed?  How often will I be working on this?</div></th><th width="20%"><strong>P. Santo/Senior Karyakars</strong> - How do we need their help?</th><th width="20%">Select <strong>month(s)<strong> in which you will work on this.</th></tr></thead><tbody id="'+b+'-rows">';for(var k=0;k<i.length;k++)h+=OM.Page.center_analysis_projects_detail_form({index:k,data:i[k],param:OM.Url.param});h+="</tbody></table></form>",h+='<div class="clearfix"><div class="pull-left"><button type="button" data-href="'+j+"/challenges/detail/?"+OM.array_to_string(a.param,"/")+"/"+(g.length-1)+'" data-button data-color="dark-orange"><i class="fa fa-arrow-circle-left"></i> Back</button> <button type="button" class="btn-save-'+b+'" data-link="'+j+"/?"+OM.array_to_string(a.param,"/",1)+'" data-button data-color="dark-red">Save &amp; Exit</button> </div><div class="pull-right"><button type="button" class="btn-save-'+b+'" data-button data-color="green"><i class="fa fa-save"></i> Save</button> <button type="button" class="btn-save-'+b+'" data-link="'+j+"/summary/?"+OM.array_to_string(a.param,"/")+'" data-button data-color="orange">Save &amp; Continue <i class="fa fa-arrow-circle-right"></i></button></div></div>',OM.Page.format(OM.back_btn(j+"/challenges/detail/?"+OM.array_to_string(a.param,"/")+"/"+(g.length-1)),"Center Analysis - "+a.param[3]+", "+a.param[1],"",h)}else OM.Page.error(404)},OM.Page.center_analysis_projects_detail_form=function(a){function b(a){a=void 0==a?new Object:a,a.page_name=void 0==a.page_name?"":a.page_name,a.id=void 0==a.id?"":a.id,a.text=void 0==a.text?!1:a.text,a.selected=void 0==a.selected?new Array:a.selected;for(var b=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),c="",d="",e=0;e<b.length;e++)a.text?c+="Y"==a.selected[e]?(e>0&&""!=c?", ":"")+b[e]:"":(c+=e%4==0?"<tr>":"",d="Y"==a.selected[e]?"checked":"",c+='<td><input type="checkbox" id="'+a.page_name+"-"+b[e].toLowerCase()+"-"+a.id+'" value="Y" '+d+' /> <label for="'+a.page_name+"-"+b[e].toLowerCase()+"-"+a.id+'">'+b[e]+"</label></td>",c+=e%4==3?"</tr>":"");return'<table class="border-none">'+c+"</table>"}a=void 0==a?new Object:a,a.index=void 0==a.index?"":a.index,a.param=void 0==a.param?new Array:a.param,detail=void 0==a.data?new Object:a.data;var c="center-analysis-projects-deatil",d="";return detail.cs=OM.search_objects(OM.regionCenter,"name",a.param[3])[0],detail.ml=a.param[0].substr(0,1),detail.id=OM.is_empty(detail.id)?"id_"+a.index:detail.id,d='<tr data-id="'+detail.id+'"><td><input type="hidden" id="'+c+"-project_id-"+detail.id+'" value="'+detail.project_id+'" /><input type="hidden" id="'+c+"-project_name-"+detail.id+'" value="'+detail.project_name+'" /><input type="hidden" id="'+c+"-year-"+detail.id+'" value="'+detail.year+'" /><input type="hidden" id="'+c+"-mandal-"+detail.id+'" value="'+detail.mandal+'" /><input type="hidden" id="'+c+"-center-"+detail.id+'" value="'+detail.center+'" /><input type="hidden" id="'+c+"-gender-"+detail.id+'" value="'+detail.gender+'" /><div><strong>'+detail.project_name+"</strong></div><div><i>"+detail.measure+"</i></div><div><strong>Goal</strong>: "+detail.goal+"<br><strong>Actual</strong>: "+detail.actual+"</div></td><td>"+detail.addressing_challenge+'</td><td><div><textarea id="'+c+"-people_to_focus-"+detail.id+'" class="'+(OM.is_empty(detail.ca_comment)?"block":"hidden")+'">'+(OM.is_empty(detail.people_to_focus)?"":detail.people_to_focus)+"</textarea>"+(OM.is_empty(detail.ca_comment)?"":detail.people_to_focus)+'</div></td><td><div><textarea id="'+c+"-plan_to_help-"+detail.id+'" class="'+(OM.is_empty(detail.ca_comment)?"block":"hidden")+'">'+(OM.is_empty(detail.plan_to_help)?"":detail.plan_to_help)+"</textarea>"+(OM.is_empty(detail.ca_comment)?"":detail.plan_to_help)+'</div></td><td><div><textarea id="'+c+"-santo_help-"+detail.id+'" class="'+(OM.is_empty(detail.ca_comment)?"block":"hidden")+'">'+(OM.is_empty(detail.santo_help)?"":detail.santo_help)+"</textarea>"+(OM.is_empty(detail.ca_comment)?"":detail.santo_help)+'</div></td><td class="padding-none"><div class="'+(OM.is_empty(detail.ca_comment)?"hidden":"")+'">'+b({page_name:c,id:detail.id,selected:detail.months,text:!0})+'</div><div class="'+(OM.is_empty(detail.ca_comment)?"":"hidden")+'">'+b({page_name:c,id:detail.id,selected:detail.months,text:!1})+"</div></td></tr>"},OM.live_event(".btn-save-center-analysis-projects-deatil","click",function(a){a.preventDefault();for(var c=$(this).attr("data-link"),d="center-analysis-projects-deatil",e=$("#"+d+"-rows").children(),f=new Array,g="",h="",i="",j="",k="",l="",m="",n="",o="",p="",q="",r="",s="",t="",u="",v="",w="",x="",y="",z="",A="",B="",C=b=0;C<e.length;C++)g=e[C],h=g.attributes["data-id"].value,i=$("#"+d+"-year-"+h).val(),j=$("#"+d+"-mandal-"+h).val(),k=$("#"+d+"-gender-"+h).val(),l=$("#"+d+"-center-"+h).val(),m=$("#"+d+"-project_id-"+h).val(),project_name=$("#"+d+"-project_name-"+h).val(),n=$("#"+d+"-people_to_focus-"+h).val()?$("#"+d+"-people_to_focus-"+h).val():"",o=$("#"+d+"-plan_to_help-"+h).val()?$("#"+d+"-plan_to_help-"+h).val():"",p=$("#"+d+"-santo_help-"+h).val()?$("#"+d+"-santo_help-"+h).val():"",q="Y"==$("#"+d+"-jan-"+h+":checked").val()?"Y":"",r="Y"==$("#"+d+"-feb-"+h+":checked").val()?"Y":"",s="Y"==$("#"+d+"-mar-"+h+":checked").val()?"Y":"",t="Y"==$("#"+d+"-apr-"+h+":checked").val()?"Y":"",u="Y"==$("#"+d+"-may-"+h+":checked").val()?"Y":"",v="Y"==$("#"+d+"-jun-"+h+":checked").val()?"Y":"",w="Y"==$("#"+d+"-jul-"+h+":checked").val()?"Y":"",x="Y"==$("#"+d+"-aug-"+h+":checked").val()?"Y":"",y="Y"==$("#"+d+"-sep-"+h+":checked").val()?"Y":"",z="Y"==$("#"+d+"-oct-"+h+":checked").val()?"Y":"",A="Y"==$("#"+d+"-nov-"+h+":checked").val()?"Y":"",B="Y"==$("#"+d+"-dec-"+h+":checked").val()?"Y":"",void 0!=n&&(f[b]={id:h,year:i,mandal:j,gender:k,center:l,project_id:m,project_name:project_name,people_to_focus:n,plan_to_help:o,santo_help:p,jan:q,feb:r,mar:s,apr:t,may:u,jun:v,jul:w,aug:x,sep:y,oct:z,nov:A,dec:B},b++);OM.Modal.save(d,OM.process+"index.php",{code:"center-analysis15",type:"edit-projects-details",data:JSON.stringify(f)},function(a){c?OM.Url.navigate(c):OM.Page.center_analysis_projects_detail_body({param:OM.Url.param,details:a.data})})}),OM.Page.center_analysis_summary=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param,a.print=void 0==a.print?!1:!0;var b=OM.Url.param;void 0!=b[0]||""!=b[0]?(OM.footer(!0,OM.talkingToServer("Loading summary")),OM.get_data(OM.process+"index.php",{code:"center-analysis15",type:"get-summary",mandal:b[0],year:b[1],region:b[2],center:b[3]},function(b){OM.footer(!0,OM.doneTalkingToServer(),100),a.projects=b.projects,a.challenges=b.challenges,OM.Database.update("centerAnalysis15",b.centerAnalysis15),OM.Page.center_analysis_summary_body(a)})):OM.Page.error(404)},OM.Page.center_analysis_summary_body=function(a){function b(a){a=void 0==a?new Array:a;for(var b=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),c="",d=0;d<b.length;d++)"Y"==a[d]&&(c+=(d>0&&""!=c?", ":"")+b[d]);return c}if(a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.projects=void 0==a.projects?new Array:a.projects,a.challenges=void 0==a.challenges?new Array:a.challenges,OM.Page.ca_summary_print=a,void 0!=a.param[0]||""!=a.param[0]){var c="center-analysis-summary",d="",e=a.projects,f=a.challenges,g=OM.domain+"#center-analysis15",h=(OM.search_objects(OM.regionCenter,"name",a.param[3])[0],a.param[0].substr(0,1),'border="1px" cellpadding="10px" cellspacing="0" width="100%" align="center"');d+="<div data-card><h3 "+(a.print===!0?h:"")+' class="text-center padding-10">10 in '+a.param[1]+" Action Items</h3><table "+(a.print===!0?h:"")+'><thead><tr><th width="10%">Projects</th><th width="10%">What\'s being measured</th><th width="5%">Goal/Actual</th><th width="10%">Addressing which mandal challenges</th><th width="15%">What <strong>people</strong> do we need to focus on?</th><th width="15%">What\'s my <strong>plan</strong> to help this move forward?<div class="note text-center">What am I going to do?  What\'s my mentoring plan for the people I listed?  How often will I be working on this?</div></th><th width="15%"><strong>P. Santo/Senior Karyakars</strong> - How do we need their help?</th><th width="20%"><strong>Month(s)</strong> in which you will work on this.</th></tr></thead><tbody>';for(var i=0,j="";i<e.length;i++)j=e[i],d+='<tr data-id="'+j.id+'"><td>'+j.project_name+"</td><td>"+j.measure+"</td><td><div>Goal "+j.goal+"<br>Actual: "+j.actual+"</div></td><td>"+j.addressing_challenge+"</td><td>"+(OM.is_empty(j.people_to_focus)?"":j.people_to_focus)+"</td><td>"+(OM.is_empty(j.plan_to_help)?"":j.plan_to_help)+"</td><td>"+(OM.is_empty(j.santo_help)?"":j.santo_help)+'</td><td class="padding-none">'+b(j.months)+"</td></tr>";d+="</tbody></table></div>",d+="<div data-card><h3 "+(a.print===!0?h:"")+' class="text-center padding-10">Mentoring Outside of Projects</h3><table '+(a.print===!0?h:"")+'><thead><tr><th width="10%">Challenges</th><th width="25%">What <strong>people</strong> do we need to focus on?</th><th width="25%">what\'s my <strong>plan</strong> to help this move forward?<div class="note">When do I plan on doing this (during which month/using which project, etc.)</div></th><th width="25%"><strong>P. Santo</strong> - How do we need their help?</th><th width="15%">Month(s) in which you will work on this.</th></tr></thead><tbody>';for(var i=0,k="";i<f.length;i++)k=f[i],d+='<tr data-id="'+k.id+'"><td>'+k.challenge_name+"</td><td>"+(OM.is_empty(k.people_to_focus)?"":k.people_to_focus)+"</td><td>"+(OM.is_empty(k.plan_to_help)?"":k.plan_to_help)+"</td><td>"+(OM.is_empty(k.santo_help)?"":k.santo_help)+'</td><td class="padding-none">'+b(k.months)+"</td></tr>";if(d+="</tbody></table></div>",a.print===!0)OM.print(d);else{var l=OM.session.ul==OM.select.user_level.ra?"":'<button type="button" data-href="'+g+"/projects/?"+OM.array_to_string(a.param,"/")+'" data-button data-color="dark-orange"><i class="fa fa-arrow-circle-left"></i> Back</button> ';d+='<div class="clearfix print-none"><div class="pull-left">'+l+'</div><div class="pull-right"><a target="_blank" data-button data-color="dark-orange" href="'+OM.process+"export-center-analysis-summary.php?mandal="+a.param[0]+"&year="+a.param[1]+"&center="+a.param[3]+'"><i class="fa fa-cloud-download"></i> Export</a> <button type="button" id="btn-print-'+c+'" data-button data-color="white"><i class="fa fa-save"></i> Print</button> <button type="button" data-href="'+g+"/?"+OM.array_to_string(a.param,"/",1)+'" data-button data-color="dark-red">Finish</button> </div></div>',OM.Page.format(OM.back_btn(g+"/projects/?"+OM.array_to_string(a.param,"/")),"Center Analysis - "+a.param[3]+", "+a.param[1],"",d)
}}else OM.Page.error(404)},OM.live_event("#btn-print-center-analysis-summary","click",function(a){a.preventDefault(),OM.Page.ca_summary_print.print=!0,OM.Page.center_analysis_summary_body(OM.Page.ca_summary_print)}),OM.Page.center_analysis=function(a){a=void 0==a?new Object:a;var b="",c=OM.Url.param,d="",e="",f="",g="",h="",i="",j="",k="",l="",m="",n=OM.domain+"#center-analysis15";if(OM.Database.check(OM.centerAnalysis15)&&OM.centerAnalysis15.length>0){f=OM.centerAnalysis15;for(var o=0;o<f.length;o++){if(f.length>1){if(0==o)for(var p=0;p<f.length;p++)g=f[p],b+=0==p?'<ul data-tabNav="'+f.length+'">':"",b+='<li data-tabContent-id="'+g.mandal+'" class="'+(c[0]==g.mandal?"active":"")+'"><div data-href="'+n+"/?"+g.mandal+"/"+g.years[0].year+"/"+g.years[0].regions[0].region+'">'+g.mandal+"</div></li>",b+=p==f.length-1?'</ul><div data-tabContentParent="1">':"";b+='<div class="'+(c[0]==f[o].mandal?"show":"hide")+'" data-tabContent="'+f[o].mandal+'">'}g=f[o],h=g.years;for(var q=0;q<h.length;q++){if(h.length>1){if(0==q)for(var p=0;p<h.length;p++)i=h[p],b+=0==p?'<ul data-tabNav="'+h.length+'">':"",b+='<li data-tabContent-id="'+g.mandal+i.year+'" class="'+(c[1]==i.year?"active":"")+'"><div data-href="'+n+"/?"+g.mandal+"/"+i.year+"/"+i.regions[0].region+'">'+i.year+"</div></li>",b+=p==h.length-1?'</ul><div data-tabContentParent="2">':"";b+='<div data-tabContent="'+g.mandal+h[q].year+'" class="'+(c[1]==h[q].year?"show":"hide")+'">'}i=h[q],j=i.regions;for(var r=0;r<j.length;r++){if(j.length>1){if(0==r)for(var p=0;p<j.length;p++)k=j[p],b+=0==p?'<ul data-tabNav="'+j.length+'">':"",b+='<li data-tabContent-id="'+g.mandal+i.year+k.region+'" class="'+(c[2]==k.region?"active":"")+'"><div data-href="'+n+"/?"+g.mandal+"/"+i.year+"/"+k.region+'">'+k.region+"</div></li>",b+=p==j.length-1?'</ul><div data-tabContentParent="3">':"";b+='<div data-tabContent="'+g.mandal+i.year+j[r].region+'" class="'+(c[2]==j[r].region?"show":"hide")+'">'}k=j[r],b+="<div data-card>",l=k.centers;for(var s=0;s<l.length;s++)m=l[s],href=n+"/challenges/?"+g.mandal+"/"+i.year+"/"+k.region+"/"+m.center,summary=n+"/summary/?"+g.mandal+"/"+i.year+"/"+k.region+"/"+m.center,d=Math.round(parseFloat(m.percentage)),href=OM.session.ul==OM.select.user_level.ra?summary:href,d>=100?(e="green",d="Completed"):d>0&&100>d?(e="yellow",d+="%",summary=href):(e="red",d="Missing",summary=href),b+=0==s?"<ul data-list>":"",b+='<li><div data-href="'+href+'">'+m.center+'</div><div data-btn="right"><button type="button" data-button data-color="'+e+'" data-href="'+summary+'">'+d+"</button></div></li>",b+=s==l.length-1?"</ul>":"";b+="</div>",b+=j.length>1?"</div>":"",b+=r==j.length-1?"</div>":""}b+=h.length>1?"</div>":"",b+=q==h.length-1?"</div>":""}b+=g.length>1?"</div>":"",b+=o==g.length-1?"</div>":""}OM.Page.format("","Center Analysis 2015","",b)}else OM.Page.error(404)},OM.Page.center_analysis16_detail=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;OM.Url.param;if(void 0!=a.param[0]&&""!=a.param[0]){{OM.domain+"#center-analysis"}OM.footer(!0,OM.talkingToServer("Loading details")),$.ajax({type:"POST",url:OM.process+"index.php",data:{code:"center-analysis16",type:"get-details",mandal:OM.Url.param[0],year:OM.Url.param[1],region:OM.Url.param[2],center:OM.Url.param[3]},success:function(b){OM.footer(!0,OM.doneTalkingToServer(),100),a.details=b.details,OM.Page.display_ca16_detail(a)}})}else OM.Page.error(404)},OM.Page.display_ca16_detail=function(a){if(a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.details=void 0==a.details?new Array:a.details,void 0==a.param[0]||""==a.param[0])OM.Page.error(404);else{var b="ca16-detail",c=(a.param[0],a.param[1]),d=(a.param[2],a.param[3]),e=a.details,f={},g="",h=OM.domain+"#center-analysis";if(e.length){g+='<form id="'+b+'" data-card class="center-analysis"><table><thead><tr><th width="5%">Category</th><th width="14%"><strong>Goal Name</strong><br>Goal Description</th><th width="10%">Goal Metric</th><th width="10%">Terms Progress</th><th width="5%">Yearly Goal</th><th width="14%">Action Item</th><th width="14%">Who to Focus On</th><th width="14%">Pre-Summer LAM Update</th><th width="14%">Pre-Fall LAM Update</th></th></thead><tbody id="'+b+'-rows">';for(var i=0,j=[];i<e.length;i++){var k=e[i],l=OM.replace_space(k.category);-1==j.indexOf(l)?(j.push(l),f[l]=1):f[l]+=1}for(var i=0,m="";i<e.length;i++)g+=OM.Page.form_ca16_detail({i:i,data:e[i],param:a.param,lastCategory:m,categoryCount:f}),m=e[i].category;g+="</tbody></table></form>",g+='<div class="clearfix"><div class="pull-left"><button type="button" class="btn-save-'+b+'" data-link="'+h+"/?"+OM.array_to_string(a.param,"/",1)+'" data-button data-color="dark-red">Save &amp; Exit</button> </div><div class="pull-right"><button type="button" class="btn-save-'+b+'" data-button data-color="green"><i class="fa fa-save"></i> Save</button> <button type="button" class="btn-save-'+b+'" data-link="'+h+"/summary/?"+OM.array_to_string(a.param,"/")+'" data-button data-color="orange">Save &amp; Continue <i class="fa fa-arrow-circle-right"></i></button></div></div>',OM.Page.format("","Center Analysis - "+d+", "+c,"",g)}}},OM.Page.form_ca16_detail=function(a){a=void 0==a?{}:a,a.i=void 0==a.i?0:a.i,a.data=void 0==a.data?[]:a.data,a.param=void 0==a.param?[]:a.param,a.lastCategory=void 0==a.lastCategory?"":a.lastCategory,a.categoryCount=void 0==a.categoryCount?{}:a.categoryCount;var b="ca16-detail",c=(a.param[0],a.param[1],a.param[2],a.param[3],a.data),d=b+"-"+a.i,e="";return null==c.spring_term&&(c.spring_term=""),null==c.summer_term&&(c.summer_term=""),null==c.fall_term&&(c.fall_term=""),null==c.year_goal&&(c.year_goal=""),null==c.action_item&&(c.action_item=""),null==c.who_to_focus_on&&(c.who_to_focus_on=""),null==c.pre_summer_lam&&(c.pre_summer_lam=""),null==c.pre_fall_lam&&(c.pre_fall_lam=""),e='<tr data-id="'+a.i+'">',e+=c.category!=a.lastCategory?'<td rowspan="'+a.categoryCount[OM.replace_space(c.category)]+'">'+c.category+"</td>":"",e+="<td><p><strong>"+c.goal_name+"</strong></p><p>"+c.goal_desc+'</p><input type="hidden" id="'+d+'-center_analysis_id" value="'+c.center_analysis_id+'"><input type="hidden" id="'+d+'-goal_id" value="'+c.goal_id+'"><input type="hidden" id="'+d+'-goal_name" value="'+c.goal_name+'"></td><td>'+c.goal_metric+'</td><td><p>Spring (Jan-Apr): <input type="number" min="0" max="'+c.goal_metric_max+'" data-group="'+d+'" style="width:100%;" id="'+d+'-spring_term" value="'+c.spring_term+'" class="ca16-update-year-goal"></p><p>Summer (May-Aug): <input type="number" min="0" max="'+c.goal_metric_max+'" data-group="'+d+'" style="width:100%;" id="'+d+'-summer_term" value="'+c.summer_term+'" class="ca16-update-year-goal"></p><p>Fall (Sept-Dec): <input type="number" min="0" max="'+c.goal_metric_max+'" data-group="'+d+'" style="width:100%;" id="'+d+'-fall_term" value="'+c.fall_term+'" class="ca16-update-year-goal"></p></td><td><input type="hidden" disabled id="'+d+'-year_goal" value="'+c.year_goal+'"><span id="'+d+'-year_goal-valueDisplay">'+c.year_goal+'</span></td><td><textarea class="block" id="'+d+'-action_item">'+c.action_item+'</textarea></td><td><textarea class="block" id="'+d+'-who_to_focus_on">'+c.who_to_focus_on+'</textarea></td><td><textarea class="block" id="'+d+'-pre_summer_lam" disabled>'+c.pre_summer_lam+'</textarea></td><td><textarea class="block" id="'+d+'-pre_fall_lam" disabled>'+c.pre_fall_lam+"</textarea></td>",e+="</tr>"},OM.live_event(".ca16-update-year-goal","change",function(){for(var a=$(this),b=a.data("group"),c=a.parent().parent().find('input[data-group="'+b+'"]'),d=0,e=0;e<c.length;e++){var f=c[e],g=parseFloat(f.value);d+=isNaN(g)?0:g}$("#"+b+"-year_goal").val(d),$("#"+b+"-year_goal-valueDisplay").text(d)}),OM.live_event(".btn-save-ca16-detail","click",function(a){a.preventDefault();for(var b="ca16-detail",c=$(this).data("link"),d=$("#"+b+"-rows").children(),e=[],f="",g="",h="",i=0;i<d.length;i++)f=d[i],g=f.attributes["data-id"].value,h=b+"-"+g,center_analysis_id=$("#"+h+"-center_analysis_id").val(),goal_id=$("#"+h+"-goal_id").val(),goal_name=$("#"+h+"-goal_name").val(),spring_term=$("#"+h+"-spring_term").val(),summer_term=$("#"+h+"-summer_term").val(),fall_term=$("#"+h+"-fall_term").val(),year_goal=$("#"+h+"-year_goal").val(),action_item=$("#"+h+"-action_item").val(),who_to_focus_on=$("#"+h+"-who_to_focus_on").val(),pre_summer_lam=$("#"+h+"-pre_summer_lam").val(),pre_fall_lam=$("#"+h+"-pre_fall_lam").val(),e[i]={center_analysis_id:center_analysis_id,goal_id:goal_id,goal_name:goal_name,spring_term:spring_term,summer_term:summer_term,fall_term:fall_term,year_goal:year_goal,action_item:action_item,who_to_focus_on:who_to_focus_on,pre_summer_lam:pre_summer_lam,pre_fall_lam:pre_fall_lam};OM.Modal.save(b,OM.process+"index.php",{code:"center-analysis16",type:"edit-details",mandal:OM.Url.param[0],year:OM.Url.param[1],region:OM.Url.param[2],center:OM.Url.param[3],data:JSON.stringify(e)},function(a){OM.Temp.center_analysis16=a.details,c?OM.Url.navigate(c):OM.Page.display_ca16_detail({param:OM.Url.param,details:a.details})})}),OM.Page.center_analysis16_summary=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?OM.Url.param:a.param;OM.domain+"#center-analysis",OM.Url.param;void 0==OM.Temp.center_analysis16?(OM.footer(!0,OM.talkingToServer("Loading details")),$.ajax({type:"POST",url:OM.process+"index.php",data:{code:"center-analysis16",type:"get-details",mandal:OM.Url.param[0],year:OM.Url.param[1],region:OM.Url.param[2],center:OM.Url.param[3]},success:function(b){OM.footer(!0,OM.doneTalkingToServer(),100),a.details=b.details,OM.Page.display_ca16_summary(a)}})):(a.details=OM.Temp.center_analysis16,OM.Page.display_ca16_summary(a))},OM.Page.display_ca16_summary=function(a){if(a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param,a.details=void 0==a.details?new Array:a.details,OM.Temp.ca16_summary_argument=a,void 0==a.param[0]||""==a.param[0])OM.Page.error(404);else{var b="ca16-summary",c=(a.param[0],a.param[1]),d=(a.param[2],a.param[3]),e=a.details,f={},g="",h=OM.domain+"#center-analysis",i='border="1px" cellpadding="10px" cellspacing="0" width="100%" align="center" style="font-size: 12px;"';if(e.length){g+='<div id="'+b+'" data-card class="center-analysis">'+(a.print===!0?'<h2 align="center">Center Analysis Summary - '+d+", "+c+"</h2>":"")+"<table "+(a.print===!0?i:"")+'><thead><tr><th width="5%">Category</th><th width="7%">Goal Name</th><th width="10%">Goal Description</th><th width="5%">Goal Metric</th><th width="5%">Spring Term (Jan-Apr)</th><th width="5%">Summer Term (May-Aug)</th><th width="5%">Fall Term (Sept-Dec)</th><th width="5%">Yearly Goal</th><th width="13%">Action Item</th><th width="13%">Who to Focus On</th><th width="13%">Pre-Summer LAM Update</th><th width="13%">Pre-Fall LAM Update</th></th></thead><tbody id="'+b+'-rows">';for(var j=0,k=[];j<e.length;j++){var l=e[j],m=OM.replace_space(l.category);-1==k.indexOf(m)?(k.push(m),f[m]=1):f[m]+=1}for(var j=0,n="";j<e.length;j++)g+=OM.Page.row_ca16_summary({i:j,data:e[j],param:a.param,lastCategory:n,categoryCount:f}),n=e[j].category;g+="</tbody></table></div>",1==a.print?OM.print(g):(g+='<div class="clearfix"><div class="pull-left"><button type="button" class="btn-save-'+b+'" data-link="'+h+"/detail/?"+OM.array_to_string(a.param,"/")+'" data-button data-color="dark-orange"><i class="fa fa-arrow-circle-left"></i> Back</button> </div><div class="pull-right"><a target="_blank" data-button data-color="dark-orange" href="'+OM.process+"export-center-analysis16-summary.php?mandal="+a.param[0]+"&year="+a.param[1]+"&center="+a.param[3]+'"><i class="fa fa-cloud-download"></i> Export</a> <button type="button" id="btn-print-'+b+'" data-button data-color="white"><i class="fa fa-save"></i> Print</button> <button type="button" data-href="'+h+"/?"+OM.array_to_string(a.param,"/",1)+'" data-button data-color="dark-red">Finish</button> </div></div>',OM.Page.format("","Center Analysis Summary - "+d+", "+c,"",g))}else OM.Page.error(404)}},OM.Page.row_ca16_summary=function(a){a=void 0==a?{}:a,a.i=void 0==a.i?0:a.i,a.data=void 0==a.data?[]:a.data,a.param=void 0==a.param?[]:a.param,a.lastCategory=void 0==a.lastCategory?"":a.lastCategory,a.categoryCount=void 0==a.categoryCount?{}:a.categoryCount;var b="ca16-detail",c=(a.param[0],a.param[1],a.param[2],a.param[3],a.data),d=(b+"-"+a.i,"");return null==c.spring_term&&(c.spring_term=""),null==c.summer_term&&(c.summer_term=""),null==c.fall_term&&(c.fall_term=""),null==c.year_goal&&(c.year_goal=""),null==c.action_item&&(c.action_item=""),null==c.who_to_focus_on&&(c.who_to_focus_on=""),null==c.pre_summer_lam&&(c.pre_summer_lam=""),null==c.pre_fall_lam&&(c.pre_fall_lam=""),d='<tr data-id="'+a.i+'">',d+=c.category!=a.lastCategory?'<td rowspan="'+a.categoryCount[OM.replace_space(c.category)]+'">'+c.category+"</td>":"",d+="<td>"+c.goal_name+"</td><td>"+c.goal_desc+"</td><td>"+c.goal_metric+"</td><td>"+c.spring_term+"</td><td>"+c.summer_term+"</td><td>"+c.fall_term+"</td><td>"+c.year_goal+"</td><td>"+c.action_item+"</td><td>"+c.who_to_focus_on+"</td><td>"+c.pre_summer_lam+"</td><td>"+c.pre_fall_lam+"</td>",d+="</tr>"},OM.live_event("#btn-print-ca16-summary","click",function(a){a.preventDefault(),OM.Temp.ca16_summary_argument.print=!0,OM.Page.display_ca16_summary(OM.Temp.ca16_summary_argument)}),OM.Page.center_analysis16=function(a){a=void 0==a?new Object:a;var b="",c=OM.Url.param,d="",e="",f="",g="",h=OM.domain+"#center-analysis";if(g=c[2],OM.Database.check(OM.regionCenter)&&OM.search_objects(OM.regionCenter,"region",g).length>0){if(d=OM.regionCenter,e=OM.search_objects(d,"region",g)[0],d.length>1){for(var i=0;i<d.length;i++)b+=0==i?'<ul data-tabNav="'+d.length+'">':"",active=g==d[i].region?"active":"",b+='<li data-tabContent-id="'+d[i].region+'" class="'+active+'"><div data-href="'+h+"/?"+c[0]+"/"+c[1]+"/"+d[i].region+'">'+d[i].region+"</div></li>",b+=i==d.length-1?"</ul><div data-tabContentParent>":"";show=g==e.region?"show":"hide",b+='<div class="'+show+'" data-tabContent="'+e.region+'">'}f=e.centers;for(var j=0;j<f.length;j++){var k=h+"/detail/?"+c[0]+"/"+c[1]+"/"+c[2]+"/"+f[j].name;b+=0==j?"<ul data-list data-card>":"",b+='<li><div data-href="'+k+'">'+f[j].name+"</div></li>",b+=j==Math.abs(f.length-1)?"</ul>":""}b+=e.length>1?"</div></div>":"",OM.Page.format("","Center Analysis 2016","",b)}else OM.Page.error(404)},OM.Page.check_in=function(a){a=void 0==a?a=new Object:a,a.date=void 0==a.date?OM.Date.today():a.date,a.type=void 0==a.type?"":a.type,a.back_link=void 0==a.back_link?"":a.back_link,a.history=void 0==a.history?!0:!1,a.region=void 0==a.region?null:a.region,a.center=void 0==a.center?null:a.center,a.sabha=void 0==a.sabha?null:a.sabha,a.confirm=void 0==a.confirm?!1:a.confirm,a.vicharan_id=void 0==a.vicharan_id?null:a.vicharan_id;var b="check-in",c="",d="",e=0,f=a.center,g="hidden",h="hidden",i="hidden",j="";if(a.history&&OM.Database.check(OM.myCheckIn)&&OM.myCheckIn.length>0){e=OM.myCheckIn.length>5?5:OM.myCheckIn.length;for(var k=0;e>k;k++)row=OM.myCheckIn[k],0==k&&(d+="<ul data-list data-card>",d+='<li data-title><div class="text-center">Add your vicharan notes</div></li>',d+='<li data-help><div class="text-right"><span data-color="dark-teal">No notes</span>&nbsp;&nbsp;<span data-color="dark-blue">Edit notes</span></div></li>'),d+='<li><div class="detail"><div class="title"><strong>'+row.center+"</strong>("+row.sabha+") - <em>"+row.region+'</em></div><div class="note">'+row.datetime+'</div></div><div data-btn="right">'+OM.Button.edit({id:b+"-comment",color:""!=row.vicharan_note_id?"dark-blue":!0,icon:!0,attr:'data-href="'+OM.domain+"#vicharan-notes/edit/?"+row.index+'"'})+"</div></li>",d+=k==e-1?"</ul>":""}null!=a.region&&""==a.region?(f="other",j=a.center,h="",i=""):null!=a.center&&0==OM.Form.check_assign_center(a.center)?(f="other-center",g=""):(h="",f=a.center),c='<form id="'+b+'" novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Date"),Array("value",'<input type="date" id="'+b+'-date" value="'+a.date+'" required>')),Array({attr:'id="'+b+'-assign-center" class="'+h+'"'},Array("field","Center"),Array("value",OM.Form.select_assign_center({id:b+"-center",attr:'data-page_name="'+b+'" class="get-sabha-by-center" required',other_center:!0,other:!0,selected:f}))),Array({attr:' id="'+b+'-all-region" class="'+g+'"'},Array("field","Region"),Array("value",OM.Form.built_select_box({id:b+"-region",data:OM.select.region,title:"Select Region",selected:a.region,attr:'class="get-center-by-region" data-page_name="'+b+'" required'}))),Array({attr:' id="'+b+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+b+'-region-center" data-center="'+a.center+'" data-page_name="'+b+'" class="get-sabha-by-center" required></select>')),Array({attr:' id="'+b+'-other-option" class="'+i+'"'},Array("field","Other"),Array("value",OM.Form.built_select_box({id:b+"-other",data:OM.select.other_option,title:"Select Option",selected:j,attr:"required"}))),Array({attr:' id="'+b+'-sabha_type" class="hidden"'},Array("field","Sabha Type"),Array("value",'<select id="'+b+'-sabha" data-sabha="'+a.sabha+'" data-page_name="'+b+'" required></select>')),Array({attr:'class="hidden"'},Array("field","vicharan ID"),Array("value",'<input type="hidden" id="'+b+'-vicharan_id" value="'+a.vicharan_id+'" disabled>')),Array({attr:'class="hidden"'},Array("field","Check-in Type"),Array("value",'<input data-not type="hidden" id="'+b+'-type" value="'+a.type+'" disabled>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:b,color:!0,icon:'<i class="fa fa-map-marker"></i> ',text:"Check-in"})+"</div></form>","modal"==a.type?OM.Modal["new"](b,OM.Modal.format("Check-In",OM.Button.close({id:b,color:!0,icon:!0}),c)):OM.Page.format(a.back_link,"Check-In","","<div data-card>"+c+"</div>"+d),null!=a.region&&""!=a.region&&$("#"+b+"-region").trigger("change"),1==a.confirm&&$("form#"+b).trigger("submit")},OM.live_event("#check-in-center","change",function(){var a=$(this).val();"other-center"==a?($("#check-in-assign-center,#check-in-other-option").addClass("hidden"),$("#check-in-all-region").removeClass("hidden")):"other"==a?($("#check-in-all-region,#check-in-all-center").addClass("hidden"),$("#check-in-other-option").removeClass("hidden")):$("#check-in-all-region,#check-in-all-center,#check-in-other-option").addClass("hidden")}),OM.live_event("form#check-in","submit",function(){return OM.Form.confirm("check-in","Check-in"),!1}),OM.live_event("#btn-confirm-check-in","click",function(){var a="check-in",b=$("#"+a+"-type").val();OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"check-in", "type":"save"')),function(a){OM.Database.update("myCheckIn",a.myCheckIn),OM.Database.update("myVicharanEvents",a.myVicharanEvents),"modal"==b?(setTimeout(OM.Page.my_vicharan(),500),OM.Modal.close("check-in")):setTimeout(OM.Page.check_in(),500)})}),OM.Page.check_list=function(){if("M"==OM.session.gender){var a='<ul data-list="nest" data-color="primary" data-card><li><div data-title="check-list-0">Planning for Vicharan<i class="fa fa-caret-up"></i></div><div data-content="check-list-0"><ul data-list="style"><li>Setting goals for visits (and adding them to the vicharan webapp)</li><li>Planning vicharan dates (including adding vicharan dates to the vicharan webapp), who to take along (if applicable), how to get there (in some cases), where to stay (if staying the night).<ul data-list="style"><li>See if your B/K RC counterpart can visit the same weekend so that you can tag team with him.</li></ul></li><li>Checking into the vicharan webapp</li><li>(Related to vicharan but done outside of sabha_type visits) Frequently analyzing goals vs. actual visits on the site</li><li>Before heading out to vicharan, call the P. BK Sant to discuss any issues he thinks you need to address during the visit (also works vice versa when the P. BK Sant goes on vicharan to that center).  In addition, a post-vicharan call to highlight to the P. BK Sant any issues that need his attention.</li></ul></div></li><li><div data-title="check-list-1">Ongoing Basis<i class="fa fa-caret-up"></i></div><div data-content="check-list-1"><ul data-list="style"><li>Monitor the progress of 10 in 14 goals (including culture change)<ul data-list="style"><li>Reaffirm how each project helps achieve these 10 goals in some way shape or form</li></ul></li><li>5 Core Messages of 2014<ul data-list="style"><li>Values, Traditions, Policies, BK Projects, Special Foci</li><li>Need to reiterate these from time to time so that they are fresh in our karyakars minds</li></ul></li><li>Mentoring & Karyakar Development<ul data-list="style"><li>Spend time doing 1 on 1s as needed to reinforce and further mentoring goals</li><li>Identify new talent and facilitate karyakar changeovers</li></ul></li><li>Sabha<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>60% for Post Sabha Review</li></ul></li><li>Ensure post-sabha review happens and ensure quality of post sabha review</li><li>See if sabha sanchalak is helping presenters to prepare on a regular basis</li><li>Determine if pre-sabha preparation happens regularly (presentation, MC, dhoon-prarthana-kirtan)</li><li>Ensure that presentations are being assigned in advance (two weeks where possible)</li><li>Discuss upcoming kishore priority sabha / Bal Group 3 focused sabhas - speaker assignments, networking</li><li>Collect feedback on the syllabus</li><li>Examine bal/kishore reception and reaction to presentations (topics, style of presenting, etc.)</li><li>Evaluate sabha room environment (jabho-lengho, tilak chandlo, adequacy of room, equipment, timings, etc.)</li><li>Present - Goal should be for RCs to present at least 1x a month in sabhas</li><li>Bal Only: Monitor how frequently sabha recap letters are sent to parents by PCs</li></ul></li><li>Campus Sabha (Kishore RCs only, if present)<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>8 Sabhas per semester</li></ul></li><li>Attend where possible</li><li>Talk to the campus sabha sanchalak about sabha_type progress and relay messages back to the RCSL</li><li>Provide feedback on material to RCSL</li></ul></li><li>KST (Kishore RCs only)<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>80% Quiz Average</li><li>80% of KST graduates placed in Seva</li></ul></li><li>Prior to KST launch in August, ensure that karyakars are planning for and conduct a launch meeting with parents (i.e. KST Parents Meeting)</li><li>Interaction with kishores</li><li>Examine KST kishore progress (to help determine readiness for seva placement as well as a seva inclination)</li><li>Deliver high quality presentations</li><li>Provide feedback on presentations, activities, and overall day</li><li>Examine progress of education mentoring by talking with kishores and their education mentors</li><li>Examine progress of satsang mentoring</li></ul></li><li>BST (Bal RCs only)<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>P. Santo are involved in 6 of the 8 sessions</li><li>PCs send out Parents Update Letters to parents for 7 of the 8 sessions</li></ul></li><li>Prior to BST launch in August, ensure that karyakars are planning for and conduct a launch meeting with parents (i.e. BST Parents Meeting), and ensure the application process is implemented locally before selecting balaks</li><li>Attend BSTs (whether or not they fall under our vicharan centers)</li><li>Examine BST balaks progress (to assist Sanchalaks in determining seva placement after graduating bal sabha_type)</li><li>Deliver high quality presentations when doing vicharan to BSTs</li><li>Provide feedback on presentations, activities, and overall day to BST Lead</li><li>Examine progress of mentoring by BST Lead to the balaks</li><li>Inquire to progress of PCs sending parents update letters after every BST</li></ul></li><li>BAPS Policies<ul data-list="style"><li>Note whether liability forms are being signed for required events</li><li>Monitor sleepover dates and weekends are within guidelines</li></ul></li><li>Goshti<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>8 gosthis per year</li></ul></li><li>Ensure Gosthi is happening regularly</li><li>Conduct the goshti when in that center</li></ul></li><li>Spend some time having fun with the balaks/kishores/karyakars</li><li>During Samaiyo practice help with practices or planning to customize the samaiyo for the sabha_type</li><li>Discuss anything that needs to be addressed from previous months report</li><li>Speak with balaks, kishores, karyakars, admin team to understand any issues outside of project related items that the sabha_type may be facing</li><li>Gujarati Class (Bal RCs only)<ul data-list="style"><li>Speak with Gujarati Coordinator & Sanchalak to address concerns (class quality, need of teachers, facilities, etc.). Communicate these concerns to Regional PC Lead and P. BK Sant.</li><li>Follow-up with Gujarati Coordinator to submit reports to Main Sanchalak</li><li>Assist Sanchalak in working with Gujarati Coordinator to maximize Gujarati attendance and Sabha attendance (pinpointing balaks to come to one and not the other)</li></ul></li></ul></div></li><li><div data-title="check-list-1">Special Activities<i class="fa fa-caret-up"></i></div><div data-content="check-list-1"><ul data-list="style"><li>Satsang Exams<ul data-list="style"><li>10 in &#34;14 Goal<ul data-list="style"><li>100% of A centers have a Study Plan</li><li>50% of B centers have a Study Plan</li><li>25% of C centers have a Study Plan</li></ul></li><li>Ensure a satsang exam lead has been appointed</li><li>Ensure that study plans are created and implemented</li><li>Motivate karyakars to study</li><li>Ask if everyone has the materials they need to study</li><li>Follow up on pre-test</li><li>Follow-up with PCs/Sanchalak for registration during September-November visits</li></ul></li><li>Parent Sanchalak Meeting<ul data-list="style"><li>Ensure PCs are leading the planning of the event and provide feedback to Regional Lead RC RPCL.</li><li>Discuss PSM planning with PC & Sanchalak</li><li>Kishore RCs Only: Talk with the parents in remote centers as needed to go over education seminar material </li></ul></li><li>The Princeton Review Seminar (Kishore RCs Only)<ul data-list="style"><li>If on vicharan prior to the seminar, follow up to ensure that the KM local rep is in touch with the TPR local rep and that arrangements have been finalized</li></ul></li><li>Parent Awareness Seminars<ul data-list="style"><li>Follow up to ensure that PC/sanchalak is sitting with presenters to go over messages to be delivered</li></ul></li><li>Chaturmas Niyam Drive<ul data-list="style"><li>If present during drive, motivate karyakars to take Chaturmas niyams</li><li>Ask karyakars, balaks, kishores how niyams are faring when visiting during Chaturmas</li></ul></li><li>Walkathon<ul data-list="style"><li>In the month preceding Walkathon, encourage karyakars to form teams of kishores for fundraising  (Kishore RCs Only)</li><li>Be sure the Walkathon sabha is held (Bal Only)</li></ul></li><li>Sports Days/Stayovers/Outings<ul data-list="style"><li>Follow up with karyakars to ensure some type of activities are included in the calendar</li><li>Follow up on networking for these events</li><li>Ensure liability forms have been created on the website and sent out</li></ul></li><li>Childrens Diwali Celebrations (Bal RCs Only)<ul data-list="style"><li>Ensure Sanchalak is keeping track of actual expenses and within budget</li><li>Review the sabha program with the programming team to ensure messages are relayed properly</li><li>Sit with PCs and Sanchalak to understand the networking plan (pre, during and post)</li><li>Ensure liability forms have been created</li></ul></li><li>Samaiya<ul data-list="style"><li>When doing vicharan at the time the packet is released, ensure that balance with respect to involvement is there.  Discuss issues as necessary with the Satsang Admin</li><li>Follow up on status of practices</li><li>Help out as needed during the samaiyo (if present)</li><li>Ensure that regular activities continue (sabha, etc.).  Volunteer to present so that local presenters have one less thing to do during practice season</li><li>Ensure sleepover schedules match liability policies</li></ul></li><li>Prasad Vitaran (Kishore RCs Only)<ul data-list="style"><li>When visiting prior to prasad vitaran, follow up on which kishores houses will be visited</li></ul></li><li>Regional Karyakar Exchange (Kishore RCs Only)<ul data-list="style"><li>If on vicharan prior to RKE, follow up on schedule and logistics</li><li>If attending RKE,<ul data-list="style"><li>Ensure karyakars are introduced to each other</li><li>Help with communication between visiting and host sabha_types</li></ul></li></ul></li><li>Summer Shibir/KarCons<ul data-list="style"><li>Follow up on attendance</li><li>Motivate balaks/kishores/karyakars to register</li><li>Follow up with mandal leads on preparation - test them to ensure theyre preparing properly</li></ul></li><li>Basketball Tournament (Kishore Only)<ul data-list="style"><li>Ask about registration progress</li></ul></li><li>NSC<ul data-list="style"><li>If visiting a center where an NSC candidate is present, ask about his application status and motivate him to apply</li></ul></li><li>India Trip (Kishore Only)<ul data-list="style"><li>Talk to sanchalak about potential India Trip candidates</li></ul></li></ul></div></li><li><div data-title="check-list-1">On a Term Basis<i class="fa fa-caret-up"></i></div><div data-content="check-list-1"><ul data-list="style"><li>RAM/RCT Meeting<ul data-list="style"><li>Sit with sanchalaks to review progress on goals and ensure they are preparing for the meeting</li></ul></li><li>LAMs<ul data-list="style"><li>Present as necessary</li><li>Remind karyakars of the five main messages</li><li>Help sanchalak conduct a review of the past term and discuss action items for the upcoming term</li><li>Evaluate the culture change within the sabha_type and stress it during visits</li></ul></li><li>Regional event attendance<ul data-list="style"><li>Push karyakars to attend regional events (RAM, RCT meeting, etc)</li></ul></li></ul></div></li><li><div data-title="check-list-1">Inter-Wing Relations<i class="fa fa-caret-up"></i></div><div data-content="check-list-1"><ul data-list="style"><li>Meet and discuss issues with Satsang Admin and Mandir Coordinator</li></ul></div></li></ul>';OM.Page.format("","Check List","",a)}else OM.Page.error(404)},OM.Page.loader=function(){if(OM.Database.check(OM.session.sid)||(OM.login=!1),$("html").attr("data-login",OM.login),OM.Url.raw=window.location.hash.replace(/^#/,""),OM.Url._split=OM.Url.raw.split("/?"),OM.Url.page=OM.Url._split[0],OM.Url.pages=OM.Url.page.split("/"),OM.Url.param=2==OM.Url._split.length?OM.Url._split[1].split("/"):new Array,OM.Modal.close("site-loader"),"reset-password"==OM.Url.page)OM.body.html(OM.Page.reset_password(OM.Url.param[0]));else if(0==OM.login)OM.body.html(OM.Page.login());else{switch(OM.Url.raw||(window.location.href=null==OM.link_last||"null"==OM.link_last||void 0==OM.link_last||"undefined"==OM.link_last||""==OM.link_last?OM.domain+(OM.session.ul==OM.select.user_level.sanchalak?"#center-analysis/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region:"#check-in"):OM.domain+OM.link_last),OM.body.find("#page").length<1&&(OM.body.html('<header id="header"><div><span id="top-left"></span><h1 id="top-center"></h1><span id="top-right"></span></div></header><aside id="menu" class="nano icon"></aside><div id="menu-cover"></div><section id="page"></section><section id="footer"></section>'),OM.Page.menu(),$(".nano").nanoScroller()),$("menu,#menu-cover").removeClass("show"),OM.session.setup<OM.setup&&"setup"!=OM.Url.page?window.location.hash="#setup_welcome":"Y"==OM.session.auto_pass&&"setup"!=OM.Url.page&&(window.location.hash="#auto_pass"),OM.Url.page){case"logout":OM.Page.logout(),OM.page_loaded=!0;
break;case"setup_welcome":OM.Page.setup_welcome(),OM.page_loaded=!0;break;case"setup":OM.Page.setup_start(),OM.page_loaded=!0;break;case"auto_pass":OM.Page.auto_pass(),OM.page_loaded=!0;break;case"check-in":OM.Page.check_in(),OM.page_loaded=!0;break;case"my-vicharan":OM.Page.my_vicharan(),OM.page_loaded=!0;break;case"vicharan-notes":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#vicharan-notes/?"+OM.session.mandal_full+"/"+OM.session.region:(OM.Page.vicharan_notes(),OM.page_loaded=!0);break;case"vicharan-notes/read":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#vicharan-notes/?"+OM.session.mandal_full+"/"+OM.session.region:(OM.Page.vicharan_note_read(),OM.page_loaded=!0);break;case"vicharan-notes/add":OM.Page.vicharan_note_add(),OM.page_loaded=!0;break;case"vicharan-notes/edit":OM.Page.vicharan_note_edit({index:OM.Url.param,back_link:OM.link_current}),OM.page_loaded=!0;break;case"my-goals":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#my-goals/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region:(OM.Page.my_goals(),OM.page_loaded=!0);break;case"reports":OM.Page.reports(),OM.page_loaded=!0;break;case"reports/individual":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/individual/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region:(OM.Page.report_individual(),OM.page_loaded=!0);break;case"reports/checked_in-rc":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/checked_in-rc/?"+OM.session.mandal_full:(OM.Page.report_checked_in_rc(),OM.page_loaded=!0);break;case"reports/checked_in-center":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/checked_in-center/?"+OM.session.mandal_full+"/"+OM.Date.year_full():(OM.Page.report_checked_in_center(),OM.page_loaded=!0);break;case"reports/checked_in-date":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/checked_in-date/?"+OM.session.mandal_full:(OM.Page.report_checked_in_date(),OM.page_loaded=!0);break;case"reports/planned-visits-rc":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/planned-visits-rc/?"+OM.session.mandal_full:(OM.Page.report_planned_visits_rc(),OM.page_loaded=!0);break;case"reports/planned-visits-date":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#reports/planned-visits-date/?"+OM.session.mandal_full:(OM.Page.report_planned_visits_date(),OM.page_loaded=!0);break;case"center-analysis":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#center-analysis/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region),OM.Page.center_analysis16(),OM.page_loaded=!0;break;case"center-analysis/detail":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#center-analysis/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region),OM.Page.center_analysis16_detail(),OM.page_loaded=!0;break;case"center-analysis/summary":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#center-analysis/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region),OM.Page.center_analysis16_summary(),OM.page_loaded=!0;break;case"center-analysis15":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#center-analysis15/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region),OM.Page.center_analysis(),OM.page_loaded=!0;break;case"center-analysis15/challenges":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#center-analysis15/?"+OM.session.mandal_full:(OM.Page.center_analysis_challenges(),OM.page_loaded=!0);break;case"center-analysis15/challenges/edit":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#center-analysis15/?"+OM.session.mandal_full:(OM.Page.center_analysis_challenges_edit(),OM.page_loaded=!0);break;case"center-analysis15/challenges/detail":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#center-analysis15/?"+OM.session.mandal_full:(OM.Page.center_analysis_challenges_detail(),OM.page_loaded=!0);break;case"center-analysis15/projects":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#center-analysis15/?"+OM.session.mandal_full:(OM.Page.center_analysis_projects_detail(),OM.page_loaded=!0);break;case"center-analysis15/summary":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#center-analysis15/?"+OM.session.mandal_full:(OM.Page.center_analysis_summary(),OM.page_loaded=!0);break;case"check-list":OM.Page.check_list(),OM.page_loaded=!0;break;case"settings":OM.Page.settings(),OM.page_loaded=!0;break;case"settings/profile":OM.Page.settings_profile(),OM.page_loaded=!0;break;case"settings/password":OM.Page.settings_password(),OM.page_loaded=!0;break;case"settings/check-in":OM.Page.settings_check_in(),OM.page_loaded=!0;break;case"settings/gcal":OM.Page.settings_gcal(),OM.page_loaded=!0;break;case"settings/home-icon":OM.Page.settings_home_icon(),OM.page_loaded=!0;break;case"admin":OM.Page.admin(),OM.page_loaded=!0;break;case"admin/profiles":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#admin/profiles/?"+OM.session.mandal_full:(OM.Page.admin_profiles(),OM.page_loaded=!0);break;case"admin/profiles/add":OM.Page.admin_profile_add(),OM.page_loaded=!0;break;case"admin/profiles/edit":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#admin/profiles/?"+OM.session.mandal_full:(OM.Page.admin_profile_edit(),OM.page_loaded=!0);break;case"admin/assign-center":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#admin/assign-center/?"+OM.session.mandal_full:(OM.Page.admin_assign_center(),OM.page_loaded=!0);break;case"admin/centers":void 0==OM.Url.param[0]||""==OM.Url.param[0]?window.location.hash="#admin/centers/?"+OM.session.region:(OM.Page.admin_centers(),OM.page_loaded=!0);break;case"admin/other-option":OM.Page.admin_other_option(),OM.page_loaded=!0;break;case"admin/projects":window.location.hash="#admin/projects/active/?"+OM.session.mandal_full;break;case"admin/projects/active16":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#admin/projects/active16/?"+OM.session.mandal_full),OM.Page.admin_active_projects16(),OM.page_loaded=!0;break;case"admin/projects/active16/add":OM.Page.admin_active_project16_add(),OM.page_loaded=!0;break;case"admin/projects/active16/edit":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#admin/projects/active16/?"+OM.session.mandal_full),OM.Page.admin_active_project16_edit(),OM.page_loaded=!0;break;case"admin/projects/active":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#admin/projects/active/?"+OM.session.mandal_full),OM.Page.admin_active_projects(),OM.page_loaded=!0;break;case"admin/projects/active/add":OM.Page.admin_active_projects_add(),OM.page_loaded=!0;break;case"admin/projects/active/edit":(void 0==OM.Url.param[0]||""==OM.Url.param[0])&&(window.location.hash="#admin/projects/active/?"+OM.session.mandal_full),OM.Page.admin_active_projects_edit(),OM.page_loaded=!0;break;case"admin/projects/list":OM.Page.admin_projects_list(),OM.page_loaded=!0;break;case"admin/import/center-analysis15":OM.Page.admin_import_center_analysis15(),OM.page_loaded=!0;break;case"admin/import/center-analysis16":OM.Page.admin_import_center_analysis16(),OM.page_loaded=!0;break;case"analysis":OM.Page.analysis(),OM.page_loaded=!0;break;case"analysis/top-links":OM.Page.analysis_top_links(),OM.page_loaded=!0;break;case"analysis/charts":OM.Page.analysis_charts(),OM.page_loaded=!0;break;default:OM.body.html(OM.Page.error(404,""))}1==OM.page_loaded&&(OM.Url.data="",OM.Page.nav_active(),OM.link_current!="#"+OM.Url.raw&&(OM.link_last=OM.link_current,window.localStorage.setItem(OM.db_prefix+"link_last",OM.link_last)),OM.link_current="#"+OM.Url.raw,window.localStorage.setItem(OM.db_prefix+"link_current",OM.link_current),OM.get_data(OM.process+"index.php",{code:"click",hash:OM.Url.raw}))}},OM.Page.login=function(){return'<div id="access"><div id="cardHolder"><img src="src/img/cardHolder.png"></div><h1>RC Vicharan</h1><section><form id="login"><h2>Login</h2><div id="message-login"></div><div id="login-form"><div class="input"><span><i class="fa fa-user"></i></span><input type="text" id="login-email" value="" placeholder="Username" /></div><div class="input"><span><i class="fa fa-key"></i></span><input type="password" id="login-password" value="" placeholder="Password" /></div><div class="btn"><button type="submit" data-button data-color="green">Login</button></div></div><div id="login-done"><p>Please wait while we load the website.</p>'+OM.loading_circle+'</div><p class="back-link">Forgot Password?</p></form><form id="forgot-password" style="display:none;"><div id="forgot-password-form"><h2>Forgot Password</h2><div id="message-forgot-password"></div><div class="input"><span><i class="fa fa-envelope-o"></i></span><input type="email" id="forgot-password-email" value="" placeholder="Email address" /></div><div class="btn"><button type="submit" data-button data-color="green">Reset Password</button></div></div><div id="forgot-password-done"><h2>Emailed!</h2><p>Please check your email for reset password link.</p></div><p class="back-link">Login</p></form></section><div id="copyright">Copyright &copy; '+OM.Date.year_full()+" BAPS Satsang Activities. All Rights Reserved</div></div>"},OM.Page.reset_password=function(a){var b="reset-password",c="";OM.Modal.loading(b),OM.get_data(OM.process+"index.php",{code:"reset-password",id:a},function(a){c=1==a.setup?'<div id="access"><div id="cardHolder"><img src="src/img/cardHolder.png"></div><h1>RC Vicharan</h1><section><form id="'+b+'"><div id="'+b+'-form"><h2>Reset Password</h2><div id="message-'+b+'"></div><div class="input"><span><i class="fa fa-key"></i></span><input type="password" id="'+b+'-new" value="" placeholder="new password"></div><div class="input"><span><i class="fa fa-thumbs-o-up"></i></span><input type="password" id="'+b+'-confirm" value="" placeholder="Confirm password"></div><div class="btn"><div class="btn"><button type="submit" data-button data-color="green">Update</button></div></div><input type="hidden" id="'+b+'-uid" value="'+a.uid+'"></div><div id="'+b+'-done"><h2>Reset!</h2><p>Your password has been successfully reset. Please click login to return to the login page.</p></div><a href="'+OM.domain+'" class="back-link">Login</a></form></section><div id="copyright">Copyright &copy; '+OM.Date.year_full()+" BAPS Satsang Activities. All Rights Reserved</div></div>":'<div id="access"><div id="cardHolder"><img src="img/cardHolder.png"></div><h1>RC Vicharan</h1><section><h2>Invalid Link</h2><p>We apologize, but we are unable to verify the link you used to access this page. Please click Continue to return to the home page and start over.</p><div class="btn"><a class="block" data-button data-color="dark-blue" href="'+OM.domain+'#">Continue</a></div></section><div id="copyright">Copyright &copy; '+OM.Date.year_full()+" BAPS Satsang Activities. All Rights Reserved</div></div>",OM.Modal.close(b),OM.body.html(c)})},OM.live_event(".back-link","click",function(){var a=$(this).parent().attr("id");$("#"+a).slideUp(),"login"==a?$("#forgot-password").slideDown():$("#login").slideDown()}),OM.live_event("form#login","submit",function(){var a="login",b=$("#"+a+"-email").val(),c=$("#"+a+"-password").val();return OM.reset_form(a),$("#message-"+a).attr({"data-message":"","data-ribbon":""}).show(),b?c?($("#message-"+a).html('<i class="fa fa-refresh fa-spin"></i> Verifing your credentials...').attr("data-message","process"),b=b.split("@")[0],OM.get_data(OM.process+"index.php",{code:"login",type:"login",email:b,password:php_md5(c)},function(b){$("#message-"+a).html("").attr("data-message",""),b.success?($("#message-"+a).html('<i class="fa fa-thumbs-up"></i>&nbsp;You are now logged in!').attr("data-message","success"),OM.login=!0,$("#login-form").slideUp(),$("#login-done").slideDown(),OM.Database.update(b.session),OM.Database.sync("",function(){$(window).trigger("hashchange")})):$("#message-"+a).html('<i class="fa fa-thumbs-down"></i>&nbsp;Invalid login credentials').attr("data-message","error")})):($("#"+a+"-password").attr("data-border","error").focus(),$("#message-"+a).html('<i class="fa fa-thumbs-down"></i> Please enter your password').attr("data-message","error")):($("#"+a+"-email").attr("data-border","error").focus(),$("#message-"+a).html('<i class="fa fa-thumbs-down"></i> Please enter your Username').attr("data-message","error")),!1}),OM.live_event("form#forgot-password","submit",function(){var a="forgot-password",b=$("#"+a+"-email").val();return OM.reset_form(a),$("#message-"+a).attr({"data-message":"","data-ribbon":""}).show(),b?($("#message-"+a).html('<i class="fa fa-refresh fa-spin"></i> Verifing your email address...').attr("data-message","process"),OM.get_data(OM.process+"index.php",{code:"login",type:"forgot-password",email:b},function(b){$("#message-"+a).html("").attr("data-message",""),b.success?($("#"+a+"-form").slideUp(),$("#"+a+"-done").slideDown(),$("#message-"+a).hide().removeAttr("data-message","data-ribbon"),$("#"+a+"-email").val("")):$("#message-"+a).html(b.message).attr("data-message","error")})):($("#"+a+"-email").attr("data-border","error").focus(),$("#message-"+a).html('<i class="fa fa-thumbs-down"></i> Please enter your email').attr("data-message","error")),!1}),OM.live_event("form#reset-password","submit",function(){var a="reset-password",b=$("#"+a+"-uid").val(),c="#"+a+"-new",d="#"+a+"-confirm",e=$(c).val(),f=$(d).val();return OM.reset_form(a),$("#message-"+a).attr({"data-message":"","data-ribbon":""}).show(),OM.Validation.password(e)!==!0?($(c).attr("data-border","error").focus(),$("#message-"+a).html('<i class="fa fa-thumbs-down"></i> '+OM.Validation.password(e)).attr("data-message","error")):OM.Validation.confirm_match(e,f,"password")!==!0?($(d).attr("data-border","error").focus(),$("#message-"+a).html('<i class="fa fa-thumbs-down"></i> '+OM.Validation.confirm_match(e,f,"password")).attr("data-message","error")):($("#message-"+a).html('<i class="fa fa-refresh fa-spin"></i> Updating your password...').attr("data-message","process"),OM.get_data(OM.process+"index.php",{code:"login",type:"reset-password",id:b,password:php_md5(e)},function(b){$("#message-"+a).html("").attr("data-message",""),b.success?($("#"+a+"-form").slideUp(),$("#"+a+"-done").slideDown(),$("#message-"+a).html("").removeAttr("data-message","data-ribbon"),$("#"+a+"-new,#"+a+"-confirm").val("")):$("#message-"+a).html(b.message).addClass("error-message")})),!1}),OM.Page.logout=function(){OM.get_data(OM.process+"index.php",{code:"logout",token:OM.session.t,uid:OM.session.u},function(a){0==a.login&&(OM.Database.empty(),window.location.href=OM.domain)})},OM.Page.menu=function(a){a=void 0==a?!1:!0;var b=OM.session.ul,c=OM.select.user_level,d=new Array,e="";b!=c.sanchalak&&b!=c.ra&&(d[d.length]='<a id="pg-check-in" href="'+OM.domain+'#check-in"><i class="fa fa-map-marker"></i><span class="text">Check-in</span></a>',d[d.length]='<a id="pg-my-vicharan" href="'+OM.domain+'#my-vicharan"><i class="fa fa-calendar"></i><span class="text">My Vicharan</span></a>',d[d.length]='<a id="pg-vicharan-notes" href="'+OM.domain+"#vicharan-notes/?"+OM.session.mandal_full+"/"+OM.session.region+'"><i class="fa fa-comments-o"></i><span class="text">Vicharan Notes</span></a>',d[d.length]='<a id="pg-my-goals" href="'+OM.domain+"#my-goals/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'"><i class="fa fa-flag"></i><span class="text">Year Goals</span></a>'),b!=c.sanchalak&&(d[d.length]='<a id="pg-reports" href="'+OM.domain+'#reports"><i class="fa fa-file"></i><span class="text">My Vicharan Snapshot</span></a>'),d[d.length]='<a id="pg-center-analysis15" href="'+OM.domain+"#center-analysis15/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'"><i class="fa fa-bar-chart-o"></i><span class="text">Center Analysis 15</span></a>',d[d.length]='<a id="pg-center-analysis" href="'+OM.domain+"#center-analysis/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'"><i class="fa fa-bar-chart-o"></i><span class="text">Center Analysis 16</span></a>',"M"==OM.session.gender&&b!=c.sanchalak&&(d[d.length]='<a id="pg-check-list" href="'+OM.domain+'#check-list"><i class="fa fa-check-square-o"></i><span class="text">Check List</span></a>',d[d.length]='<a href="http://prasa.ng/" target="_blank"><i class="fa fa-chain"></i><span class="text">Prasangs</span></a>'),"F"==OM.session.gender&&b!=c.sanchalak&&(d[d.length]='<a href="https://balikakishori.typeform.com/to/AwjZHA" target="_blank"><i class="fa fa-chain"></i><span class="text">Prasangs</span></a>'),b<=c.ra&&(d[d.length]='<a id="pg-admin" href="'+OM.domain+'#admin"><i class="fa fa-user"></i><span class="text">Admin</span></a>'),(1==OM.ios||1==OM.android)&&(d[d.length]='<a id="pg-settings-home-icon" href="'+OM.domain+'#settings/home-icon"><i class="fa fa-th-large"></i><span class="text">Add to Home Screen</span></a>'),b!=c.sanchalak&&(d[d.length]='<a id="pg-settings" href="'+OM.domain+'#settings"><i class="fa fa-cogs"></i><span class="text">Settings</span></a>'),d[d.length]='<a id="pg-logout" href="'+OM.domain+'#logout"><i class="fa fa-lock"></i><span class="text">Logout</span></a>',$("#na").addClass(OM.nav);for(var f=0;f<d.length;f++)e+=d[f];$("#menu").html('<div class="nano-content"><header id="nav-header" classs="pointer"><i>'+OM.session.acronym+'</i><span class="text">'+OM.session.fn+" "+OM.session.ln+"</span></header><nav>"+e+"<p>Copyright &copy; "+OM.Date.year_full()+" BAPS Satsang Activities<br>All Rights Reserved</p></nav></div>"),a?OM.Page.nav_active():null},OM.Page.nav_active=function(){0==$('aside a[id="pg-'+OM.Url.pages[0]+'"].active').length&&($("aside a").removeClass("active"),$('aside a[id="pg-'+OM.Url.pages[0]+'"]').addClass("active"))},OM.Page.my_goal_add=function(){var a="my-goals",b="";OM.Date.month()<10&&(b='class="hidden"'),OM.Modal["new"](a,OM.Modal.format("Add my goal",OM.Button.close({id:a,color:!0,icon:!0}),'<form id="'+a+'" novalidate>'+OM.Page.row(Array(Array({attr:'id="'+a+'-assign-center"'},Array("field","Center"),Array("value",OM.Form.select_assign_center({id:a+"-center",attr:"required"}))),Array({attr:""},Array("field","Goal"),Array("value",'<input type="number" id="'+a+'-goal" value="" min="1" max="99" required>')),Array({attr:b},Array("field","Year"),Array("value",OM.Form.year({id:a+"-year",selected:OM.Date.year_full(),attr:"required"})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,color:!0,icon:!0})+"</div></form>"))},OM.live_event("form#my-goals","submit",function(){return OM.Form.confirm("my-goals","New Goal"),!1}),OM.live_event("#btn-confirm-my-goals","click",function(){var a="my-goals";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"my-goals", "type":"save"')),function(b){OM.Database.update("myGoals",b.data),OM.Page.my_goals(),OM.Modal.close(a)})}),OM.live_event(".btn-edit-my-goals","click",function(){var a="my-goal-edit";id=$(this).attr("data-id"),center=$(this).attr("data-center"),goal=$(this).html(),OM.Modal["new"](a,OM.Modal.format("Edit: My Goal",OM.Button.close({id:a,color:!0,icon:!0}),'<form id="'+a+'">'+OM.Page.row(Array(Array({attr:""},Array("field","Center"),Array("value",center+'<input type="hidden" id="'+a+'-center" value="'+center+'" data-show="confirm">')),Array({attr:""},Array("field","Goal"),Array("value",'<input type="number" id="'+a+'-goal" value="'+goal+'" min="0" max="99"><div class="note">Enter "0" to remove this center from your goal list.</div>')),Array({attr:'class="hidden"'},Array("field","ID"),Array("value",'<input type="hidden" id="'+a+'-id" value="'+id+'">'+id))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,color:!0,icon:!0,text:"Submit"})+"</div></form>"))}),OM.live_event("form#my-goal-edit","submit",function(){return OM.Form.confirm("my-goal-edit","Edit Goal"),!1}),OM.live_event("#btn-confirm-my-goal-edit","click",function(){{var a="my-goal-edit";$("#"+a+"-goal").val(),$("#"+a+"-id").val()}OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"my-goals", "type":"save-edit"')),function(b){OM.Database.update("myGoals",b.data),OM.Page.my_goals(),OM.Modal.close(a)})}),OM.Page.my_goals=function(){var a,b,c,d,e,f,g,h="my-goals",i=OM.myGoals,j=OM.Url.param,k=OM.domain+"#my-goals",l=0,m=0,n=0,o=0;if(OM.Database.check(i))if(0==i.length)a='<div style="text-align:right; position:relative;"><i class="fa fa-level-up" style="font-size:10em; margin-right:5px;"></i><div style="position:absolute; bottom:30px; right:90px; font-size:2em; width:170px; line-height:1em;">Click here to add your goals</div></div>';else{b=i,a="";for(var p=0;p<b.length;p++){if(b.length>1){if(0==p)for(var q=0;q<b.length;q++)a+=0==q?'<ul data-tabNav="'+b.length+'">':"",a+='<li data-tabContent-id="'+b[q].mandal+'" class="'+(j[0]==b[q].mandal?"active":"")+'"><div data-href="'+k+"/?"+b[q].mandal+"/"+b[q].years[0].year+"/"+b[q].years[0].regions[0].region+'">'+b[q].mandal+"</div></li>",a+=q==b.length-1?'</ul><div data-tabContentParent="1">':"";a+='<div data-tabContent="'+b[p].mandal+'" class="'+(j[0]==b[p].mandal?"show":"hide")+'">'}c=b[p].years;for(var r=0;r<c.length;r++){if(c.length>1){if(0==r)for(var q=0;q<c.length;q++)a+=0==q?'<ul data-tabNav="'+c.length+'">':"",a+='<li data-tabContent-id="'+b[p].mandal+c[q].year+'" class="'+(j[1]==c[q].year?"active":"")+'"><div data-href="'+k+"/?"+b[p].mandal+"/"+c[q].year+"/"+c[q].regions[0].region+'">'+c[q].year+"</div></li>",a+=q==c.length-1?'</ul><div data-tabContentParent="2">':"";a+='<div data-tabContent="'+b[p].mandal+c[r].year+'" class="'+(j[1]==c[r].year?"show":"hide")+'">'}d=c[r].regions;for(var s=0;s<d.length;s++){if(d.length>1){if(0==s)for(var q=0;q<d.length;q++)a+=0==q?'<ul data-tabNav="'+d.length+'">':"",a+='<li data-tabContent-id="'+b[p].mandal+c[r].year+d[q].region+'" class="'+(j[2]==d[q].region?"active":"")+'"><div data-href="'+k+"/?"+b[p].mandal+"/"+c[r].year+"/"+d[q].region+'">'+d[q].region+"</div></li>",a+=q==d.length-1?'</ul><div data-tabContentParent="3">':"";a+='<div data-tabContent="'+b[p].mandal+c[r].year+d[s].region+'" class="'+(j[2]==d[s].region?"show":"hide")+'">'}a+="<div data-card>",e=d[s].users,g="",l=0,m=0,n=0;for(var t=0;t<e.length;t++){g+=0==t?'<ul data-list="list">':"",g+='<li data-color="gray"><div><u class="fa fa-user"></u> '+e[t].name+"</div></li><li>",f=e[t].centers,o=0;for(var u=0;u<f.length;u++)l+=parseInt(f[u].visited),m+=parseInt(f[u].goal),o=parseInt(f[u].visited)&&parseInt(f[u].goal)?parseInt(f[u].visited)/parseInt(f[u].goal)*100:0,o=Math.round(10*o)/10,o=parseFloat(o.toFixed(2)),g+=0==u?'<ul data-list="list">':"",g+="<li><div>"+f[u].center+'</div><div class="progress-bar"><div class="bar" style="width:'+o+'%;"></div><div class="percent">'+o+"% ("+f[u].visited+')</div></div><div data-btn="right">'+OM.Button.edit({id:h,icon:"",text:f[u].goal,attr:'data-id="'+f[u].id+'" data-center="'+f[u].center+'"'})+"</div></li>",g+=u==f.length-1?"</ul>":"";g+="</li>",g+=t==e.length-1?"</ul>":""}n=l?l/m*100:0,n=Math.round(10*n)/10,n=parseFloat(n.toFixed(2)),a+='<div class="progress-bar no-style"><div class="bar" style="width:'+n+'%;"></div><div class="percent">'+n+"%</div></div>",a+=g,a+="</div>",a+=d.length>1?"</div>":"",a+=s==d.length-1?"</div>":""}a+=c.length>1?"</div>":"",a+=r==c.length-1?"</div>":""}a+=b.length>1?"</div>":"",a+=p==b.length-1?"</div>":""}}else OM.Database.checkSync(OM.Page.my_goals());OM.Page.format("","My Goals",OM.Button.add({id:h,color:"",icon:!0,attr:'onClick="javascript:OM.Page.my_goal_add();"'}),a,"")},OM.Page.my_vicharan=function(a){a=void 0==a||""==a?null:a;var b="my-vicharan";OM.Page.format("","My Vicharan",OM.Button.add({id:b,color:!1,icon:'<i class="fa fa-map-marker"></i>',attr:'onClick="javascript:OM.Page.check_in({type: \'modal\'});" data-date=""'})+OM.Button.add({id:b,color:!1,icon:!0,attr:'onClick="javascript:OM.Page.plan_my_vicharan();" data-date=""'}),'<div id="'+b+'-body"></div>'),$(document).flatCalendar({events:OM.myVicharanEvents,id:b+"-body",no_event:"my-text",selected_date:a,buttonText:{prev:'<i class="fa fa-chevron-left"></i>',next:'<i class="fa fa-chevron-right"></i>',"delete":OM.Button.remove({id:b,color:!0,icon:!0})}})},OM.Page.plan_my_vicharan=function(a){a=void 0==a?a=new Object:a,a.date=void 0==a.date?OM.Date.today():a.date,a.type=void 0==a.type?"modal":a.type,a.back_link=void 0==a.back_link?"":a.back_link,a.center=void 0==a.center?"":a.center,a.region=void 0==a.region?"":a.region,a.sabha=void 0==a.sabha?"":a.sabha;var b="my-vicharan";OM.Modal["new"](b,OM.Modal.format("Plan Vicharan",OM.Button.close({id:b,color:!0,icon:!0}),'<form id="'+b+'" novalidate data-card>'+OM.Page.row(Array(Array({attr:""},Array("field","Date"),Array("value",'<input type="date" id="'+b+'-date" value="'+a.date+'" required>')),Array({attr:'id="'+b+'-assign-center"'},Array("field","Center"),Array("value",OM.Form.select_assign_center({id:b+"-center",attr:"required",other:!0,other_center:!0}))),Array({attr:' id="'+b+'-all-region" class="hidden"'},Array("field","Region"),Array("value",OM.Form.built_select_box({id:b+"-region",data:OM.select.region,title:"Select Region",selected:a.region,attr:'class="get-center-by-region" data-page_name="'+b+'" required'}))),Array({attr:' id="'+b+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+b+'-region-center" required></select>')),Array({attr:' id="'+b+'-other-option" class="hidden"'},Array("field","Other"),Array("value",OM.Form.built_select_box({id:b+"-other",data:OM.select.other_option,title:"Select Option",attr:"required"}))),Array({attr:' id="'+b+'-sabha_type" class="hidden"'},Array("field","Sabha Type"),Array("value",'<select id="'+b+'-sabha" required></select>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:b,color:!0,text:"Submit",icon:!0})+"</div></form>"))};var form_submit=!1;OM.live_event("#my-vicharan-center","change",function(){var a=$(this).val();"other-center"==a?($("#my-vicharan-assign-center,#my-vicharan-other-option").slideUp(),$("#my-vicharan-all-region").slideDown()):"other"==a?($("#my-vicharan-all-region,#my-vicharan-all-center").slideUp(),$("#my-vicharan-other-option").slideDown()):$("#my-vicharan-all-region,#my-vicharan-all-center,#my-vicharan-other-option").slideUp()}),OM.live_event("#my-vicharan-center, #my-vicharan-region-center","change",function(){var a="my-vicharan",b=$(this).attr("id"),c=$(this).val();"other"==c||"other-center"==c?$("#"+a+"-sabha").html("").parent().parent().slideUp():(OM.Form.validation_effect(a+"-sabha","error"),$("#"+a+"-sabha").html(OM.Form.change_sabha_type(a,b)).parent().parent().slideDown())}),OM.live_event("#btn-save-my-vicharan","click",function(){$("#form-my-vicharan").trigger("submit")}),OM.live_event("form#my-vicharan","submit",function(){return OM.Form.confirm("my-vicharan","My Vicharan"),!1}),OM.live_event("#btn-confirm-my-vicharan","click",function(){var a="my-vicharan",b=$("#"+a+"-date").val();OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"my-vicharan", "type":"save"')),function(a){OM.Database.update("myCheckIn",a.myCheckIn),OM.Database.update("myVicharanEvents",a.myVicharanEvents),OM.Modal.close("my-vicharan"),OM.Page.my_vicharan(b)})}),OM.live_event(".btn-remove-my-vicharan","click",function(){var a=$(this).parents("li"),b=a.attr("id"),c=a.attr("data-date"),d=a.attr("data-borderleft"),e=a.attr("data-note_type"),f="";"check_in"==d?f="check-in":"vicharan"==d&&(f="my-vicharan"),"edit"==e&&"check_in"==d?OM.Modal.confirm("remove-my-vicharan","Remove Check-in",'<div data-list="form"><h3>Are you sure you want to remove this Check-in?</h3><p>This check-in is linked to Vicharan Note which will be removed if you delete this check-in.</p><input type="hidden" id="remove-my-vicharan-date" value="'+c+'"><input type="hidden" id="remove-my-vicharan-code" value="'+f+'"><input type="hidden" id="remove-my-vicharan-id" value="'+b+'"></div>'):OM.Page.my_vicharan_remove(c,f,b)}),OM.live_event("#btn-confirm-remove-my-vicharan","click",function(){var a="remove-my-vicharan",b=$("#"+a+"-date").val(),c=$("#"+a+"-code").val(),d=$("#"+a+"-id").val();OM.Modal.close("confirm-"+a),OM.Page.my_vicharan_remove(b,c,d)}),OM.Page.my_vicharan_remove=function(a,b,c){void 0!=c&&""!=c&&OM.Modal.remove("my-vicharan",OM.process+"index.php",{code:b,type:"remove",id:c},function(b){OM.Database.update("myCheckIn",b.myCheckIn),OM.Database.update("myVicharanEvents",b.myVicharanEvents),OM.Page.my_vicharan(a)})},OM.Page.report_center_analysis=function(){{var a=OM.centerAnalysis;OM.Url.param,OM.domain+"#reports"}content="",mandals,regions,users,centers,OM.Database.check(a)?OM.checkedInUsers.length>0:OM.Database.checkSync(OM.Page.vicharan_notes(parameters))},OM.Page.report_checked_in_center=function(a){a=void 0==a?new Object:a,a.param=void 0==a.param?new Array:a.param;var b="",c=OM.Url.param,d=OM.domain+"#reports";if(null==OM.checkedInCenters||void 0==OM.checkedInCenters)OM.Page.error(404);else if(OM.checkedInCenters.length>0)for(var e=OM.checkedInCenters,f=0;f<e.length;f++){if(e.length>1){if(0==f)for(var g=0;g<e.length;g++)b+=0==g?'<ul data-tabNav="'+e.length+'">':"",b+='<li data-tabContent-id="'+e[g].mandal+'" class="'+(c[0]==e[g].mandal?"active":"")+'"><div data-href="'+d+"/checked_in-center/?"+e[g].mandal+"/"+e[g].years[0].year+'">'+e[g].mandal+"</div></li>",b+=g==e.length-1?"</ul><div data-tabContentParent>":"";b+='<div class="'+(c[0]==e[f].mandal?"show":"hide")+'" data-tabContent="'+e[f].mandal+'">'}for(var h=e[f].years,i=0;i<h.length;i++){if(h.length>1){if(0==i)for(var g=0;g<h.length;g++)b+=0==g?'<ul data-tabNav="'+h.length+'">':"",b+='<li data-tabContent-id="'+e[f].mandal+h[g].year+'" class="'+(c[1]==h[g].year?"active":"")+'"><div data-href="'+d+"/checked_in-center/?"+e[f].mandal+"/"+h[g].year+"/"+h[g].regions[0].region+'">'+h[g].year+"</div></li>",b+=g==h.length-1?"</ul><div data-tabContentParent>":"";b+='<div class="'+(c[1]==h[i].year?"show":"hide")+'" data-tabContent="'+e[f].mandal+h[i].year+'">'}for(var j=h[i].regions,k=0;k<j.length;k++){if(j.length>1){if(0==k)for(var g=0;g<j.length;g++)b+=0==g?'<ul data-tabNav="'+j.length+'">':"",b+='<li data-tabContent-id="'+e[f].mandal+h[i].year+j[g].region+'" class="'+(c[2]==j[g].region?"active":"")+'"><div data-href="'+d+"/checked_in-center/?"+e[f].mandal+"/"+h[i].year+"/"+j[g].region+'">'+j[g].region+"</div></li>",b+=g==j.length-1?"</ul><div data-tabContentParent>":"";b+='<div class="'+(c[2]==j[k].region?"show":"hide")+'" data-tabContent="'+e[f].mandal+h[i].year+j[k].region+'">'}b+="<div data-card>";for(var l=j[k].centers,m=0;m<l.length;m++){b+=0==m?'<ul data-list="list">':"",b+='<li data-color="gray"><div data-title><u class="fa fa-user"></u>'+l[m].center+"</div></li><li>";for(var n=l[m].users,o=0;o<n.length;o++)b+=0==o?'<ul data-list="li-icon">':"",b+='<li><div class="detail"><div class="title">'+n[o].name+'</div><div class="note">'+n[o].datetime+'</div></div><div data-text="right">'+n[o].sabha_type+"</div></li>",b+=o==n.length-1?"</ul>":"";b+="</li>",b+=m==l.length-1?"</ul>":""}b+="</div>",b+=j.length>1?"</div>":"",b+=k==j.length-1?"</div>":""}b+=h.length>1?"</div>":"",b+=i==h.length-1?"</div>":""}b+=e.length>1?"</div>":"",b+=f==e.length-1?"</div>":""}OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Checked-in by Center",'<a target="_blank" data-button href="'+OM.process+'export-report-checkedInHistory.php"><i class="fa fa-cloud-download"></i></a>',b,"")},OM.Page.report_checked_in_date=function(){var a=OM.checkedInDates,b=OM.Url.param,c=OM.domain+"#reports",d=c+"/checked_in-date",e="",f=a,g="",h="",i="",j="",k="",l="",m="";if(null==OM.checkedInDates||void 0==OM.checkedInDates)OM.Page.error(404);else if(OM.checkedInDates.length>0){f=a,e="";for(var n=0;n<f.length;n++){if(g=f[n],f.length>1){if(0==n)for(var o=0;o<f.length;o++)e+=0==o?'<ul data-tabNav="'+f.length+'">':"",e+='<li data-tabContent-id="'+f[o].mandal+'" class="'+(b[0]==f[o].mandal?"active":"")+'"><div data-href="'+d+"/?"+f[o].mandal+"/"+f[o].years[0].year+'">'+f[o].mandal+"</div></li>",e+=o==f.length-1?'</ul><div data-tabContentParent="1">':"";
e+='<div data-tabContent="'+g.mandal+'" class="'+(b[0]==g.mandal?"show":"hide")+'">'}h=g.years;for(var p=0;p<h.length;p++){if(i=h[p],h.length>1){if(0==p)for(var o=0;o<h.length;o++)e+=0==o?'<ul data-tabNav="'+h.length+'">':"",e+='<li data-tabContent-id="'+f[n].mandal+h[o].year+'" class="'+(b[1]==h[o].year?"active":"")+'"><div data-href="'+d+"/?"+f[n].mandal+"/"+h[o].year+'">'+h[o].year+"</div></li>",e+=o==h.length-1?'</ul><div data-tabContentParent="2">':"";e+='<div data-tabContent="'+f[n].mandal+i.year+'" class="'+(b[1]==i.year?"show":"hide")+'">'}e+="<div data-card>",j=i.dates;for(var q=0;q<j.length;q++){k=j[q],e+=0==q?'<ul data-list="list">':"",e+='<li data-color="gray"><div data-title><u class="fa fa-clock-o"></u>'+k.date+"</div></li><li>",l=k.users;for(var r=0;r<l.length;r++)m=l[r],e+=0==r?"<ul data-list>":"",e+='<li><div class="detail"><div class="title">'+m.name+'</div><div class="note"><strong>'+m.center+"</strong> "+(""!=m.region?" - <em>"+m.region+"</em>":"")+'</div></div><div data-text="right">'+m.sabha_type+"</div></li>",e+=r==l.length-1?"</ul>":"";e+="</li>",e+=q==j.length-1?"</ul>":""}e+="</div>",e+=h.length>1?"</div>":"",e+=p==h.length-1?"</div>":""}e+=f.length>1?"</div>":"",e+=n==f.length-1?"</div>":""}}else e='<div id="error-page"><h1>There is nothing planed.</h1><p>You are looking this because RC have not planed any vicharan for upcoming dates.</p></div>';OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Checked-in by Date",'<a target="_blank" data-button href="'+OM.process+'export-report-checkedInHistory.php"><i class="fa fa-cloud-download"></i></a>',e,"")},OM.Page.report_checked_in_rc=function(){var a=OM.checkedInUsers,b=OM.Url.param,c=OM.domain+"#reports",d=c+"/checked_in-rc";if(content="",mandals=a,mandal="",regions="",region="",users="",user="",centers="",center="",OM.Database.check(a))if(OM.checkedInUsers.length>0){mandals=a,content="";for(var e=0;e<mandals.length;e++){if(mandal=mandals[e],mandals.length>1){if(0==e)for(var f=0;f<mandals.length;f++)content+=0==f?'<ul data-tabNav="'+mandals.length+'">':"",content+='<li data-tabContent-id="'+mandals[f].mandal+'" class="'+(b[0]==mandals[f].mandal?"active":"")+'"><div data-href="'+d+"/?"+mandals[f].mandal+"/"+mandals[f].regions[0].region+'">'+mandals[f].mandal+"</div></li>",content+=f==mandals.length-1?'</ul><div data-tabContentParent="1">':"";content+='<div data-tabContent="'+mandal.mandal+'" class="'+(b[0]==mandal.mandal?"show":"hide")+'">'}regions=mandals[e].regions;for(var g=0;g<regions.length;g++){if(region=regions[g],regions.length>1){if(0==g)for(var f=0;f<regions.length;f++)content+=0==f?'<ul data-tabNav="'+regions.length+'">':"",content+='<li data-tabContent-id="'+mandal.mandal+regions[f].region+'" class="'+(b[1]==regions[f].region?"active":"")+'"><div data-href="'+d+"/?"+mandal.mandal+"/"+regions[f].region+'">'+regions[f].region+"</div></li>",content+=f==regions.length-1?'</ul><div data-tabContentParent="2">':"";content+='<div data-tabContent="'+mandal.mandal+region.region+'" class="'+(b[1]==region.region?"show":"hide")+'">'}content+="<div data-card>",users=regions[g].users;for(var h=0;h<users.length;h++){user=users[h],users.length>1&&(content+=0==h?'<ul data-list="list">':"",content+='<li data-color="gray"><div data-title><u class="fa fa-user"></u>'+user.user+"</div></li><li>"),centers=users[h].centers;for(var i=0;i<centers.length;i++)center=centers[i],content+=0==i?"<ul data-list>":"",content+='<li><div class="detail"><div class="title"><strong>'+center.center+"</strong> "+(""!=center.region?" - <em>"+center.region+"</em>":"")+'</div><div class="note">'+center.datetime+'</div></div><div data-text="right">'+center.sabha_type+"</div></li>",content+=i==centers.length-1?"</ul>":"";content+=users.length>1?"</li>":"",content+=h==users.length-1?"</ul>":""}content+="</div>",content+=regions.length>1?"</div>":"",content+=h==regions.length-1?"</div>":""}content+=mandals.length>1?"</div>":"",content+=e==mandals.length-1?"</div>":""}}else content="&nbsp;";else OM.Database.checkSync(OM.Page.vicharan_notes(parameters));OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Checked-in by RC",'<a target="_blank" data-button href="'+OM.process+'export-report-checkedInHistory.php"><i class="fa fa-cloud-download"></i></a>',content,"")},OM.Page.report_individual=function(){var a,b=OM.myGoals,c=OM.Url.param,d=OM.domain+"#reports",e=d+"/individual",f="",g=b,h="",i="",j="",k="",l="",m="",n="",o="",p="";if(OM.Database.check(b))if(0==b.length)f='<div style="text-align:right; position:relative;"><i class="fa fa-level-up" style="font-size:10em; margin-right:5px;"></i><div style="position:absolute; bottom:30px; right:90px; font-size:2em; width:170px; line-height:1em;">Click here to add your goals</div></div>';else{g=b,f="";for(var q=0;q<g.length;q++){if(h=g[q],g.length>1){if(0==q)for(var r=0;r<g.length;r++)f+=0==r?'<ul data-tabNav="'+g.length+'">':"",f+='<li data-tabContent-id="'+g[r].mandal+'" class="'+(c[0]==g[r].mandal?"active":"")+'"><div data-href="'+e+"/?"+g[r].mandal+"/"+g[r].years[0].year+"/"+g[r].years[0].regions[0].region+'">'+g[r].mandal+"</div></li>",f+=r==g.length-1?'</ul><div data-tabContentParent="1">':"";f+='<div data-tabContent="'+h.mandal+'" class="'+(c[0]==h.mandal?"show":"hide")+'">'}i=h.years;for(var s=0;s<i.length;s++){if(j=i[s],i.length>1){if(0==s)for(var r=0;r<i.length;r++)f+=0==r?'<ul data-tabNav="'+i.length+'">':"",f+='<li data-tabContent-id="'+g[q].mandal+i[r].year+'" class="'+(c[1]==i[r].year?"active":"")+'"><div data-href="'+e+"/?"+g[q].mandal+"/"+i[r].year+"/"+i[r].regions[0].region+'">'+i[r].year+"</div></li>",f+=r==i.length-1?'</ul><div data-tabContentParent="2">':"";f+='<div data-tabContent="'+h.mandal+j.year+'" class="'+(c[1]==j.year?"show":"hide")+'">'}k=j.regions;for(var t=0;t<k.length;t++){if(l=k[t],k.length>1){if(0==t)for(var r=0;r<k.length;r++)f+=0==r?'<ul data-tabNav="'+k.length+'">':"",f+='<li data-tabContent-id="'+g[q].mandal+i[s].year+k[r].region+'" class="'+(c[2]==k[r].region?"active":"")+'"><div data-href="'+e+"/?"+g[q].mandal+"/"+i[s].year+"/"+k[r].region+'">'+k[r].region+"</div></li>",f+=r==k.length-1?'</ul><div data-tabContentParent="3">':"";f+='<div data-tabContent="'+h.mandal+j.year+l.region+'" class="'+(c[2]==l.region?"show":"hide")+'">'}f+="<div data-card>",f+='<table><thead><tr><th width="35%">Center</th><th width="20%">Goal</th><th width="20%">Visited</th><th width="25%">Remaining</th></tr></thead></table>',m=l.users;for(var u=0;u<m.length;u++){n=m[u],f+=0==u?'<ul data-list="list">':"",f+='<li data-color="gray"><div><u class="fa fa-user"></u> '+n.name+"</div></li><li>",o=n.centers,a=0;for(var v=0;v<o.length;v++)p=o[v],f+=0==v?"<table><tbody>":"",a=parseInt(p.goal)-parseInt(p.visited),a=1>a?0:1,f+='<tr><td width="35%">'+p.center+'</td><td width="20%">'+p.goal+'</td><td width="20%">'+p.visited+'</td><td width="25%">'+a+"</td></tr>",f+=v==o.length-1?"</tbody></table>":"";f+="</li>",f+=u==m.length-1?"</ul>":""}f+="</div>",f+=k.length>1?"</div>":"",f+=t==k.length-1?"</div>":""}f+=i.length>1?"</div>":"",f+=s==i.length-1?"</div>":""}f+=g.length>1?"</div>":"",f+=q==g.length-1?"</div>":""}}else OM.Database.checkSync(OM.Page.my_goals());OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Individual Summary",'<a target="_blank" data-button href="'+OM.process+'export-report-individual.php"><i class="fa fa-cloud-download"></i></a>',f,"")},OM.Page.report_planned_visits_date=function(){var a="";if(null==OM.plannedDates||void 0==OM.plannedDates)OM.Page.error(404);else if(OM.plannedDates.length>0)for(var b=OM.plannedDates,c=0;c<b.length;c++){if(b.length>1){var d="hide";if(0==c){d="show";for(var e=0;e<b.length;e++){var f="";0==e&&(a+='<ul data-tabNav="'+b.length+'">',f="active"),a+='<li data-tabContent-id="'+b[e].mandal+'" class="'+f+'"><div>'+b[e].mandal+"</div></li>",e==b.length-1&&(a+="</ul>")}a+="<div data-tabContentParent>"}a+='<div data-tabContent="'+b[c].mandal+'" class="'+d+'">'}a+="<div data-card>";for(var g=b[c].dates,h=0;h<g.length;h++){g.length>1&&(0==h&&(a+='<ul data-list="list">'),a+='<li data-color="gray"><div data-title><u class="fa fa-clock-o"></u>'+g[h].date+"</div></li>");var i=g[h].users;a+="<li>";for(var j=0;j<i.length;j++)0==j&&(a+="<ul data-list>"),region=""!=i[j].region?" - <em>"+i[j].region+"</em>":"",a+='<li><div class="detail"><div class="title">'+i[j].name+'</div><div class="note"><strong>'+i[j].center+"</strong>"+region+'</div></div><div data-text="right">'+i[j].sabha_type+"</div></li>",j==i.length-1&&(a+="</ul>");g.length>1&&(a+="</li>",h==g.length-1&&(a+="</ul>"))}a+="</div>",b.length>1?a+="</div>":"",c==b.length-1?a+="</div>":""}else a='<div id="error-page"><h1>There is nothing planed.</h1><p>You are looking this because RC have not planed any vicharan for upcoming dates.</p></div>';OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Planned Visits by Date","",a,"")},OM.Page.report_planned_visits_rc=function(){var a="",b="";if(null==OM.plannedUsers||void 0==OM.plannedUsers)OM.Page.error(404);else if(OM.plannedUsers.length>0)for(var c=OM.plannedUsers,d=0;d<c.length;d++){if(c.length>1){var e="hide";if(0==d){e="show";for(var f=0;f<c.length;f++){var g="";0==f&&(a+='<ul data-tabNav="'+c.length+'">',g="active"),a+='<li data-tabContent-id="'+c[f].mandal+'" class="'+g+'"><div class="tab">'+c[f].mandal+"</div></li>",f==c.length-1&&(a+="</ul>")}a+="<div data-tabContentParent>"}a+='<div data-tabContent="'+c[d].mandal+'" class="'+e+'">'}a+="<div data-card>";for(var h=c[d].regions,i=0;i<h.length;i++){h.length>1&&(0==i&&(a+='<ul data-list="nest" data-colorName="inverse">'),a+='<li><div data-title="region-'+i+'"><u class="fa fa-globe"></u>'+h[i].region+'<i class="fa fa-caret-up"></i></div><div data-content="region-'+i+'">');for(var j=h[i].users,k=0;k<j.length;k++){j.length>1&&(0==k&&(a+='<ul data-list="list">'),a+='<li data-color="gray"><div data-title><u class="fa fa-user"></u>'+j[k].name+"</div></li><li>");for(var l=j[k].planes,m=0;m<l.length;m++)0==m&&(a+="<ul data-list>"),b=""!=l[m].region?" - <em>"+l[m].region+"</em>":"",a+='<li><div class="detail"><div class="title"><strong>'+l[m].center+"</strong>"+b+'</div><div class="note">'+l[m].date+'</div></div><div data-text="right">'+l[m].sabha_type+"</div></li>",m==l.length-1&&(a+="</ul>");j.length>1&&(a+="</li>",k==j.length-1&&(a+="</ul>"))}h.length>1&&(a+="</div></li>",i==h.length-1&&(a+="</ul>"))}a+="</div>",c.length>1?a+="</div>":"",d==c.length-1?a+="</div>":""}else a='<div id="error-page"><h1>There is nothing planed.</h1><p>You are looking this because RC have not planed any vicharan for upcoming dates.</p></div>';OM.Page.format(OM.back_btn(OM.domain+"#reports"),"Planned Visits by RC","",a,"")},OM.Page.reports=function(){var a="";a=OM.session.ul<=OM.select.user_level.ra?OM.Page.row(Array(Array({attr:""},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/individual/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'">Individual Progress</a>')),Array({attr:""},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a target="_blank" href="'+OM.process+'export-center-analysis16-summary-all.php">2016 Center Analysis Summary (All centers)</a>')),Array({attr:"data-title"},Array("","Checked-In Summary")),Array({attr:"data-indent"},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/checked_in-rc/?"+OM.session.mandal_full+"/"+OM.session.region+'">RC</a>')),Array({attr:"data-indent"},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/checked_in-date/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+'">Date</a>')),Array({attr:"data-indent"},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/checked_in-center/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'">Center</a>')),Array({attr:"data-title"},Array("","Planned Visits Summary")),Array({attr:"data-indent"},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/planned-visits-rc/?"+OM.session.mandal_full+'">RC</a>')),Array({attr:"data-indent"},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/planned-visits-date/?"+OM.session.mandal_full+'">Date</a>'))),'data-list="link" data-card'):OM.Page.row(Array(Array({attr:""},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a href="'+OM.domain+"#reports/individual/?"+OM.session.mandal_full+"/"+OM.Date.year_full()+"/"+OM.session.region+'">Individual Summary</a>')),Array({attr:""},Array("i",'<i class="float-right fa fa-chevron-right"></i>'),Array("link",'<a target="_blank" href="'+OM.process+'export-center-analysis16-summary-all.php">2016 Center Analysis Summary (All centers)</a>'))),'data-list="link" data-card'),OM.Page.format("","My Vicharan Snapshot","",a,"")},OM.Page.settings_check_in=function(){var a="settings-check-in",b="",c="",d="";if(OM.Database.check(OM.myCheckIn)&&OM.myCheckIn.length>0){b+="<ul data-list data-card>";for(var e=0;e<OM.myCheckIn.length;e++)c=OM.myCheckIn[e],d="<strong>"+c.center+"</strong>",d+=void 0!=c.sabha_type&&""!=c.sabha_type?"("+c.sabha_type+")":"",d+=void 0!=c.region&&""!=c.region?"<em>"+c.region+"</em>":"",b+='<li id="checkIn-'+c.id+'"><div class="detail"><div class="title">'+d+'</div><div class="note">'+c.datetime+'</div></div><div data-btn="right">'+OM.Button.remove({id:a,attr:'data-id="'+c.id+'"'})+"</div></li>";b+="</ul>"}else b="No History in database. please check in! 1st to see your history.";OM.Page.format(OM.back_btn(OM.domain+"#settings"),"Check-in History","",b)},OM.live_event(".btn-remove-settings-check-in","click",function(){var a="settings-check-in",b=$(this).attr("data-id");OM.Modal.remove(a,OM.process+"index.php",{code:"settings",type:"remove-check-in",id:b},function(a){OM.Database.update("myCheckIn",a.data),$("#checkIn-"+b).remove()})}),OM.Page.settings_home_icon=function(){var a="";1==OM.ios?a='<div data-card><div><h2 class="text-center"><i class="fa fa-apple"></i>&nbsp;iOS Devices</h2></div><ol data-list="list"><li>Open this website in <strong>Safari App</strong><br><img src="'+OM.domain+'img/home-icon/ios-1.jpg" width="70"></li><li>Click on the <strong>share</strong> button located at bottom-center<br><img src="'+OM.domain+'img/home-icon/ios-2.png" width="280"></li><li>Select <strong>Add to Home Screen</strong><br><img src="'+OM.domain+'img/home-icon/ios-3.png" width="280"></li><li>Press <strong>Add</strong><br><img src="'+OM.domain+'img/home-icon/ios-4.png" width="280"></li><li>You should see the RC Vicharan icon on your home screen.<br><img src="'+OM.domain+'img/home-icon/app-icon.png" width="70"><br>When you open this WebApp it will open in full screen so it will feel like a native app.</li></ol></div>':1==OM.android&&(a='<div data-card><div><h2 class="text-center"><i class="fa fa-android"></i>&nbsp;Android Devices</h2></div><ol data-list="list"><li>Open this website in <strong>Chrome App</strong><br><img src="'+OM.domain+'img/home-icon/android-1.jpg" width="70"></li><li>Click on Menu then select <strong>Add to homescreen</strong>.<br><img src="'+OM.domain+'img/home-icon/android-2.png" width="280"></li><li>If you do not see the Title prefill then give Title <strong>RC Vicharan</strong> then touch on <strong>Add</strong> button on the bottom of the dialog box.<br><img src="'+OM.domain+'img/home-icon/android-3.png" width="280"></li><li>You should see the RC Vicharan icon on your home screen.<br><img src="'+OM.domain+'img/home-icon/app-icon.png" width="70"><br>When you open this WebApp it will open in full screen so it will feel like a native app.</li></ol></div>'),a?OM.Page.format(OM.back_btn(OM.domain+"#settings"),"Add to Home Screen","",a):OM.Page.error(404)},OM.Page.settings_password=function(){var a="settings-password";return OM.Page.format(OM.back_btn(OM.domain+"#settings"),"Reset Password","",'<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","New Password"),Array("value",'<input type="password" id="'+a+'-new" value="" required>')),Array({attr:""},Array("field","Confirm New Password"),Array("value",'<input type="password" id="'+a+'-confirm" value="" required>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Update"})+"</div></form>")},OM.live_event("form#settings-password","submit",function(a){a.preventDefault();var b="settings-password",c="#"+b+"-new",d="#"+b+"-confirm",e=$.trim($(c).val()),f=$.trim($(d).val()),g=OM.Validation.password(e),h=!1;OM.Form.validate(b)?1!=g?(h=!0,OM.error_message(b,c,g)):e!==f&&(h=!0,OM.error_message(b,d,"Confirm password does not match")):h=!0,0==h&&OM.Modal.save(b,OM.process+"index.php",{code:"settings",type:"save-password",password:php_md5(f)},function(){$("#back-btn").trigger("click")})}),OM.Page.settings_profile=function(){{var a="settings-profile";OM.session.ul>OM.select.user_level.ra?'class="hidden"':""}OM.Page.format(OM.back_btn(OM.domain+"#settings"),OM.session.fn+" "+OM.session.ln,"",'<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","First Name"),Array("value",'<input id="'+a+'-first_name" placeholder="First Name" value="'+OM.session.fn+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Last Name"),Array("value",'<input id="'+a+'-last_name" placeholder="Last Name" value="'+OM.session.ln+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Email Address"),Array("value",'<input id="'+a+'-email" placeholder="Email Address" value="'+OM.session.e+'" type="email" spellcheck="false" required/><div class="note">This will be you username</div>')),Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select Region",selected:OM.session.region,attr:'class="get-center-by-region" data-page_name="'+a+'" required'}))),Array({attr:'id="'+a+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+a+'-region-center" data-page_name="'+a+'" data-center="'+OM.session.center+'" required></select>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,text:"Update"})+"</div></form>",""),$("#"+a+"-region").trigger("change")},OM.live_event("form#settings-profile","submit",function(a){return a.preventDefault(),OM.Form.confirm("settings-profile","Update Profile"),!1}),OM.live_event("#btn-confirm-settings-profile","click",function(){var a="settings-profile";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"settings", "type":"save-profile"')),function(a){OM.Database.update("session",a.data),$("#back-btn").trigger("click")})}),OM.Page.settings_gcal=function(){OM.Page.format(OM.back_btn(OM.domain+"#settings"),"Sync to Calendar","",'<div data-card><div><strong>Google Calendar</strong></div><br><li>Please do the following steps on the desktop.</li><ol data-list="list"><li>Go to <a href="http://www.google.com/calendar/" target="_blank">http://www.google.com/calendar/</a></li><li>On the left side click on the drop down arrow next to <strong>other calendars</strong> and select <strong>Add by URL</strong><br><img src="'+OM.domain+'img/google_calendar.png"></li><li>In the dialog box enter this link (<strong>'+OM.domain+"gcal.php?id=iz5kcdpt2g"+OM.session.uid+"</strong>) and click <strong>Add Calendar</strong> Button.</li></ol><li>The initial sync to your calendar should be instant, but updates may take a while to reach your calendar - sometimes up to a day.</li></div>")},OM.Page.settings=function(){var a=new Array,b=new Array,c="";a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#settings/profile">My Profile</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#settings/password">Reset Password</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),OM.session.ul!=OM.select.user_level.ra&&OM.session.ul!=OM.select.user_level.sanchalak&&(a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#settings/check-in">My Check-in History</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>')),a[a.length]=Array({attr:""},Array("link",'<a href="'+OM.domain+'#settings/gcal">Sync to Calendar</a>'),Array("i",'<i class="float-right fa fa-chevron-right"></i>'))),b[b.length]=Array({attr:""},Array("field","Update database"),Array("value",'<button type="button" id="btn-sync" data-button data-color="purple"><i class="fa fa-refresh"></i></button><div class="note" id="sync-time">Last updated: '+OM.session.syncTime+"</div>")),c=OM.Page.row(a,'data-list="link" data-card'),c+=OM.Page.row(b,'data-list="form" data-card'),OM.Page.format("","Settings","",c,"")},OM.live_event("form#setup-center","submit",function(a){return a.preventDefault(),OM.Form.confirm("setup-center","Vicharan centers"),!1}),OM.live_event("#btn-confirm-setup-center","click",function(){var a="setup-center";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"setup", "type":"save-center"')),function(a){OM.Database.update("session",a.session),OM.Page.setup_start()})}),OM.live_event(".btn-remove-setup-center","click",function(){var a=$(this).attr("data-center"),b="setup-center";OM.Modal.remove(b,OM.process+"index.php",{code:"setup",type:"remove-center",center:a},function(a){OM.Database.update("session",a.session),OM.Page.setup_start()})}),OM.live_event("#setup-center-reload-list","click",function(){for(var a="setup-center",b="",c=OM.session.assign_center,d=0;d<c.length;d++)0==d&&(b+="<ul data-list>"),b+="<li><div>"+c[d].name+'</div><div data-btn="right">'+OM.Button.remove({id:a,attr:'data-center="'+c[d].name+'"'})+"</div></li>",d==c.length-1&&(b+="</ul>");$("#"+a+"-list").html(b)}),OM.live_event("form#setup-goal","submit",function(a){return a.preventDefault(),OM.Form.confirm("setup-goal","Vicharan Goals"),!1}),OM.live_event("#btn-confirm-setup-goal","click",function(){var a="setup-goal";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"my-goals", "type":"save"')),function(b){OM.Database.update("myGoals",b.data),$("form#setup-goal").trigger("reset"),$("#"+a+"-reload-list").trigger("click")})}),OM.live_event("#setup-goal-reload-list","click",function(){for(var a="setup-goal",b="",c=OM.search_objects(OM.myGoals,"profile_id",OM.session.uid),d=0;d<c.length;d++){b+="<ul data-list>";for(var e=c[d].centers,f=0;f<e.length;f++)b+='<li><div class="detail"><div>'+e[f].center+'</div><div class="note">'+e[f].year+'</div></div><div data-btn="right"><button data-button data-color="purple">'+e[f].goal+"</button></div></li>";b+=d==c.length-1?"</ul>":""}$("#"+a+"-list").html(b)}),OM.live_event("form#setup-password","submit",function(a){a.preventDefault();var b="setup-password",c="#"+b+"-new",d="#"+b+"-confirm",e=$.trim($(c).val()),f=$.trim($(d).val()),g=OM.Validation.password(e),h=!1;return OM.Form.validate(b)?1!=g?(h=!0,OM.error_message(b,c,g)):e!==f&&(h=!0,OM.error_message(b,d,"Confirm password does not match")):h=!0,0==h&&OM.Modal.save(b,OM.process+"index.php",{code:"setup",type:"save-password",password:php_md5(f),sid:OM.session.sid,uid:OM.session.uid},function(a){OM.Database.update("session",a.session),OM.Page.setup_start()}),!1}),OM.live_event("form#setup-profile","submit",function(a){return a.preventDefault(),OM.Form.confirm("setup-profile","Update Profile"),!1}),OM.live_event("#btn-confirm-setup-profile","click",function(){var a="setup-profile";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"setup", "type":"save-profile"')),function(a){OM.Database.update("session",a.session),OM.Page.setup_start()})}),OM.Page.setup_welcome=function(){var a='<i class="fa fa-check-square-o"></i>',b="",c="",d="";return c+='<li><div>Profile</div><div data-text="right">'+(OM.session.setup>0?a:"")+"</div></li>",c+='<li><div>Password</div><div data-text="right">'+(OM.session.setup>1?a:"")+"</div></li>",OM.session.ul!=OM.select.user_level.ra&&OM.session.ul!=OM.select.user_level.sanchalak&&(c+='<li><div>Vicharan Centers</div><div data-text="right">'+(OM.session.setup>2?a:"")+"</div></li>",c+='<li><div>Vicharan Goals</div><div data-text="right">'+(OM.session.setup>3?a:"")+"</div></li>"),OM.session.setup<OM.setup-1?b="<div data-card><h3>Welcome "+OM.session.fn+" "+OM.session.ln+' to Mobile Vicharan Site.</h3><br><p>We like to take a moment to update your account.</p><ul data-list="li-icon">'+c+'</ul><div class="text-center"><button data-href="'+OM.domain+'#setup" data-button data-color="orange">Begin</button></div></div>':(d=OM.session.ul==OM.select.user_level.ra||OM.session.ul==OM.select.user_level.sanchalak?"Center Analysis":"Check-in!",b="<div data-card><h3>Thank you! "+OM.session.fn+" "+OM.session.ln+'</h3><br><p>Thank you for your time to update your account.</p><ul data-list="li-icon">'+c+'</ul><div class="text-center"><button id="setup-next" data-setup_pg="5" data-button data-color="blue"><i class="fa fa-map-marker"></i> '+d+"</button></div></div>"),OM.Page.format("setup","Setup","",b)},OM.Page.setup_start=function(){var a="Coming Soon",b="setup-",c="";if(OM.session.setup>1&&OM.session.setup<4&&(OM.session.ul==OM.select.user_level.ra||OM.session.ul==OM.select.user_level.sanchalak)&&(OM.session.setup=4,OM.get_data(OM.process+"index.php",{code:"setup",type:"update-setup",value:4},function(a){OM.Database.update("session",a.session)})),0==OM.session.setup)b+="profile",c=" - Profile",a='<form id="'+b+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","First Name"),Array("value",'<input id="'+b+'-first_name" placeholder="First Name" value="'+OM.session.fn+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Last Name"),Array("value",'<input id="'+b+'-last_name" placeholder="Last Name" value="'+OM.session.ln+'" type="text" spellcheck="false" required/>')),Array({attr:""},Array("field","Email Address"),Array("value",'<input id="'+b+'-email" placeholder="Email Address" value="'+OM.session.e+'" type="email" spellcheck="false" required/><div class="note">This will be you username</div>')),Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:b+"-region",data:OM.select.region,title:"Select Region",selected:OM.session.region,attr:'class="get-center-by-region" data-page_name="'+b+'" required'}))),Array({attr:'id="'+b+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+b+'-region-center"  data-page_name="'+b+'" data-center="'+OM.session.center+'" required></select>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:b,text:"Update"})+"</div></form>",setTimeout(function(){$("#"+b+"-region").trigger("change")},100);else if(1==OM.session.setup)b+="password",c=" - Password",a='<form id="'+b+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","New Password"),Array("value",'<input type="password" id="'+b+'-new" value="" required>')),Array({attr:""},Array("field","Confirm New Password"),Array("value",'<input type="password" id="'+b+'-confirm" value="" required>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:b,color:!0,icon:!0,text:"Update"})+"</div></form>";else if(2==OM.session.setup)b+="center",c=" - Vicharan Centers",a='<form id="'+b+'" data-card novalidate><h3>Please Select your <strong>vicharan</strong> center</h3><br>'+OM.Page.row(Array(Array({attr:""},Array("field","Region"),Array("value",OM.Form.built_select_box({id:b+"-region",data:OM.select.region,title:"Select Region",attr:'class="get-center-by-region" data-page_name="'+b+'" required'}))),Array({attr:""},Array("field","Center"),Array("value",'<select id="'+b+'-region-center" required></select>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:b,text:"Add"})+' <button type="button" id="setup-next" data-setup_pg="3" data-button data-color="orange">Continue</button></div></form><button class="hidden" id="'+b+'-reload-list"></button>',a+='<div id="'+b+'-list" data-card></div>',setTimeout(function(){$("#"+b+"-reload-list").trigger("click")},200);else if(3==OM.session.setup){b+="goal",c=" - Vicharan Goals";var d="";OM.Date.month()<11&&(d='class="hidden"'),a='<form id="'+b+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:'id="'+b+'-assign-center"'},Array("field","Center"),Array("value",OM.Form.select_assign_center({id:b+"-center",attr:"required"}))),Array({attr:""},Array("field","Goal"),Array("value",'<input type="number" id="'+b+'-goal" value="" min="1" max="99" required>')),Array({attr:d},Array("field","Year"),Array("value",OM.Form.year({id:b+"-year",selected:OM.Date.year_full(),attr:"required"})))),'data-list="form"')+'<div class="btn">'+OM.Button.save({page_name:b,text:"Add"})+' <button type="button" data-button id="setup-next" data-setup_pg="4" data-color="orange">Continue</button></div></form><button class="hidden" id="'+b+'-reload-list"></button>',a+='<div id="'+b+'-list" data-card></div>',setTimeout(function(){$("#"+b+"-reload-list").trigger("click")},200)}OM.session.setup<OM.setup-1?OM.Page.format("setup","Setup"+c,"",a):OM.Page.setup_welcome()},OM.live_event("#setup-next","click",function(){var a=$(this).attr("data-setup_pg"),b="";OM.get_data(OM.process+"index.php",{code:"setup",type:"update-setup",value:a},function(a){OM.Database.update("session",a.session),OM.session.setup<OM.setup?OM.Page.setup_start():(b=OM.session.ul==OM.select.user_level.ra||OM.session.ul==OM.select.user_level.sanchalak?"center-analysis":"check-in",OM.Url.navigate(OM.domain+"#"+b))})}),OM.Page.vicharan_note_read=function(){var a=OM.Url.param,b="";if(null==OM.vicharanNotes||void 0==OM.vicharanNotes)OM.Page.error(404);else if(OM.vicharanNotes.length>0){var c=OM.search_objects(OM.vicharanNotes,"mandal",a[0]),d=OM.search_objects(c,"region",a[1]),e=OM.search_objects(d,"center",a[2]),f=e.length>0?e[0].sabha_types:new Array,g=e.length>0&&void 0!=a[3]&&""!=a[3]?OM.search_objects(e,"sabha_type",a[3])[0].comments:new Array;if(f.length>0){for(var h=0;h<f.length;h++)b+=0==h?'<ul data-tabNav="'+f.length+'">':"",b+='<li data-tabContent-id="'+OM.replace_space(f[h].sabha_type)+'" class="'+(a[3]==f[h].sabha_type?"active":"")+'"><div data-href="'+OM.domain+"#vicharan-notes/read/?"+a[0]+"/"+a[1]+"/"+a[2]+"/"+f[h].sabha_type+'">'+f[h].sabha_type+"</div></li>",b+=h==f.length-1?"</ul>":"";b+='<div data-tabContentParent><div class="show" data-tabContent="'+OM.replace_space(a[3])+'">';for(var h=0;h<g.length;h++){var i=g[h];b+='<div data-list="comment" data-card>',OM.is_empty(i.positive_points)||(b+="<div><p><strong>Positive Points:</strong></p>"+i.positive_points+"</div>"),OM.is_empty(i.issues)||(b+="<div><p><strong>Issues:</strong></p>"+i.issues+"</div>"),OM.is_empty(i.follow_up_list)||(b+="<div><p><strong>Follow Up List:</strong></p>"+i.follow_up_list+"</div>"),OM.is_empty(i.other_comment)||(b+="<div><p><strong>Other/General Comment:</strong></p>"+i.other_comment+"</div>"),b+='<div class="footer"><span>'+i.name+"</span><span>"+i.date+"</span></div></div>"}b+="</div></div>",OM.Page.format(OM.back_btn(OM.domain+"#vicharan-notes/?"+OM.array_to_string(a,"/",2)),e[0].center+" Notes","",b)}else b=OM.Page.error(404,"")}},OM.Page.vicharan_note_add=function(){var a="vicharan-note-add";OM.Page.format(OM.back_btn(OM.domain+"#vicharan-notes"),"Add Vicharan Notes","",'<form id="'+a+'" data-card novalidate>'+OM.Page.row(Array(Array({attr:""},Array("field","Date"),Array("value",'<input type="date" id="'+a+'-date" value="'+OM.Date.today()+'" required>')),Array({attr:'id="'+a+'-assign-center"'},Array("field","Center"),Array("value",OM.Form.select_assign_center({id:a+"-center",other_center:!0,attr:'class="get-sabha-by-center" data-page_name="'+a+'" required'}))),Array({attr:' id="'+a+'-all-region" class="hidden"'},Array("field","Region"),Array("value",OM.Form.built_select_box({id:a+"-region",data:OM.select.region,title:"Select Region",attr:'class="get-center-by-region" data-page_name="'+a+'" required'}))),Array({attr:' id="'+a+'-all-center" class="hidden"'},Array("field","Center"),Array("value",'<select id="'+a+'-region-center" class="get-sabha-by-center" data-page_name="'+a+'" required></select>')),Array({attr:' id="'+a+'-sabha_type" class="hidden"'},Array("field","Sabha Type"),Array("value",'<select id="'+a+'-sabha" required></select>')),Array({attr:""},Array("field","Positive Points"),Array("value",'<textarea data-group="1" id="'+a+'-positive_points" required></textarea>')),Array({attr:""},Array("field","Issues"),Array("value",'<textarea data-group="1" id="'+a+'-issues" required></textarea>')),Array({attr:""},Array("field","Follow Up List"),Array("value",'<textarea data-group="1" id="'+a+'-follow_up_list" required></textarea>')),Array({attr:""},Array("field","Other/General Comment"),Array("value",'<textarea data-group="1" id="'+a+'-other_comment" required></textarea>')),Array({attr:""},Array("field","Email P. Sant/RMC"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+a+'-email" value="Y" placehoder="Email P. Sant/RMC"><label for="'+a+'-email"><div class="inner"></div><div class="btn-switch"></div></label></div>'))),'data-list="form"')+'<div class="btn">'+OM.Button.save({id:a,color:!0,icon:'<i class="fa fa-comments-o"></i> ',text:"Submit"})+"</div></form>"),OM.nicEditor(a+"-positive_points"),OM.nicEditor(a+"-issues"),OM.nicEditor(a+"-follow_up_list"),OM.nicEditor(a+"-other_comment")
},OM.Page.vicharan_note_edit=function(a){a=void 0==a?new Object:a,a.index=void 0==a.index?"":a.index,a.back_link=void 0==a.back_link?OM.domain+"#check-in":a.back_link;var b="vicharan-note-edit",c=OM.myCheckIn[a.index],d="",e="";""==a.index||void 0==c?e="<h3>Sorry! we can not read the data.</h3>":(d=" - "+c.center,e=Array(Array({attr:""},Array("field","Date"),Array("value",c.datetime)),Array({attr:""},Array("field","Center"),Array("value",c.center+"("+c.sabha+") - <em>"+c.region+"</em>")),Array({attr:'class="hidden"'},Array("field","Region"),Array("value",'<input type="hidden" id="'+b+'-region" value="'+c.region+'" data-show="confirm">')),Array({attr:'class="hidden"'},Array("field","Center"),Array("value",'<input type="hidden" id="'+b+'-center" value="'+c.center+'" data-show="confirm">')),Array({attr:'class="hidden"'},Array("field","Sabha Type"),Array("value",'<input type="hidden" id="'+b+'-sabha" value="'+c.sabha+'" data-show="confirm">')),Array({attr:""},Array("field","Positive Points"),Array("value",'<textarea data-group="1" id="'+b+'-positive_points" required>'+c.positive_points+"</textarea>")),Array({attr:""},Array("field","Issues"),Array("value",'<textarea data-group="1" id="'+b+'-issues" required>'+c.issues+"</textarea>")),Array({attr:""},Array("field","Follow Up List"),Array("value",'<textarea data-group="1" id="'+b+'-follow_up_list" required>'+c.follow_up_list+"</textarea>")),Array({attr:""},Array("field","Other/General Comment"),Array("value",'<textarea data-group="1" id="'+b+'-other_comment" required>'+c.other_comment+"</textarea>"))),""==c.vicharan_note_id&&(e[e.length]=Array({attr:""},Array("field","Email P. Sant/RMC"),Array("value",'<div class="checkbox yes-no"><input type="checkbox" id="'+b+'-email" value="Y" placehoder="Email P. Sant/RMC"><label for="'+b+'-email"><div class="inner"></div><div class="btn-switch"></div></label></div><div class="note">After comfirming this comment it will be send to P. Santos/RMC who are doing vicharan in '+c.center+".</div>"))),e='<form id="'+b+'" data-card data-index="'+a.index+'" novalidate>'+OM.Page.row(e,'data-list="form"')+'<div class="btn">'+OM.Button.save({id:b,color:!0,icon:'<i class="fa fa-comments-o"></i> ',text:"Submit"})+"</div></form>"),OM.Page.format(OM.back_btn(a.back_link),"Vicharan Notes"+d,"",e),void 0!=c&&(OM.nicEditor(b+"-positive_points"),OM.nicEditor(b+"-issues"),OM.nicEditor(b+"-follow_up_list"),OM.nicEditor(b+"-other_comment"))},OM.live_event("form#vicharan-note-add","submit",function(){return OM.Form.confirm("vicharan-note-add","Vicharan Note"),!1}),OM.live_event("#btn-confirm-vicharan-note-add","click",function(){var a="vicharan-note-add";OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"vicharan-notes", \n				"type":"add"')),function(a){OM.Database.update("myCheckIn",a.myCheckIn),OM.Database.update("vicharanNotes",a.vicharanNotes),OM.Database.update("myVicharanEvents",a.myVicharanEvents),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.live_event("form#vicharan-note-edit","submit",function(){return OM.Form.confirm("vicharan-note-edit","Vicharan Note"),!1}),OM.live_event("#btn-confirm-vicharan-note-edit","click",function(){var a="vicharan-note-edit",b="0"==$("#"+a).attr("data-index")?0:parseInt($("#"+a).attr("data-index")),c=OM.myCheckIn[b].vicharan_note_id,d=OM.myCheckIn[b].check_in_id;OM.Modal.close("confirm-"+a),OM.Modal.save(a,OM.process+"index.php",$.parseJSON(OM.Form.field_json(a,'"code":"vicharan-notes", \n				"type":"update", \n				"id":"'+d+'", \n				"vicharan_note_id":"'+c+'"')),function(a){OM.Database.update("myCheckIn",a.myCheckIn),OM.Database.update("vicharanNotes",a.vicharanNotes),OM.Database.update("myVicharanEvents",a.myVicharanEvents),setTimeout(function(){$("#back-btn").trigger("click")},500)})}),OM.Page.vicharan_notes=function(a){a=void 0==a?new Object:a;var b,c,d,e,f=OM.vicharanNotes,g=OM.Url.param,h=OM.domain+"#vicharan-notes";if(OM.Database.check(f))if(0==f.length)b='<div style="text-align:right; position:relative;"><i class="fa fa-level-up" style="font-size:10em; margin-right:5px;"></i><div style="position:absolute; bottom:30px; right:90px; font-size:2em; width:170px; line-height:1em;">Click here to add vicharan note</div></div>';else{c=f,b="";for(var i=0;i<c.length;i++){if(c.length>1){if(0==i)for(var j=0;j<c.length;j++)b+=0==j?'<ul data-tabNav="'+c.length+'">':"",b+='<li data-tabContent-id="'+c[j].mandal+'" class="'+(g[0]==c[j].mandal?"active":"")+'"><div data-href="'+h+"/?"+c[j].mandal+"/"+c[j].regions[0].region+'">'+c[j].mandal+"</div></li>",b+=j==c.length-1?'</ul><div data-tabContentParent="1">':"";b+='<div data-tabContent="'+c[i].mandal+'" class="'+(g[0]==c[i].mandal?"show":"hide")+'">'}d=c[i].regions;for(var k=0;k<d.length;k++){if(d.length>1){if(0==k)for(var j=0;j<d.length;j++)b+=0==j?'<ul data-tabNav="'+d.length+'">':"",b+='<li data-tabContent-id="'+c[i].mandal+d[j].region+'" class="'+(g[1]==d[j].region?"active":"")+'"><div data-href="'+h+"/?"+c[i].mandal+"/"+d[j].region+'">'+d[j].region+"</div></li>",b+=j==d.length-1?"</ul><div data-tabContentParent>":"";b+='<div data-tabContent="'+c[i].mandal+d[k].region+'" class="'+(g[1]==d[k].region?"show":"hide")+'">'}b+="<div data-card>",e=d[k].centers;for(var l=0;l<e.length;l++)b+=0==l?'<ul data-list="link">':"",b+='<li><a data-href="'+h+"/read/?"+c[i].mandal+"/"+d[k].region+"/"+e[l].center+"/"+e[l].sabha_types[0].sabha_type+'">'+e[l].center+'</a><i class="fa fa-chevron-right"></i></li>',b+=l==e.length-1?"</ul>":"";b+="</div>",b+=d.length>1?"</div>":"",b+=k==d.length-1?"</div>":""}b+=c.length>1?"</div>":"",b+=i==c.length-1?"</div>":""}}else OM.Database.checkSync(OM.Page.vicharan_notes(a));OM.Page.format("","Vicharan Notes",OM.Button.add({color:!1,attr:'data-href="'+OM.domain+'#vicharan-notes/add"'}),b)};